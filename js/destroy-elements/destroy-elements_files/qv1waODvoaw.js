/*!CK:2965063784!*//*1422907033,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["\/YCsI"]); }

__d("AdsAPICustomAudienceFilteringFields",[],function(a,b,c,d,e,f){e.exports={DELIVERY_STATUS_CODE:"delivery_status.code",DATA_SOURCE_SUBTYPE:"data_source.subtype",QUICK_LOOK:"quicklook",SUBTYPE:"subtype"};},null);
__d("AdsConnectionObjTypes",[],function(a,b,c,d,e,f){e.exports={PAGE:1,APPLICATION:2,EVENT:3,GROUP:4,REVIEW:5,PLACE:6,DOMAIN:7,STATUS:8,PLAN:9,VIDEO:10,SHARE:11,PHOTO:12,MOBILE_STORE_OBJECT:13,COUPON:14};},null);
__d("AdsPixelNotifFieldEnum",[],function(a,b,c,d,e,f){e.exports={PERSONAL_MESSAGE_LABEL:"personal_message_label",INSTRUCTION_LABEL:"instruction_label",INSTRUCTION:"instruction"};},null);
__d("AdsPixelNotifParamsEnum",[],function(a,b,c,d,e,f){e.exports={PERSONAL_MESSAGE:"personal_message",PIXEL_ID:"pixel_id",RECIPIENTS:"recipients"};},null);
__d("CustomAudienceDataSourceSubType",[],function(a,b,c,d,e,f){e.exports={ANYTHING:"ANYTHING",NOTHING:"NOTHING",HASHES:"HASHES",USER_IDS:"USER_IDS",HASHES_OR_USER_IDS:"HASHES_OR_USER_IDS",MOBILE_ADVERTISER_IDS:"MOBILE_ADVERTISER_IDS",EXTERNAL_IDS:"EXTERNAL_IDS",MULTI_HASHES:"MULTI_HASHES",WEB_PIXEL_HITS:"WEB_PIXEL_HITS",MOBILE_APP_EVENTS:"MOBILE_APP_EVENTS",MOBILE_APP_COMBINATION_EVENTS:"MOBILE_APP_COMBINATION_EVENTS",VIDEO_EVENTS:"VIDEO_EVENTS",WEB_PIXEL_COMBINATION_EVENTS:"WEB_PIXEL_COMBINATION_EVENTS",CUSTOM_AUDIENCE_USERS:"CUSTOM_AUDIENCE_USERS",PAGE_FANS:"PAGE_FANS",CONVERSION_PIXEL_HITS:"CONVERSION_PIXEL_HITS",APP_USERS:"APP_USERS",S_EXPR:"S_EXPR",DYNAMIC_RULE:"DYNAMIC_RULE",CAMPAIGN_CONVERSIONS:"CAMPAIGN_CONVERSIONS",WEB_PIXEL_HITS_CUSTOM_AUDIENCE_USERS:"WEB_PIXEL_HITS_CUSTOM_AUDIENCE_USERS",MOBILE_APP_CUSTOM_AUDIENCE_USERS:"MOBILE_APP_CUSTOM_AUDIENCE_USERS",COMBINATION_CUSTOM_AUDIENCE_USERS:"COMBINATION_CUSTOM_AUDIENCE_USERS",REV_SHARE_CUSTOM_AUDIENCE_USERS:"REV_SHARE_CUSTOM_AUDIENCE_USERS",INTEREST_ENGAGERS:"INTEREST_ENGAGERS",MAIL_CHIMP_EMAIL_HASHES:"MAIL_CHIMP_EMAIL_HASHES",CONSTANT_CONTACTS_EMAIL_HASHES:"CONSTANT_CONTACTS_EMAIL_HASHES",COPY_PASTE_EMAIL_HASHES:"COPY_PASTE_EMAIL_HASHES",USER_PROPERTIES:"USER_PROPERTIES",CONTACT_IMPORTER:"CONTACT_IMPORTER"};},null);
__d("CustomAudienceDataSourceSubTypeInt",[],function(a,b,c,d,e,f){e.exports={ANYTHING:0,NOTHING:-1,HASHES:1001,USER_IDS:1002,HASHES_OR_USER_IDS:1003,MOBILE_ADVERTISER_IDS:1004,EXTERNAL_IDS:1005,MULTI_HASHES:1006,WEB_PIXEL_HITS:2001,MOBILE_APP_EVENTS:2002,MOBILE_APP_COMBINATION_EVENTS:2003,VIDEO_EVENTS:2004,WEB_PIXEL_COMBINATION_EVENTS:2005,CUSTOM_AUDIENCE_USERS:3001,PAGE_FANS:3002,CONVERSION_PIXEL_HITS:3003,APP_USERS:3004,S_EXPR:3005,DYNAMIC_RULE:3006,CAMPAIGN_CONVERSIONS:3007,WEB_PIXEL_HITS_CUSTOM_AUDIENCE_USERS:3008,MOBILE_APP_CUSTOM_AUDIENCE_USERS:3009,COMBINATION_CUSTOM_AUDIENCE_USERS:3010,REV_SHARE_CUSTOM_AUDIENCE_USERS:3011,INTEREST_ENGAGERS:3012,MAIL_CHIMP_EMAIL_HASHES:4001,CONSTANT_CONTACTS_EMAIL_HASHES:4002,COPY_PASTE_EMAIL_HASHES:5001,USER_PROPERTIES:6001,CONTACT_IMPORTER:7001};},null);
__d("CustomAudienceDataSourceType",[],function(a,b,c,d,e,f){e.exports={UNKNOWN:"UNKNOWN",FILE_IMPORTED:"FILE_IMPORTED",EVENT_BASED:"EVENT_BASED",SEED_BASED:"SEED_BASED",THIRD_PARTY_IMPORTED:"THIRD_PARTY_IMPORTED",COPY_PASTE:"COPY_PASTE",CLAIM_BASED:"CLAIM_BASED",CONTACT_IMPORTER:"CONTACT_IMPORTER"};},null);
__d("CustomAudienceOperationStatus",[],function(a,b,c,d,e,f){e.exports={NO_STATUS:0,NORMAL:200,UPDATING:300,WARNING:400,LOW_MATCH_RATE:411,HIGH_INVALID_RATE:412,LOW_UID_VALID_RATE:413,PIXEL_UNVERIFIED:421,PIXEL_NOT_FIRING:422,LEGACY_PIXEL:423,REFRESH_FAIL_SOURCE_DELETED:431,BUILD_FAIL_SOURCE_DELETED:432,BUILD_FAIL_UNKNOWN:433,BUILD_RETRYING:434,ERROR:500};},null);
__d("CustomAudienceSharingCapabilities",[],function(a,b,c,d,e,f){e.exports={USE_FOR_ADS:"USE_FOR_ADS",USE_FOR_INSIGHTS:"USE_FOR_INSIGHTS"};},null);
__d("WebsiteCustomAudienceTrafficType",[],function(a,b,c,d,e,f){e.exports={ALL_WEBSITE_VISITORS:1,SPECIFIC_PAGE_VISITORS:2,SPECIFIC_PAGE_VISITORS_WITH_EXCLUSION:3,CHURNED_VISITORS:4,CUSTOM:5};},null);
__d("AudienceDetailsConsts",[],function(a,b,c,d,e,f){var g={HISTORY:'history',ADS:'ads',ACCOUNTS:'accounts',INSIGHTS:'insights'},h={TAB:g,HEADER_HEIGHT:106,LEFT_SECTION_MIN_WIDTH:500,TOOLBAR_HEIGHT:42,RIGHT_SECTION_WIDTH:300};e.exports=h;},null);
__d("AdsAMActionTypes",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({ACCOUNT_INIT:null,AUDIENCE_CHANGE:null,AUDIENCE_INIT:null,AUDIENCE_ADD:null,AUDIENCE_BULK_ADD:null,AUDIENCE_DELETE:null,AUDIENCE_BULK_DELETE:null,AUDIENCE_SORT:null,AUDIENCE_APPEND:null,AUDIENCE_SAVE_TO_CA_BUFFER:null,AUDIENCE_SAVE_TO_STS_BUFFER:null,AUDIENCE_DETAILS_INIT_AUDIENCE:null,AUDIENCE_DETAILS_GET_AUDIENCE_LOOKALIKE_NAMES:null,AUDIENCE_DETAILS_LOAD_AUDIENCE_LOOKALIKE_NAMES:null,AUDIENCE_DETAILS_UPDATE_STATUS:null,AUDIENCE_DETAILS_UPDATE_USAGE:null,AUDIENCE_DETAILS_UPDATE_ACCOUNTS:null,AUDIENCE_DETAILS_UPDATE_PIXEL:null,ERROR:null,VIEW_CLEAR_ERRORS:null,VIEW_SHOW_CREATE_CA_DIALOG:null,VIEW_CLOSE_CREATE_CA_DIALOG:null,VIEW_SHOW_DELETE_AUDIENCE_DIALOG:null,VIEW_CLOSE_DELETE_AUDIENCE_DIALOG:null,VIEW_SHOW_PIXEL_DIALOG:null,VIEW_CLOSE_PIXEL_DIALOG:null,VIEW_SHOW_REGULAR_EDIT_DIALOG:null,VIEW_CLOSE_REGULAR_EDIT_DIALOG:null,VIEW_SHOW_WCA_DIALOG:null,VIEW_CLOSE_WCA_DIALOG:null,VIEW_SHOW_MACA_DIALOG:null,VIEW_CLOSE_MACA_DIALOG:null,VIEW_SHOW_SHARE_AUDIENCE_DIALOG:null,VIEW_CLOSE_SHARE_AUDIENCE_DIALOG:null,VIEW_SHOW_LOOKALIKE_DIALOG:null,VIEW_CLOSE_LOOKALIKE_DIALOG:null,VIEW_SHOW_SAVED_TARGET_SPEC_DIALOG:null,VIEW_CLOSE_SAVED_TARGET_SPEC_DIALOG:null,VIEW_SHOW_BULK_DELETE_DIALOG:null,VIEW_CLOSE_BULK_DELETE_DIALOG:null,VIEW_SHOW_OPT_OUT_DIALOG:null,VIEW_CLOSE_OPT_OUT_DIALOG:null,VIEW_INIT_DETAILS_TAB:null,VIEW_DETAILS_TAB_CHANGE:null,VIEW_CUSTOM_AUDIENCE_CURSOR_CHANGE:null,VIEW_SAVED_TARGET_SPEC_CURSOR_CHANGE:null,VIEW_COLUMN_DISPLAY_CHANGE:null,VIEW_INIT_COLUMN_DISPLAY:null,VIEW_SHOW_FILTER_PANE:null,VIEW_HIDE_FILTER_PANE:null,VIEW_UPDATE_FILTER_SET:null,VIEW_UPDATE_FILTERING_STATE:null,VIEW_UPDATE_LOADING_MORE_AUDIENCES:null,VIEW_UPDATE_SAVE_STATE_FOR_EDIT:null,VIEW_UPDATE_WCA_FORM_STATE:null,VIEW_UPDATE_STS_FORM_STATE:null,CREATE_AUDIENCE_RESET:null,CREATE_AUDIENCE_SET_VIEW_STAGE:null,CREATE_AUDIENCE_SET_VIEW_DIALOG_TYPE:null,CREATE_AUDIENCE_SHOW_MACA_DIALOG:null,UPDATE_AUDIENCE_ERROR:null,UPDATE_NAME_DESCRIPTION_COMPLETE:null,FILE_IMPORT_CHECK_FILE:null,FILE_IMPORT_START_UPLOAD:null,FILE_IMPORT_CREATE_AUDIENCE_COMPLETE:null,FILE_IMPORT_UPLOAD_COMPLETE:null,FILE_IMPORT_UPLOAD_PROGRESS:null,FILE_IMPORT_ERROR:null,COPY_PASTE_START_UPLOAD:null,COPY_PASTE_UPLOAD_PROGRESS:null,COPY_PASTE_CREATE_AUDIENCE_COMPLETE:null,COPY_PASTE_UPLOAD_COMPLETE:null,COPY_PASTE_ERROR:null,MAIL_CHIMP_FETCH_COMPLETE:null,MAIL_CHIMP_START_UPLOAD:null,MAIL_CHIMP_UPLOAD_PROGRESS:null,MAIL_CHIMP_UPLOAD_COMPLETE:null,MAIL_CHIMP_ERROR:null});e.exports=h;},null);
__d("AdsAMConstants",[],function(a,b,c,d,e,f){var g={INITIALIZATION:'initialization',SERVER_RESPONSE:'server-response',VIEW_ACTION:'view-action'},h={THIRD_PARTY:'third_party',DATA_FILE:'file'};e.exports={PayloadSource:g,CREATION_STRATEGY:h,FILE_UPLOAD_CONCURRENCY:4};},null);
__d("AdsAMDispatcher",["AdsAMActionTypes","AdsAMConstants","Dispatcher","copyProperties","invariant"],function(a,b,c,d,e,f,g,h,i,j,k){function l(n){return function(o){this.dispatch({payloadsource:n,action:o});};}var m=j(new i(),{handleInitialization:l(h.PayloadSource.INITIALIZATION),handleUpdateFromServerResponse:l(h.PayloadSource.SERVER_RESPONSE),handleUpdateFromViewAction:l(h.PayloadSource.VIEW_ACTION)});e.exports=m;},null);
__d("AdsAMAudienceActions",["AdsAMDispatcher","AdsAMActionTypes"],function(a,b,c,d,e,f,g,h){var i={initializeAccount:function(j){g.handleInitialization({actionType:h.ACCOUNT_INIT,account:j});},initializeAudiences:function(j,k){g.handleInitialization({actionType:h.AUDIENCE_INIT,audiences:j,paging:k});},initializeAudiencesFailed:function(j,k){g.handleInitialization({actionType:h.AUDIENCE_INIT_FAILED,result:j,rawData:k});},appendAudiences:function(j){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_APPEND,audiences:j});},addAudience:function(j){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_ADD,audience:j});},addAudiences:function(j){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_BULK_ADD,audiences:j});},deleteAudience:function(j){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_DELETE,audience:j});},deleteAudienceFailed:function(j,k){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_DELETE_FAILED,result:j,rawData:k});},deleteAudiences:function(j){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_BULK_DELETE,audiences:j});},updateAudience:function(j,k){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_CHANGE,audienceID:j,changedProperties:k});},sortAudience:function(j,k,l){g.handleUpdateFromViewAction({actionType:h.AUDIENCE_SORT,sortOrder:j,sortKey:k,compareFunction:l});},initializeAudienceDetailsContent:function(j,k){g.handleInitialization({actionType:h.AUDIENCE_DETAILS_AUDIENCE_INITIALIZE,audience:j,lookalikeNames:k});},updateAudienceStatuses:function(j,k){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_DETAILS_UPDATE_STATUS,audienceID:j,audienceStatuses:k});},updateUsageHistory:function(j,k){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_DETAILS_UPDATE_USAGE,audienceID:j,audienceUsageHistory:k});},updateAccountIDs:function(j,k){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_DETAILS_UPDATE_ACCOUNTS,audienceID:j,accountIDs:k});},updatePixel:function(j,k){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_DETAILS_UPDATE_PIXEL,audienceID:j,pixel:k});},error:function(j,k,l){g.handleInitialization({actionType:h.ERROR,result:j,rawData:k,error:l});},clearErrors:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLEAR_ERRORS});},saveCustomAudiencesToBuffer:function(j){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_SAVE_TO_CA_BUFFER,audiences:j});},saveSavedTargetSpecsToBuffer:function(j){g.handleUpdateFromServerResponse({actionType:h.AUDIENCE_SAVE_TO_STS_BUFFER,audiences:j});}};e.exports=i;},null);
__d("AudienceDaoManager",["AdsAMConnectConfig","CurrentLocale","AdsDaoGraph","WebApiApplication"],function(a,b,c,d,e,f,g,h,i,j){var k={},l={initializeAPI:function(){j.init(g.access_token,g.client_id);},getPrimedDao:function(m){if(!k[m])k[m]=i.primedForAccount(m).primedForLocale(h.get());return k[m];},getDao:function(){return i;}};e.exports=l;},null);
__d("AudienceManagerRequestBatch",["AdsFBBatch_DEPRECATED"],function(a,b,c,d,e,f,g){var h={execute:function(i,j,k){var l=new g(),m=[],n=false;i.forEach(function(o){l.add(o.getMethod(),o.getEndpoint(),o.getParameters(),function(p,q){if(p.error)n=true;m.push(p);q();});});l.run(function(o){if(!n){j(m);}else if(k)k(m);});}};e.exports=h;},null);
__d("AudienceManagerAPIRequest",[],function(a,b,c,d,e,f){function g(h,i){"use strict";this.$AudienceManagerAPIRequest0=h;this.$AudienceManagerAPIRequest1=i;}g.prototype.getMethod=function(){"use strict";return this.$AudienceManagerAPIRequest0;};g.prototype.getParameters=function(){"use strict";return this.$AudienceManagerAPIRequest1;};g.prototype.isParamsValid=function(){"use strict";return true;};g.prototype.getEndpoint=function(){"use strict";return null;};e.exports=g;},null);
__d("AudienceManagerUpdateRequest",["AudienceManagerAPIRequest"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k){"use strict";g.call(this,'POST',k);this.$AudienceManagerUpdateRequest0=k.id;}j.prototype.getEndpoint=function(){"use strict";return '/'+this.$AudienceManagerUpdateRequest0;};j.prototype.isParamsValid=function(){"use strict";return this.$AudienceManagerUpdateRequest0;};e.exports=j;},null);
/**
 * @providesModule sha256
 * @preserve-header
 *
 * Copyright (c) 2003, Christoph Bichlmeier
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 * 3. Neither the name of the copyright holder nor the names of contributors
 *    may be used to endorse or promote products derived from this software
 *    without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ''AS IS'' AND ANY EXPRESS
 * OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHORS OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
 * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */__d("sha256",["str2rstr"],function(a,b,c,d,e,f,g){function h(fa,ga){return ((ga>>>fa)|(ga<<(32-fa)));}function i(fa,ga,ha){return ((fa&ga)^(~fa&ha));}function j(fa,ga,ha){return ((fa&ga)^(fa&ha)^(ga&ha));}function k(fa){return (h(2,fa)^h(13,fa)^h(22,fa));}function l(fa){return (h(6,fa)^h(11,fa)^h(25,fa));}function m(fa){return (h(7,fa)^h(18,fa)^(fa>>>3));}function n(fa){return (h(17,fa)^h(19,fa)^(fa>>>10));}function o(fa,ga){return (fa[ga&15]+=n(fa[(ga+14)&15])+fa[(ga+9)&15]+m(fa[(ga+1)&15]));}var p=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),q=new Array(8),r=new Array(2),s=new Array(64),t=new Array(16),u="0123456789abcdef";function v(fa,ga){var ha=(fa&65535)+(ga&65535),ia=(fa>>16)+(ga>>16)+(ha>>16);return (ia<<16)|(ha&65535);}function w(){r[0]=r[1]=0;q[0]=1779033703;q[1]=3144134277;q[2]=1013904242;q[3]=2773480762;q[4]=1359893119;q[5]=2600822924;q[6]=528734635;q[7]=1541459225;}function x(){var fa,ga,ha,ia,ja,ka,la,ma,na,oa;fa=q[0];ga=q[1];ha=q[2];ia=q[3];ja=q[4];ka=q[5];la=q[6];ma=q[7];for(var pa=0;pa<16;pa++)t[pa]=((s[(pa<<2)+3])|(s[(pa<<2)+2]<<8)|(s[(pa<<2)+1]<<16)|(s[pa<<2]<<24));for(var qa=0;qa<64;qa++){na=ma+l(ja)+i(ja,ka,la)+p[qa];if(qa<16){na+=t[qa];}else na+=o(t,qa);oa=k(fa)+j(fa,ga,ha);ma=la;la=ka;ka=ja;ja=v(ia,na);ia=ha;ha=ga;ga=fa;fa=v(na,oa);}q[0]+=fa;q[1]+=ga;q[2]+=ha;q[3]+=ia;q[4]+=ja;q[5]+=ka;q[6]+=la;q[7]+=ma;}function y(fa,ga){var ha,ia,ja=0;ia=((r[0]>>3)&63);var ka=(ga&63);if((r[0]+=(ga<<3))<(ga<<3))r[1]++;r[1]+=(ga>>29);for(ha=0;ha+63<ga;ha+=64){for(var la=ia;la<64;la++)s[la]=fa.charCodeAt(ja++);x();ia=0;}for(var la=0;la<ka;la++)s[la]=fa.charCodeAt(ja++);}function z(){var fa=((r[0]>>3)&63);s[fa++]=128;if(fa<=56){for(var ga=fa;ga<56;ga++)s[ga]=0;}else{for(var ga=fa;ga<64;ga++)s[ga]=0;x();for(var ga=0;ga<56;ga++)s[ga]=0;}s[56]=(r[1]>>>24)&255;s[57]=(r[1]>>>16)&255;s[58]=(r[1]>>>8)&255;s[59]=r[1]&255;s[60]=(r[0]>>>24)&255;s[61]=(r[0]>>>16)&255;s[62]=(r[0]>>>8)&255;s[63]=r[0]&255;x();}function aa(){var fa=0,ga=new Array(32);for(var ha=0;ha<8;ha++){ga[fa++]=((q[ha]>>>24)&255);ga[fa++]=((q[ha]>>>16)&255);ga[fa++]=((q[ha]>>>8)&255);ga[fa++]=(q[ha]&255);}return ga;}function ba(){var fa=new String();for(var ga=0;ga<8;ga++)for(var ha=28;ha>=0;ha-=4)fa+=u.charAt((q[ga]>>>ha)&15);return fa;}function ca(fa){var ga=0;for(var ha=0;ha<8;ha++)for(var ia=28;ia>=0;ia-=4)fa[ga++]=u.charCodeAt((q[ha]>>>ia)&15);}function da(fa,ga){w();y(fa,fa.length);z();if(ga){ca(ga);}else return ba();}function ea(fa,ga,ha){if(fa===null||fa===(void 0))return null;ga=(typeof ga=='undefined')?true:ga;if(ga)fa=g(fa);return da(fa,ha);}e.exports=ea;},null);
__d("ads-crypto-email-hash",["sha256"],function(a,b,c,d,e,f,g){var h='sha256',i={getHashType:function(){return h;},hashEmail:function(j,k){return g(j,true,k);}};e.exports=i;},null);
__d("isInternationalPhoneNumber",[],function(a,b,c,d,e,f){var g=/^1\(?\d{3}\)?\d{7}$/,h=/^47\d{8}$/,i=/^\d{1,4}\(?\d{2,3}\)?\d{4,}$/;function j(k){k=k.replace(/[\-\s]+/g,'').replace(/^\+?0{0,2}/,'');if(k.startsWith('0'))return false;if(k.startsWith('1'))return g.test(k);if(k.startsWith('47'))return h.test(k);return i.test(k);}e.exports=j;},null);
__d("AudienceTokenProcessor",["ads-crypto-email-hash","isEmail","isInternationalPhoneNumber","ads-cluster-constants","CustomAudienceHashIdSchemaTypesJS","CustomAudienceSimpleIdSchemaTypesJS"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=/^\d+$/,n=/^[0-9a-f]{32}$/,o=/^[0-9a-f]{64}$/,p=/^0*/,q=/[\-@#<>'",; ]|\(|\)|\+|[a-z]/gi,r=/[0-9a-z_\-]+/i;function s(t){"use strict";this.$AudienceTokenProcessor0=t;}s.prototype.processToken=function(t,u){"use strict";if(!t)return false;if(!this.$AudienceTokenProcessor0)this.$AudienceTokenProcessor0=this.$AudienceTokenProcessor1(t);switch(this.$AudienceTokenProcessor0){case j.UPLOAD_TYPE_PHONE:return this.$AudienceTokenProcessor2(t,u);case j.UPLOAD_TYPE_EMAIL:return this.$AudienceTokenProcessor3(t,u);case j.UPLOAD_TYPE_UID:return this.$AudienceTokenProcessor4(t,u);case j.UPLOAD_TYPE_PARTNER_TOKEN:return this.$AudienceTokenProcessor5(t,u);case j.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:case j.UPLOAD_TYPE_MOBILE_ADVERTISER_ID:this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.getPayloadSchema=function(){"use strict";switch(this.$AudienceTokenProcessor0){case j.UPLOAD_TYPE_PHONE:return this.$AudienceTokenProcessor7==='md5'?k.PHONE_MD5:k.PHONE_SHA256;case j.UPLOAD_TYPE_EMAIL:return this.$AudienceTokenProcessor7==='md5'?k.EMAIL_MD5:k.EMAIL_SHA256;case j.UPLOAD_TYPE_UID:return l.UID;case j.UPLOAD_TYPE_PARTNER_TOKEN:return l.TOKEN;case j.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:return l.THIRD_PARTY_TOKEN;case j.UPLOAD_TYPE_MOBILE_ADVERTISER_ID:return l.MOBILE_ADVERTISER_ID;}};s.prototype.isHash=function(){"use strict";return !!this.$AudienceTokenProcessor7;};s.prototype.$AudienceTokenProcessor6=function(t,u,v,w){"use strict";if(u.getUserCount()>0)u.appendString(',');u.appendString('"');u.appendUserToken(t,v,w);u.appendString('"');};s.prototype.$AudienceTokenProcessor2=function(t,u){"use strict";if(i(t)){t=t.replace(q,'').replace(p,'');this.$AudienceTokenProcessor6(t,u,g.hashEmail,64);return true;}else if(o.test(t)){this.$AudienceTokenProcessor8('sha256');this.$AudienceTokenProcessor6(t,u);return true;}else if(n.test(t)){this.$AudienceTokenProcessor8('md5');this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor4=function(t,u){"use strict";if(m.test(t)){this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor5=function(t,u){"use strict";if(r.test(t)){this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor3=function(t,u){"use strict";t=t.toLowerCase();if(h(t)){this.$AudienceTokenProcessor6(t,u,g.hashEmail,64);return true;}else if(o.test(t)){this.$AudienceTokenProcessor8('sha256');this.$AudienceTokenProcessor6(t,u);return true;}else if(n.test(t)){this.$AudienceTokenProcessor8('md5');this.$AudienceTokenProcessor6(t,u);return true;}return false;};s.prototype.$AudienceTokenProcessor8=function(t){"use strict";if(this.$AudienceTokenProcessor7)return;this.$AudienceTokenProcessor7=t;};s.prototype.$AudienceTokenProcessor1=function(t){"use strict";if(h(t))return j.UPLOAD_TYPE_EMAIL;if(r.test(t))return j.UPLOAD_TYPE_PARTNER_TOKEN;return j.UPLOAD_TYPE_EMAIL;};s.prototype.getType=function(){"use strict";return this.$AudienceTokenProcessor0;};e.exports=s;},null);
__d("CustomAudienceBigPostPool",["ads-lib-connect_DEPRECATED","invariant","ads-cluster-constants","UserAgent_DEPRECATED","UrlMap","URI","WebApiApplication"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=g.FB,o=j.chrome()>22,p=3;function q(s){"use strict";this.$CustomAudienceBigPostPool0=s;this.$CustomAudienceBigPostPool1=0;this.$CustomAudienceBigPostPool2=[];}q.prototype.acquireBigPost=function(){"use strict";h(this.$CustomAudienceBigPostPool1<this.$CustomAudienceBigPostPool0);this.$CustomAudienceBigPostPool1++;if(this.$CustomAudienceBigPostPool2.length===0){return new r(this.releaseBigPost.bind(this));}else return this.$CustomAudienceBigPostPool2.shift();};q.prototype.releaseBigPost=function(s){"use strict";var t=false;for(var u=0;u<this.$CustomAudienceBigPostPool2.length;u++)if(this.$CustomAudienceBigPostPool2[u]===s)t=true;h(!t);this.$CustomAudienceBigPostPool2.push(s);this.$CustomAudienceBigPostPool1--;};function r(s){"use strict";if(o)this.$CustomAudienceBigPost0=new Uint8Array(i.CLUSTER_API_MAX_SIZE*500);this.$CustomAudienceBigPost1();this.releaseCallback=s;}r.prototype.$CustomAudienceBigPost1=function(){"use strict";if(o){this.$CustomAudienceBigPost2=0;this.$CustomAudienceBigPost3=0;this.appendString('payload');this.appendRawString('=');}else this.$CustomAudienceBigPost4='';this.$CustomAudienceBigPost5=0;this.appendString('{"data":[');};r.prototype.appendString=function(s){"use strict";if(o)s=encodeURIComponent(s);this.appendRawString(s);};r.prototype.appendRawString=function(s){"use strict";if(o){for(var t=0;t<s.length;t++)this.$CustomAudienceBigPost0[this.$CustomAudienceBigPost2++]=s.charCodeAt(t);}else this.$CustomAudienceBigPost4+=s;};r.prototype.appendUserToken=function(s,t,u){"use strict";if(t){if(o){var v=new Uint8Array(this.$CustomAudienceBigPost0.buffer,this.$CustomAudienceBigPost2,u);t(s,v);this.$CustomAudienceBigPost2+=u;}else this.$CustomAudienceBigPost4+=t(s);}else this.appendString(s);this.$CustomAudienceBigPost5++;};r.prototype.appendAppIDs=function(s){"use strict";this.appendString('], "app_ids": [');this.appendString(s.join());};r.prototype.appendPayloadSchema=function(s){"use strict";this.appendString('], "schema":"');this.appendString(s);this.appendString('"}');};r.prototype.request=function(s,t,u,v){"use strict";if(o){this.$CustomAudienceBigPost6(s,t,u,v);}else{u.payload=this.$CustomAudienceBigPost4;n.api(s,t,u,v);}};r.prototype.$CustomAudienceBigPost6=function(s,t,u,v){"use strict";if(this.$CustomAudienceBigPost3===0){if(!u.access_token)u.access_token=m.getAccessToken();u.suppress_http_code=1;t=(t||'get').toLowerCase();u.method=t;t=t==='get'?'get':'post';for(var w in u){this.appendRawString('&');this.appendString(w);this.appendRawString('=');this.appendString(u[w]);}}var x=new l(s),y=k.resolve('graph')+x.getPath(),z=new XMLHttpRequest();z.open(t,y,true);z.setRequestHeader('Content-type','application/x-www-form-urlencoded');z.onload=function(){var aa=JSON.parse(z.responseText);if(!aa||aa.error)if(this.$CustomAudienceBigPost7(s,t,u,v))return;this.$CustomAudienceBigPost8();v(aa);}.bind(this);z.onerror=function(){if(!this.$CustomAudienceBigPost7(s,t,u,v)){this.$CustomAudienceBigPost8();v(JSON.parse(z.responseText));}}.bind(this);z.send(new Uint8Array(this.$CustomAudienceBigPost0.buffer,0,this.$CustomAudienceBigPost2));};r.prototype.$CustomAudienceBigPost7=function(s,t,u,v){"use strict";if(this.$CustomAudienceBigPost3<p){this.$CustomAudienceBigPost3++;this.$CustomAudienceBigPost6(s,t,u,v);return true;}else return false;};r.prototype.$CustomAudienceBigPost8=function(){"use strict";this.$CustomAudienceBigPost1();this.releaseCallback(this);};r.prototype.getUserCount=function(){"use strict";return this.$CustomAudienceBigPost5;};e.exports=q;},null);
__d("CAUploadSessionStatus",["copyProperties","invariant","CustomAudienceSessionTypesJS"],function(a,b,c,d,e,f,g,h,i){function j(l){"use strict";this.seq=l;this.size=0;this.last=false;this.status=j.INIT;this.startTime=0;this.latency=0;}j.prototype.start=function(){"use strict";this.startTime=Date.now();this.status=j.REQUESTED;};j.prototype.end=function(l){"use strict";this.latency=Date.now()-this.startTime;if(l){this.error=l;this.status=j.FAILED;}else this.status=j.SUCCEEDED;};j.prototype.toObject=function(){"use strict";var l={seq:this.seq,size:this.size,status:this.status,start_time:Math.round(this.startTime/1000),latency:this.latency};if(this.error)l.error=this.error;if(this.last)l.last=this.last;return l;};g(j,{INIT:'INIT',REQUESTED:'REQUESTED',FAILED:'FAILED',SUCCEEDED:'SUCCEEDED'});function k(){"use strict";this.name='ClusterUploadSession';this.clear();}k.prototype.clear=function(){"use strict";this.$CAUploadSessionStatus0=Math.ceil(Math.random()*16777216);this.$CAUploadSessionStatus1=0;this.$CAUploadSessionStatus2=0;this.$CAUploadSessionStatus3=0;this.$CAUploadSessionStatus4=0;this.$CAUploadSessionStatus5=0;this.$CAUploadSessionStatus6=0;this.$CAUploadSessionStatus7={};this.$CAUploadSessionStatus8=null;};k.prototype.isSessionCompleted=function(){"use strict";if(!this.isLastBatch())return false;for(var l in this.$CAUploadSessionStatus7){var m=this.$CAUploadSessionStatus7[l];if(m.status!=j.FAILED&&m.status!=j.SUCCEEDED)return false;}return true;};k.prototype.start=function(){"use strict";this.$CAUploadSessionStatus1=Date.now();};k.prototype.end=function(){"use strict";this.$CAUploadSessionStatus2=Date.now()-this.$CAUploadSessionStatus1;};k.prototype.startBatch=function(l,m){"use strict";this.$CAUploadSessionStatus4+=m;var n=this.$CAUploadSessionStatus9(l);n.size=m;n.start();};k.prototype.setBatchResult=function(l,m){"use strict";var n=this.$CAUploadSessionStatus9(l),o=m&&!m.error;if(o){this.$CAUploadSessionStatus5+=n.size;n.end();}else{this.$CAUploadSessionStatus6+=n.size;n.end(m?m.error:'no response');}};k.prototype.getNumUploadAttempted=function(){"use strict";return this.$CAUploadSessionStatus4;};k.prototype.getNumUploadSucceeded=function(){"use strict";return this.$CAUploadSessionStatus5;};k.prototype.getNumUploadFailed=function(){"use strict";return this.$CAUploadSessionStatus6;};k.prototype.getSessionID=function(){"use strict";return this.$CAUploadSessionStatus0;};k.prototype.getTotalBatchID=function(){"use strict";return this.$CAUploadSessionStatus3;};k.prototype.getCurrentBatchID=function(){"use strict";return this.$CAUploadSessionStatus3;};k.prototype.createNewBatch=function(){"use strict";++this.$CAUploadSessionStatus3;this.$CAUploadSessionStatus7[this.$CAUploadSessionStatus3]=new j(this.$CAUploadSessionStatus3);return this;};k.prototype.markLastBatch=function(){"use strict";this.$CAUploadSessionStatus9(this.$CAUploadSessionStatus3).last=true;return this;};k.prototype.noBatchCreated=function(){"use strict";return (this.$CAUploadSessionStatus3===0);};k.prototype.isFirstBatch=function(){"use strict";return (this.$CAUploadSessionStatus3===1);};k.prototype.isLastBatch=function(){"use strict";if(this.$CAUploadSessionStatus3===0)return false;return this.$CAUploadSessionStatus9(this.$CAUploadSessionStatus3).last;};k.prototype.getAPISpecForCurrentBatch=function(){"use strict";return {session_type:i.ACTION_BASED_SESSION,session_id:this.getSessionID(),batch_seq:this.getCurrentBatchID(),last_batch_flag:this.isLastBatch()};};k.prototype.setSessionException=function(l){"use strict";this.$CAUploadSessionStatus8=l;};k.prototype.toObject=function(){"use strict";var l=[],m=0,n=0;for(var o in this.$CAUploadSessionStatus7){var p=this.$CAUploadSessionStatus7[o];if(p.status!==j.SUCCEEDED)l.push(p.toObject());if(p.status===j.SUCCEEDED||p.status===j.FAILED){m+=p.latency;n++;}}var q={local_session_id:this.$CAUploadSessionStatus0,num_batches:this.getTotalBatchID(),time_start_ui:Math.round(this.$CAUploadSessionStatus1/1000),time_upload_ui:Math.round(this.$CAUploadSessionStatus2/1000),num_attempted_ui:this.$CAUploadSessionStatus4,num_succeeded_ui:this.$CAUploadSessionStatus5,num_failed_ui:this.$CAUploadSessionStatus6,batches_detail:JSON.stringify(l),error_msg:this.$CAUploadSessionStatus8};if(n>0)q.avg_batch_latency=Math.round(m/n);return q;};k.prototype.$CAUploadSessionStatus9=function(l){"use strict";h(this.$CAUploadSessionStatus7.hasOwnProperty(l));return this.$CAUploadSessionStatus7[l];};e.exports=k;},null);
__d("CustomAudienceCreationErrors",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({FILE_IMPORT_NO_VALID_ENTRY:null,FILE_IMPORT_TOKEN_ERROR:null,FILE_IMPORT_ERROR_LIMIT_REACH:null,COPY_PASTE_TOKEN_ERROR:null,COPY_PASTE_REQUEST_ERROR:null,FILE_IMPORT_CSV_CONVERT_ERROR:null,FATAL_ERROR:null});e.exports=h;},null);
__d("AdsMigrationOverrides",[],function(a,b,c,d,e,f){var g={};e.exports=Object.keys(g).length?JSON.stringify(g):'';},null);
__d("BufferedTokenReader",["ArbiterMixin","copyProperties","fileSlice","invariant","mixin"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k(g);for(var m in l)if(l.hasOwnProperty(m))o[m]=l[m];var n=l===null?null:l.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=l;function o(p,q){"use strict";j(a.FileReader!==(void 0));this.$BufferedTokenReader0=p;this.$BufferedTokenReader1=new a.FileReader();this.$BufferedTokenReader1.onloadend=this.$BufferedTokenReader2.bind(this);this.$BufferedTokenReader3='';this.$BufferedTokenReader4=0;this.$BufferedTokenReader5=1;this.$BufferedTokenReader6=0;this.$BufferedTokenReader7=q;this.$BufferedTokenReader8=0;this.$BufferedTokenReader9=null;this.$BufferedTokenReadera=null;}o.prototype.nextToken=function(){"use strict";if(this.$BufferedTokenReaderb())return this.$BufferedTokenReaderc();while(this.$BufferedTokenReadera){this.$BufferedTokenReader9=this.$BufferedTokenReadera;this.$BufferedTokenReadera=null;this.$BufferedTokenReader8=0;this.readLines();if(this.$BufferedTokenReaderb())return this.$BufferedTokenReaderc();}if(!this.currentlyReading()&&!this.hasMore())if(this.$BufferedTokenReader3){this.$BufferedTokenReader4++;return this.$BufferedTokenReaderc();}else return o.EOF;this.readLines();return null;};o.prototype.hasMore=function(){"use strict";return this.$BufferedTokenReader6<this.$BufferedTokenReader0.size;};o.prototype.progress=function(){"use strict";return this.$BufferedTokenReader6/this.$BufferedTokenReader0.size;};o.prototype.getNumTokens=function(){"use strict";return this.$BufferedTokenReader4;};o.prototype.getLineNumber=function(){"use strict";return this.$BufferedTokenReader5;};o.prototype.getFileSize=function(){"use strict";return this.$BufferedTokenReader0.size;};o.prototype.readLines=function(){"use strict";if(this.currentlyReading())return;if(this.hasMore())this.$BufferedTokenReader1.readAsText(this.$BufferedTokenReaderd());};o.prototype.currentlyReading=function(){"use strict";return this.$BufferedTokenReader1.readyState===a.FileReader.LOADING;};o.prototype.$BufferedTokenReaderb=function(){"use strict";if(this.$BufferedTokenReader9&&this.$BufferedTokenReader8<this.$BufferedTokenReader9.length)while(this.$BufferedTokenReader8<this.$BufferedTokenReader9.length){var p=this.$BufferedTokenReader9.charAt(this.$BufferedTokenReader8);if(o.LINE_BREAKS[p])if(this.$BufferedTokenReader3){this.$BufferedTokenReader4++;return true;}else{this.$BufferedTokenReader5++;this.$BufferedTokenReader8++;var q=this.$BufferedTokenReader9.charAt(this.$BufferedTokenReader8);if(p!=q&&o.LINE_BREAKS[q])this.$BufferedTokenReader8++;continue;}this.$BufferedTokenReader8++;if(p==='\0')continue;if(o.TOKEN_BREAKS[p]){if(this.$BufferedTokenReader3){this.$BufferedTokenReader4++;return true;}continue;}this.$BufferedTokenReader3+=p;}return false;};o.prototype.$BufferedTokenReaderc=function(){"use strict";var p=this.$BufferedTokenReader3;this.$BufferedTokenReader3='';return p;};o.prototype.$BufferedTokenReader2=function(){"use strict";j(!this.$BufferedTokenReadera);this.$BufferedTokenReadera=this.$BufferedTokenReader1.result;this.inform(o.DATA_LOADED_EVENT);};o.prototype.$BufferedTokenReaderd=function(){"use strict";var p=this.$BufferedTokenReader6,q=Math.min(this.$BufferedTokenReader6+this.$BufferedTokenReader7,this.$BufferedTokenReader0.size);this.$BufferedTokenReader6=q;return i.call(this.$BufferedTokenReader0,p,q);};h(o,{EOF:'\0\0',DATA_LOADED_EVENT:'bufferedlinereader_data_loaded',name:'BufferedTokenReader',LINE_BREAKS:{'\r':true,'\n':true},TOKEN_BREAKS:{'<':true,'>':true,'"':true,"'":true,',':true,' ':true,'|':true,';':true,'\t':true}});e.exports=o;},null);
__d("CustomAudienceUiLogger",["AsyncRequest"],function(a,b,c,d,e,f,g){var h='/ajax/ads/manage/custom_audience/log/',i={EVENT_UI_SESSION_FINISH:'ui_session_finish',log:function(j){var k=new g(h);k.setData(j||{}).send();}};e.exports=i;},null);
__d("CustomAudienceUploader",["ads-cluster-constants","AdsMigrationOverrides","ArbiterMixin","AudienceTokenProcessor","CustomAudienceBigPostPool","BufferedTokenReader","CAUploadSessionStatus","copyProperties","fbt","invariant","CustomAudienceUiLogger","CustomAudienceSessionTypesJS","CustomAudienceHashIdSchemaTypesJS","CustomAudienceSimpleIdSchemaTypesJS","WebApiApplication","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=b('ads-cluster-constants').ERROR_THRESHOLD_RATE,x={INIT:"INIT",READING:"READING",FILE_LOADING:"FILE_LOADING",WAITING_FOR_ERROR_CHECK:"WAITING_FOR_ERROR_CHECK",WAITING_FOR_REQUEST:"WAITING_FOR_REQUEST",WAITING_REQUEST_SENT:"WAITING_REQUEST_SENT",STOPPED:"STOPPED",DONE:"DONE"},y=v(i);for(var z in y)if(y.hasOwnProperty(z))ba[z]=y[z];var aa=y===null?null:y.prototype;ba.prototype=Object.create(aa);ba.prototype.constructor=ba;ba.__superConstructor__=y;function ba(ca,da){"use strict";this.dao=ca;this.N_UPLOAD_CONCURRENCY=da;this._clusterReader=null;this._numUploaded=0;this._clusterID=0;this._removeUsers=false;this._encOption=null;this._state=x.INIT;this._uploadSession=new m();this._bigPostPool=new k(da+2);this._bigPost=this._bigPostPool.acquireBigPost();this._hashType=null;this._requestNumber=0;this._waitingRequest=null;this._currentLineInfo={lineNum:0,numValidTokens:0,firstInvalidToken:null};this._numInvalidLines=0;this._appIDs=null;}ba.prototype.createCluster=function(ca,da,ea){"use strict";this._encOption=ea.encOption;this._uploadType=ea.uploadType;this._accountId=ea.accountId;this._createCluster=true;this._appIDs=ea.appIDs;this.inform(ba.PROGRESS_CREATING_CLUSTER);this._readFile(da);this._errorLimitCallback=function(){this.dao.add.createCustomAudience.one(function(fa){this._clusterID=fa.id;this.inform(ba.CREATING_CLUSTER_FINISHED,{audienceId:this._clusterID,audienceName:ca});if(this._state!=x.STOPPED)this._continueAfterFirstBatchCheck();}.bind(this),{migrations_override:h,name:ca,accountId:ea.accountId,opt_out_link:ea.optOutLink,rev_share_policy_id:ea.revSharePolicyID,description:ea.description,partner_reference_key:ea.partnerReferenceKey,is_partner_category:!!ea.isPartnerCategory,creation_params:{type:'file',file_name:da.name},subtype:this.inferAudienceSubtype(ea),handleError:function(fa,ga){var ha={type:'FatalError',message:ga.error.message};this.inform(ba.FATAL_ERROR,ha);}.bind(this)});}.bind(this);};ba.prototype.inferAudienceSubtype=function(ca){"use strict";if(!!ca.revSharePolicyID)return 'managed';return 'custom';};ba.prototype.modifyUsers=function(ca,da,ea){"use strict";this._accountId=ea.accountId;this._uploadType=ea.uploadType;this._encOption=ea.encOption;this._removeUsers=ea.removeUsers;this._clusterID=ca;this._appIDs=ea.appIDs;this._readFile(da);this._errorLimitCallback=function(){this._continueAfterFirstBatchCheck();}.bind(this);};ba.prototype.removeUsersFromAllAudiences=function(ca,da){"use strict";this._accountId=da.accountId;this._uploadType=da.uploadType;this._encOption=da.encOption;this._optOut=true;this._readFile(ca);this._errorLimitCallback=function(){this._continueAfterFirstBatchCheck();}.bind(this);};ba.prototype.getNumErrors=function(){"use strict";return this._numInvalidLines;};ba.prototype.getNumUploaded=function(){"use strict";var ca=this._uploadSession.getNumUploadSucceeded()-(this._uploadSession.getTotalBatchID()-1);if(ca<0)ca=0;return ca;};ba.prototype.getNumFailed=function(){"use strict";return this._uploadSession.getNumUploadFailed();};ba.prototype.getNumTokens=function(){"use strict";return this._clusterReader.getNumTokens();};ba.prototype.getNumLines=function(){"use strict";return this._clusterReader.getLineNumber();};ba.prototype.getProgress=function(){"use strict";if(this._uploadSession.isSessionCompleted())return 100;return this._clusterReader?this._clusterReader.progress()*100:0;};ba.prototype.stop=function(){"use strict";p(this._state==x.READING||this._state==x.FILE_LOADING||this._state==x.WAITING_FOR_REQUEST||this._state==x.WAITING_FOR_ERROR_CHECK);this._state=x.STOPPED;this._uploadSession.end();this._logToServer(false);this._clusterReader=null;};ba.prototype._continueAfterFirstBatchCheck=function(){"use strict";p(this._state==x.WAITING_FOR_ERROR_CHECK);this.inform(ba.PROGRESS_START_UPLOADING);if(this._waitingRequest){this._sendWaitingRequest();}else this._endUpload();};ba.prototype._handleLine=function(){"use strict";while(true){if(this._state===x.STOPPED)break;p(this._state===x.READING);var ca=this._clusterReader.nextToken();if(ca===null){this._state=x.FILE_LOADING;break;}if(ca==l.EOF){this._mayTriggerTokenErrorEvent();this._endOfFile=true;if(this._bigPost.getUserCount()>0){this._sendRequest();}else if(this._bigPost.getUserCount()===0&&this._uploadSession.noBatchCreated()){this.inform(ba.NO_VALID_ENTRIES);return;}break;}if(this._currentLineInfo.line&&this._clusterReader.getLineNumber()>this._currentLineInfo.line)this._mayTriggerTokenErrorEvent();if(ca==='')continue;this._currentLineInfo.line=this._clusterReader.getLineNumber();var da=this._tokenProcessor.processToken(ca,this._bigPost);if(!da){if(this._currentLineInfo.firstInvalidToken===null)this._currentLineInfo.firstInvalidToken=ca;continue;}this._currentLineInfo.numValidTokens++;if(this._bigPost.getUserCount()==g.CLUSTER_API_MAX_SIZE){var ea=!this._sendRequest();this._tokenProcessor.processToken(ca,this._bigPost);if(ea)break;}}if(this._state!=x.STOPPED)this.inform(ba.PROGRESS_PARSING);if(this._state==x.WAITING_FOR_ERROR_CHECK)if(this._numInvalidLines/this._clusterReader.getLineNumber()>w){this.inform(ba.ERROR_LIMIT_REACHED,{numErrors:this._numInvalidLines,numLines:this._clusterReader.getLineNumber(),errorRate:this._numInvalidLines/this._clusterReader.getLineNumber(),continueCallback:this._errorLimitCallback});}else this._errorLimitCallback();};ba.prototype._readFile=function(ca){"use strict";this._endOfFile=false;this._tokenProcessor=new j(this._uploadType);this._clusterReader=new l(ca,10000);this._clusterReader.subscribe(l.DATA_LOADED_EVENT,this._continueReadFile.bind(this));this._uploadSession.start();this._continueReadFile();this.inform(ba.PROGRESS_START_READING);};ba.prototype._continueReadFile=function(){"use strict";if(this._state==x.INIT||this._state==x.FILE_LOADING||this._state==x.WAITING_REQUEST_SENT){this._state=x.READING;try{this._handleLine();}catch(ca){this._uploadSession.setSessionException(ca.message);this._logToServer(false);throw ca;}}};ba.prototype._onTokenError=function(ca,da){"use strict";var ea=this._tokenProcessor.getType(),fa=this._getUploadTypeString(ea);if(this._tokenProcessor.isHash()){ea=g.UPLOAD_TYPE_HASH;fa="hash";}var ga={type:ea,message:o._("line {line} contains {token}",[o.param("line",da),o.param("token",ca)]),token:ca};this._numInvalidLines++;this.inform(ba.ERROR,ga);};ba.prototype._getUploadTypeString=function(ca){"use strict";switch(ca){case g.UPLOAD_TYPE_EMAIL:return "email";case g.UPLOAD_TYPE_UID:return "UID";case g.UPLOAD_TYPE_PHONE:return "phone number";case g.UPLOAD_TYPE_PARTNER_TOKEN:return "partner token";case g.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:return "App User ID";case g.UPLOAD_TYPE_MOBILE_ADVERTISER_Id:return "Mobile Advertising ID";}return '';};ba.prototype._sendRequest=function(){"use strict";this._uploadSession.createNewBatch();if(this._endOfFile)this._uploadSession.markLastBatch();p(this._createCluster&&this._uploadSession.isFirstBatch()||this._clusterID||this._optOut);p(this.dao);p(this._state==x.READING);var ca=this._bigPost;this._bigPost=this._bigPostPool.acquireBigPost();var da=ca.getUserCount();p(this._endOfFile&&da>0||da==g.CLUSTER_API_MAX_SIZE);var ea=this._makeUploadingAPIParams(ca);if(this._uploadSession.isFirstBatch()||this._requestNumber>=this.N_UPLOAD_CONCURRENCY){this._waitingRequest=function(){this._callUploadingAPI(ca,ea);}.bind(this);this._state=this._uploadSession.isFirstBatch()?x.WAITING_FOR_ERROR_CHECK:x.WAITING_FOR_REQUEST;return false;}this._callUploadingAPI(ca,ea);return true;};ba.prototype._requestCallback=function(ca){"use strict";return (function(da){this._uploadSession.setBatchResult(ca,da);this.inform(ba.PROGRESS_UPLOADING);if(!da||da.error){var ea="Unknown error";if(da&&da.error)ea=da.error.message;var fa={type:'UploadRequest',message:ea};this.inform(ba.ERROR,fa);}this._requestNumber--;if(this._uploadSession.isSessionCompleted()){this._endUpload();return;}if(this._state==x.WAITING_FOR_REQUEST)this._sendWaitingRequest();}).bind(this);};ba.prototype._sendWaitingRequest=function(){"use strict";p(this._state==x.WAITING_FOR_REQUEST||this._state==x.WAITING_FOR_ERROR_CHECK);var ca=this._waitingRequest;this._waitingRequest=null;ca();this._state=x.WAITING_REQUEST_SENT;this._continueReadFile();};ba.prototype._makeUploadingAPIParams=function(ca){"use strict";if(this._appIDs)ca.appendAppIDs(this._appIDs);ca.appendPayloadSchema(this._tokenProcessor.getPayloadSchema());var da=this._uploadSession.getAPISpecForCurrentBatch();da.estimated_num_total=Math.round((this._uploadSession.getNumUploadAttempted()+ca.getUserCount())/this.getProgress()*100);return da;};ba.prototype._callUploadingAPI=function(ca,da){"use strict";this._requestNumber++;this._uploadSession.startBatch(da.batch_seq,ca.getUserCount());var ea={session:JSON.stringify(da)};if(this._optOut){ca.request('/act_'+this._accountId+'/usersofanyaudience','DELETE',ea,this._requestCallback(this._uploadSession.getCurrentBatchID()));}else ca.request('/'+this._clusterID+'/upload',this._removeUsers?'DELETE':'POST',ea,this._requestCallback(this._uploadSession.getCurrentBatchID()));};ba.prototype._endUpload=function(){"use strict";this._state=x.DONE;this._uploadSession.end();this._logToServer(true);this.inform(ba.FINISHED,{audienceId:this._clusterID,sessionId:this._uploadSession.getSessionID()});};ba.prototype._mayTriggerTokenErrorEvent=function(){"use strict";if(this._currentLineInfo.line&&this._currentLineInfo.numValidTokens===0&&this._currentLineInfo.firstInvalidToken)this._onTokenError(this._currentLineInfo.firstInvalidToken,this._currentLineInfo.line);this._currentLineInfo.line=0;this._currentLineInfo.numValidTokens=0;this._currentLineInfo.firstInvalidToken=null;};ba.prototype._logToServer=function(ca){"use strict";var da=this._uploadSession.toObject();da.app_id=u.getClientID();da.audience_id=this._clusterID;if(this._accountId)da.ad_account_id=this._accountId;da.event_name=q.EVENT_UI_SESSION_FINISH;da.num_invalid_ui=this._numInvalidLines;da.num_lines_ui=this._clusterReader.getLineNumber();da.file_size=this._clusterReader.getFileSize();da.session_type=r.ACTION_BASED_SESSION;da.action_type=this._getActionType();da.payload_schema=this._getPayloadSchema();if(ca){da.upload_progress=100;}else da.upload_progress=Math.round(this.getProgress()/100*99);q.log(da);};ba.prototype._getActionType=function(){"use strict";if(this._optOut)return "OPTOUT";if(this._removeUsers)return "REMOVE_USER";return "ADD_USER";};ba.prototype._getPayloadSchema=function(){"use strict";switch(this._uploadType){case g.UPLOAD_TYPE_EMAIL:return s.EMAIL_SHA256;case g.UPLOAD_TYPE_UID:return t.UID;case g.UPLOAD_TYPE_PHONE:return s.PHONE_SHA256;case g.UPLOAD_TYPE_PLATFORM_ADVERTISER_TOKEN:return t.THIRD_PARTY_TOKEN;case g.UPLOAD_TYPE_PARTNER_TOKEN:return t.TOKEN;case g.UPLOAD_TYPE_MOBILE_ADVERTISER_ID:return t.MOBILE_ADVERTISER_ID;}};n(ba,{PROGRESS_START_READING:'progress_reading',PROGRESS_PARSING:'progress_parsing',PROGRESS_START_UPLOADING:'progress_start_uploading',PROGRESS_UPLOADING:'progress_uploading',PROGRESS_CREATING_CLUSTER:'progress_creating_cluster',NO_VALID_ENTRIES:'no_valid_entries_event',ERROR_LIMIT_REACHED:'error_limit_reached_event',ERROR:'error_event',FATAL_ERROR:'fatal_error_event',CREATING_CLUSTER_FINISHED:'creating_cluster_finished_event',FINISHED:'finished_event',STATES:x});e.exports=ba;},null);
__d("XAdsCreatorController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/ads\/create\/",{business_id:{type:"Int"},act:{type:"Int"},campaign:{type:"Int"},ad_set:{type:"Int"},campaign_id:{type:"Int"},campaign_placement:{type:"String"},oid:{type:"Int"},fbid:{type:"Int"},storyid:{type:"Int"},objective:{type:"String"},edit_ad_link:{type:"Bool",defaultValue:false},conversion_pixel_id:{type:"Int"},targeting_spec:{type:"String"},ref:{type:"String"},desturl:{type:"String"},coupon_code:{type:"String"},coupon_error:{type:"Bool",defaultValue:false}});},null);
__d("AdsAMCreateAudienceServerActions",["AdsAMActionTypes","AdsAMConstants","AdsAMDispatcher","AdsCustomAudienceThirdPartyEmailImportStrategyTypes","AudienceDaoManager","AudienceManagerRequestBatch","AudienceManagerUpdateRequest","AudienceTokenProcessor","CustomAudienceBigPostPool","BusinessURI.brands","CAUploadSessionStatus","CustomAudienceCreationErrors","CustomAudienceUploader","ads-cluster-constants","XAdsCreatorController","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=10,x={DELETE:'DELETE',POST:'POST'},y={validRecord:0,invalidRecord:0,totalRecord:0},z=null,aa={uploadSelectedFileToServer:function(na,oa,pa,qa,ra,sa){var ta=k.getPrimedDao(na);ta.add.acceptCustomAudiencesTos.one(function(){return da(qa,function(ua){return ea(na,sa,oa,pa,ua);});},{tos_id:ra});},continueUploadSelectedFileToServer:function(){if(z){z();}else i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR});},uploadCopyPasteEmailsToServer:function(na,oa,pa,qa,ra,sa){var ta=k.getPrimedDao(na);ta.add.acceptCustomAudiencesTos.one(function(){return ka(na,sa,oa,pa,qa);},{tos_id:ra});},uploadMailChimpListsToServer:function(na,oa,pa,qa){var ra=k.getPrimedDao(na);ra.add.acceptCustomAudiencesTos.one(function(){return ma(na,qa,oa);},{tos_id:pa});},updateAudienceNameDescription:function(na,oa,pa){var qa=k.getPrimedDao(na),ra={id:oa.id,handleError:function(sa,ta){i.handleUpdateFromServerResponse({actionType:g.UPDATE_AUDIENCE_ERROR,audienceID:oa.id,rawData:ta,result:sa});},name:oa.name,description:oa.description};qa.mutate.customAudience.one(function(){var sa=[];sa[oa.id]=oa;i.handleUpdateFromServerResponse({actionType:g.UPDATE_NAME_DESCRIPTION_COMPLETE,audiences:sa});pa();},ra);},batchUpdateAudienceNameDescription:function(na,oa,pa){var qa=oa.map(function(ta){var ua={id:ta.id,name:ta.name,description:ta.description};return new m(ua);}),ra=function(ta){i.handleUpdateFromServerResponse({actionType:g.MAIL_CHIMP_ERROR});},sa=function(ta){i.handleUpdateFromServerResponse({actionType:g.UPDATE_NAME_DESCRIPTION_COMPLETE,audiences:oa});pa();};l.execute(qa,sa,ra);},batchCreateAd:function(na,oa){var pa=[];Object.keys(oa).forEach(function(sa){pa.push({id:oa[sa].id,name:oa[sa].name});});var qa={custom_audiences:pa},ra=p((u.getURIBuilder()).setInt('act',na).setString('targeting_spec',JSON.stringify(qa)).getURI());window.open(ra,'_blank');},fetchContactListsFromServer:function(na,oa,pa){var qa=k.getPrimedDao(na),ra={accountId:na,third_party_data:{strategy_type:j.MAILCHIMP,access_token:oa,start_page:pa-1}};qa.fetch.contactsLists.one(function(sa){i.handleUpdateFromServerResponse({actionType:g.MAIL_CHIMP_FETCH_COMPLETE,currentPage:pa,totalPage:Math.ceil(sa.total/w),contactsLists:sa.lists});},ra);},uploadFileAddUsers:function(na,oa,pa,qa,ra){da(ra,function(sa){return fa(na,oa,pa,qa,sa);});},uploadFileRemoveUsers:function(na,oa,pa,qa,ra){da(ra,function(sa){return ga(na,oa,pa,qa,sa);});},copyPasteAddUsers:function(na,oa,pa,qa,ra){la(na,oa,pa,qa,ra,x.POST);},copyPasteRemoveUsers:function(na,oa,pa,qa,ra){la(na,oa,pa,qa,ra,x.DELETE);},removeUsersFromAllCustomAudiences:function(na,oa,pa){ha(na,oa,pa);}};function ba(){y={validRecord:0,invalidRecord:0,totalRecord:0};}function ca(na){var oa=k.getPrimedDao(na),pa=new s(oa,h.FILE_UPLOAD_CONCURRENCY),qa=[pa.subscribe(s.ERROR_LIMIT_REACHED,function(ra,sa){if(sa.numErrors<sa.numLines){i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,type:r.FILE_IMPORT_ERROR_LIMIT_REACH,errorDetails:{numErrors:sa.numErrors,numLines:sa.numLines}});z=sa.continueCallback;}}),pa.subscribe(s.PROGRESS_START_UPLOADING,function(){return i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_START_UPLOAD});}),pa.subscribe(s.PROGRESS_UPLOADING,function(){return i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_UPLOAD_PROGRESS,progress:pa.getProgress()});}),pa.subscribe(s.ERROR,function(ra,sa){return i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,type:r.FILE_IMPORT_TOKEN_ERROR,error:sa});}),pa.subscribe(s.NO_VALID_ENTRIES,function(){return i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,type:r.FILE_IMPORT_NO_VALID_ENTRY});}),pa.subscribe(s.FATAL_ERROR,function(ra,sa){return i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,type:r.FATAL_ERROR,error:sa});}),pa.subscribe(s.CREATING_CLUSTER_FINISHED,function(ra,sa){i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_CREATE_AUDIENCE_COMPLETE,audienceID:sa.audienceId,audienceName:sa.audienceName});}),pa.subscribe(s.FINISHED,function(ra,sa){y={validRecord:pa.getNumUploaded(),invalidRecord:pa.getNumFailed(),totalRecord:pa.getNumTokens()};i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_UPLOAD_COMPLETE,numberOfRecords:y});ba();qa.forEach(pa.unsubscribe,pa);})];return pa;}function da(na,oa){if(ja(na)){ia(na,function(pa){return oa(pa);});}else oa(na);}function ea(na,oa,pa,qa,ra){var sa=ca(na),ta={uploadType:pa,accountId:na};if(pa===t.UPLOAD_TYPE_UID)ta.appIDs=qa.map(function(ua){return ua.getUniqueID();});sa.createCluster(oa,ra,ta);}function fa(na,oa,pa,qa,ra){var sa=ca(na),ta={uploadType:pa,accountId:na,removeUsers:false};if(pa===t.UPLOAD_TYPE_UID)ta.appIDs=qa.map(function(ua){return ua.getUniqueID();});sa.modifyUsers(oa,ra,ta);}function ga(na,oa,pa,qa,ra){var sa=ca(na),ta={uploadType:pa,accountId:na,removeUsers:true};if(pa===t.UPLOAD_TYPE_UID)ta.appIDs=qa.map(function(ua){return ua.getUniqueID();});sa.modifyUsers(oa,ra,ta);}function ha(na,oa,pa){var qa=ca(na),ra={uploadType:oa,accountId:na};qa.removeUsersFromAllAudiences(pa,ra);}function ia(na,oa){}function ja(na){return na.name.endsWith('.xls')||na.name.endsWith('.xlsx');}function ka(na,oa,pa,qa,ra){var sa=k.getPrimedDao(na);sa.add.createCustomAudience.one(function(ta){la(na,ta.id,pa,qa,ra,x.POST);i.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_CREATE_AUDIENCE_COMPLETE,audienceID:ta.id,audienceName:oa});},{name:oa,subtype:'custom',creation_params:{type:'copy_paste'},handleError:function(ta,ua){return i.handleUpdateFromServerResponse({actionType:g.FILE_IMPORT_ERROR,type:r.FATAL_ERROR,error:ua.error});}});}function la(na,oa,pa,qa,ra,sa){var ta=new o(1),ua=ta.acquireBigPost(),va=new n(pa);ra.map(function(bb){var cb=va.processToken(bb,ua);if(!cb){var db={type:pa,token:bb};i.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_ERROR,type:r.COPY_PASTE_TOKEN_ERROR,error:db});}});var wa=new q();wa.createNewBatch();wa.markLastBatch();if(pa===t.UPLOAD_TYPE_UID){var xa=qa.map(function(bb){return bb.getUniqueID();});ua.appendAppIDs(xa);}ua.appendPayloadSchema(va.getPayloadSchema());var ya=wa.getAPISpecForCurrentBatch();ya.estimated_num_total=ua.getUserCount();var za={session:JSON.stringify(ya)},ab=function(bb){wa.setBatchResult(wa.getCurrentBatchID(),bb);i.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_UPLOAD_PROGRESS,progress:100});if(!bb||bb.error)i.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_ERROR,type:r.COPY_PASTE_REQUEST_ERROR,errorDetails:bb.error});y={validRecord:bb.num_received-bb.num_invalid_entries,invalidRecord:bb.num_invalid_entries,totalRecord:bb.num_received};wa.end();i.handleUpdateFromServerResponse({actionType:g.COPY_PASTE_UPLOAD_COMPLETE,numberOfRecords:y});ba();};ua.request('/'+oa+'/upload',sa,za,ab);}function ma(na,oa,pa){var qa=pa.length,ra=0,sa={},ta=k.getPrimedDao(na);pa.forEach(function(ua){var va={name:ua.name,third_party_data:{list_id:ua.list_id,strategy_type:j.MAILCHIMP,access_token:oa}};ta.add.audiencesImport.one(function(wa){ra++;sa[wa.id]={id:wa.id,name:ua.name};var xa=ra/qa*100;i.handleUpdateFromServerResponse({actionType:g.MAIL_CHIMP_UPLOAD_PROGRESS,progress:xa});if(ra===qa)i.handleUpdateFromServerResponse({actionType:g.MAIL_CHIMP_UPLOAD_COMPLETE,audiences:sa});},va);});}e.exports=aa;},null);
__d("AdsAMCreateAudienceViewActions",["AdsAMDispatcher","AdsAMActionTypes","AdsAMCreateAudienceServerActions"],function(a,b,c,d,e,f,g,h,i){var j={reset:function(){g.handleUpdateFromViewAction({actionType:h.CREATE_AUDIENCE_RESET});},setViewStage:function(k){g.handleUpdateFromViewAction({actionType:h.CREATE_AUDIENCE_SET_VIEW_STAGE,viewStage:k});},setViewDialogType:function(k){g.handleUpdateFromViewAction({actionType:h.CREATE_AUDIENCE_SET_VIEW_DIALOG_TYPE,viewDialogType:k});},showMobileAppDialog:function(){g.handleUpdateFromViewAction({actionType:h.CREATE_AUDIENCE_SHOW_MACA_DIALOG});},startFileImport:function(k,l,m,n,o,p){g.handleUpdateFromViewAction({actionType:h.FILE_IMPORT_CHECK_FILE});i.uploadSelectedFileToServer(k,l,m,n,o,p);},startCopyPasteUpload:function(k,l,m,n,o,p){g.handleUpdateFromViewAction({actionType:h.COPY_PASTE_START_UPLOAD});i.uploadCopyPasteEmailsToServer(k,l,m,n,o,p);},startMailChimpUpload:function(k,l,m,n){g.handleUpdateFromViewAction({actionType:h.MAIL_CHIMP_START_UPLOAD});i.uploadMailChimpListsToServer(k,l,m,n);},updateAudiencesNameDescription:function(k,l,m){if(l.length===0){m();}else if(l.length===1){i.updateAudienceNameDescription(k,l[0],m);}else i.batchUpdateAudienceNameDescription(k,l,m);},handleMailChimpLogin:function(k,l){i.fetchContactListsFromServer(k,l,1);},loadContactsList:function(k,l,m){i.fetchContactListsFromServer(k,l,m);}};e.exports=j;},null);
__d("AdsAMViewActions",["AdsAMDispatcher","AdsAMActionTypes","AudienceDetailsConsts"],function(a,b,c,d,e,f,g,h,i){var j=i.TAB,k={showCreateCustomAudienceDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_CREATE_CA_DIALOG});},closeCreateCustomAudienceDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_CREATE_CA_DIALOG});},showDeleteAudienceDialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_DELETE_AUDIENCE_DIALOG,audienceId:l});},closeDeleteAudienceDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_DELETE_AUDIENCE_DIALOG});},showPixelDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_PIXEL_DIALOG});},closePixelDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_PIXEL_DIALOG});},showRegularEditDialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_REGULAR_EDIT_DIALOG,audienceId:l});},closeRegularEditDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_REGULAR_EDIT_DIALOG});},showWCADialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_WCA_DIALOG,audienceId:l});},closeWCADialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_WCA_DIALOG});},showMACADialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_MACA_DIALOG});},closeMACADialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_MACA_DIALOG});},showShareAudienceDialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_SHARE_AUDIENCE_DIALOG,audienceId:l});},closeShareAudienceDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_SHARE_AUDIENCE_DIALOG});},showLookalikeDialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_LOOKALIKE_DIALOG,audienceId:l});},closeLookalikeDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_LOOKALIKE_DIALOG});},showSavedTargetSpecDialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_SAVED_TARGET_SPEC_DIALOG,audienceId:l});},closeSavedTargetSpecDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_SAVED_TARGET_SPEC_DIALOG});},showBulkDeleteDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_BULK_DELETE_DIALOG});},closeBulkDeleteDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_BULK_DELETE_DIALOG});},showOptOutDialog:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_OPT_OUT_DIALOG,audienceId:l});},closeOptOutDialog:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_CLOSE_OPT_OUT_DIALOG});},initializeAudienceDetailsTabContent:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_INIT_DETAILS_TAB,tab:j.HISTORY});},changeDetailsTab:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_DETAILS_TAB_CHANGE,tab:l});},updateCustomAudienceAfterCursor:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_CUSTOM_AUDIENCE_CURSOR_CHANGE,paging:l});},updateSavedTargetSpecAfterCursor:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_SAVED_TARGET_SPEC_CURSOR_CHANGE,paging:l});},initializeColumnsShown:function(l){g.handleInitialization({actionType:h.VIEW_INIT_COLUMN_DISPLAY,columnsShown:l});},updateColumnShown:function(l,m){g.handleUpdateFromViewAction({actionType:h.VIEW_COLUMN_DISPLAY_CHANGE,column:l,show:m});},showFilterPane:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_SHOW_FILTER_PANE});},hideFilterPane:function(){g.handleUpdateFromViewAction({actionType:h.VIEW_HIDE_FILTER_PANE});},updateFilterSet:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_UPDATE_FILTER_SET,filterSet:l});},updateSaveStateForEdit:function(l,m){g.handleUpdateFromViewAction({actionType:h.VIEW_UPDATE_SAVE_STATE_FOR_EDIT,saveEnable:l,editSaveCallback:m});},updateDetailsWCAFormState:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_UPDATE_WCA_FORM_STATE,formState:l});},updateDetailsSTSFormState:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_UPDATE_STS_FORM_STATE,formState:l});},updateFilteringState:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_UPDATE_FILTERING_STATE,isFiltering:l});},updateLoadingMoreAudiencesState:function(l){g.handleUpdateFromViewAction({actionType:h.VIEW_UPDATE_LOADING_MORE_AUDIENCES,isLoadingMoreAudiences:l});}};e.exports=k;},null);
__d("AdsAMFilterAPIParamConsts",[],function(a,b,c,d,e,f){var g={TYPE:'type',SOURCE:'source',AVAILABILITY:'availability',QUICK_LOOK:'quicklook'},h={TYPE_CUSTOM_AUDIENCE:'CUSTOM_AUDIENCE',TYPE_LOOKALIKE:'LOOKALIKE',TYPE_SAVED_AUDIENCE:'SAVED_AUDIENCE',QUICKLOOK_RECENTLY_USED:'recently_used',QUICKLOOK_INACTIVE_ADS:'inactive_ads',QUICKLOOK_ACTION_NEEDED:'action_needed',QUICKLOOK_SHARED:'shared'},i={VALUES:h,UI_FIELD_NAME:g};e.exports=i;},null);
__d("AudienceManagerUIConstants",["fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h){var i={NAME:{label:"Name",description:"The name of audience."},TYPE:{label:"Type",description:"The type of audience, including a Custom Audience, lookalike or people connected to your Page, event or app."},SOURCE:{label:"Source",description:"The kind of data used to create the audience, including your Page, customer contacts, website traffic or mobile app activity."},SIZE:{label:"Size",description:"The number of people Facebook has identified in the audience."},STATUS:{label:"Availability",description:"Whether the audience is available to use for advertising."},DATE_CREATED:{label:"Date Created",description:"The date and time the audience was created."},AUDIENCE_ID:{label:"Audience ID",description:"The ID number that is unique to each audience."},SHARING:{label:"Sharing",description:"The accounts you have shared an audience with or the account that shared an audience with you."}},j={};j[h.UPLOAD_TYPE_EMAIL]="Emails";j[h.UPLOAD_TYPE_UID]="User IDs";j[h.UPLOAD_TYPE_PHONE]="Phone Numbers";j[h.UPLOAD_TYPE_MOBILE_ADVERTISER_ID]="Mobile Advertiser IDs";var k="At least one location or custom audience must be selected";e.exports={CUSTOM_AUDIENCE_DATA_TYPE_LABEL:j,DEFAULT_DIALOG_WIDTH:600,DEFAULT_DIALOG_TOP_POS:80,STS_DIALOG_WIDTH:850,MAILCHIMP_WINDOW_HEIGHT:500,MAILCHIMP_WINDOW_WIDTH:600,MAX_AUDIENCES_LOAD:50,DEFAULT_ROW_HEIGHT:44,DEFAULT_HEADER_HEIGHT:32,HELP_DIALOG_LINGER_TS:250,BULK_ACTION_TYPE:{DELETE:'delete',CREATE_AD:'create_ad'},CREATE_AUDIENCE_ACTION_TYPE:{CUSTOM_AUDIENCE:'custom_audience',LOOKALIKE:'lookalike',SAVED_TARGET_SPEC:'saved_target_spec'},HELP_LINK_WIDTH:300,SORT_ORDER:{DESC:'DESC',ASC:'ASC'},ALIGN:{LEFT:'left',CENTER:'center',RIGHT:'right'},TABLE_TOP_PADDING:8,COLUMNS:i,FORM_DISPLAY_TYPE:{IN_LINE:'in_line',DIALOG:'dialog'},LAL_ORIGIN_CUSTOM_AUDIENCE:'custom_audience',AUDIENCE_TYPE:{CUSTOM_AUDIENCE:'custom_audience',SAVED_TARGET_SPEC:'saved_target_spec'},STS_FORM_INSTRUCTION:k,STS_DISPLAY_NAME:"Saved Target Group",CA_DISPLAY_NAME:"Custom Audience",LAL_DISPLAY_NAME:"Lookalike"};},null);
__d("AdsAMFilterValueConfig",["AdsAMFilterAPIParamConsts","AudienceManagerUIConstants","CustomAudienceDataSourceSubTypeInt","CustomAudienceDeliveryStatus","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){var l=function(n,o,p){return {value:n,text:o,filteringParamValues:p};},m={TYPE_CUSTOM_AUDIENCE:l('TYPE_CUSTOM_AUDIENCE',h.CA_DISPLAY_NAME,[g.VALUES.TYPE_CUSTOM_AUDIENCE]),TYPE_LOOKALIKE:l('TYPE_LOOKALIKE',h.LAL_DISPLAY_NAME,[g.VALUES.TYPE_LOOKALIKE]),TYPE_SAVED_AUDIENCE:l('TYPE_SAVED_AUDIENCE',h.STS_DISPLAY_NAME,[g.VALUES.TYPE_SAVED_AUDIENCE]),AVAILABILITY_READY:l('AVAILABILITY_READY',"Ready",[j.ACTIVE]),AVAILABILITY_NOT_READY:l('AVAILABILITY_NOT_READY',"Not Ready",[j.INACTIVE]),AVAILABILITY_ERROR:l('AVAILABILITY_ERROR',"Error",[j.INVALID,j.INVALID_FOR_SAME_FIRST_OR_LAST_NAME]),SOURCE_DATA_FILE:l('SOURCE_DATA_FILE',"Data File",[i.HASHES,i.USER_IDS,i.HASHES_OR_USER_IDS,i.MOBILE_ADVERTISER_IDS,i.EXTERNAL_IDS,i.MULTI_HASHES]),SOURCE_WEBSITE:l('SOURCE_WEBSITE',"Website",[i.WEB_PIXEL_HITS,i.WEB_PIXEL_COMBINATION_EVENTS]),SOURCE_MOBILE_APP:l('SOURCE_MOBILE_APP',"Mobile App",[i.MOBILE_APP_EVENTS,i.MOBILE_APP_COMBINATION_EVENTS]),SOURCE_SAVED_AUDIENCE:l('SOURCE_SAVED_AUDIENCE',h.STS_DISPLAY_NAME,[i.S_EXPR]),SOURCE_PAGE_AUDIENCE:l('SOURCE_PAGE_AUDIENCE',"Page Audience",[i.PAGE_FANS]),SOURCE_EVENT_AUDIENCE:l('SOURCE_EVENT_AUDIENCE',"Event Audience",[i.WEB_PIXEL_HITS,i.WEB_PIXEL_COMBINATION_EVENTS,i.MOBILE_APP_EVENTS,i.MOBILE_APP_COMBINATION_EVENTS]),SOURCE_CUSTOM_AUDIENCE:l('SOURCE_CUSTOM_AUDIENCE',"Custom Audience",[i.CUSTOM_AUDIENCE_USERS]),SOURCE_CONVERSION_PIXEL:l('SOURCE_CONVERSION_PIXEL',"Conversion Pixel",[i.CONVERSION_PIXEL_HITS]),QUICKLOOK_RECENTLY_USED:l('QUICKLOOK_RECENTLY_USED',"Recently Used",[g.VALUES.QUICKLOOK_RECENTLY_USED]),QUICKLOOK_INACTIVE_ADS:l('QUICKLOOK_INACTIVE_ADS',"In Active Ads",[g.VALUES.QUICKLOOK_INACTIVE_ADS]),QUICKLOOK_ACTION_NEEDED:l('QUICKLOOK_ACTION_NEEDED',"Action Needed",[g.VALUES.QUICKLOOK_ACTION_NEEDED]),QUICKLOOK_SHARED:l('QUICKLOOK_SHARED',"Shared",[g.VALUES.QUICKLOOK_SHARED])};e.exports=m;},null);
__d("AdsAMFilterFieldConfig",["AdsAMFilterAPIParamConsts","AdsAMFilterValueConfig","AdsGenericFilterFieldType","AdsGenericFilterField","AdsGenericFilterOperatorConfig","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=function(p){if(!h[p])return p;return h[p].text;},o={AUDIENCE_TYPE:{text:"Type",field:new j(g.UI_FIELD_NAME.TYPE,i.STRING_SET),operators:[k.IN],values:[h.TYPE_CUSTOM_AUDIENCE,h.TYPE_LOOKALIKE,h.TYPE_SAVED_AUDIENCE],iconURI:m('/images/ui/x/glyphs/dark/friends-of-friends_s.png'),valueRenderer:n},AVAILABILITY:{text:"Availability",field:new j(g.UI_FIELD_NAME.AVAILABILITY,i.STRING_SET),operators:[k.IN],values:[h.AVAILABILITY_READY,h.AVAILABILITY_ERROR,h.AVAILABILITY_NOT_READY],iconURI:m('/images/ui/x/glyphs/dark/friend-added_s.png'),valueRenderer:n},SOURCE:{text:"Source",field:new j(g.UI_FIELD_NAME.SOURCE,i.STRING_SET),operators:[k.IN],values:[h.SOURCE_DATA_FILE,h.SOURCE_WEBSITE,h.SOURCE_MOBILE_APP,h.SOURCE_SAVED_AUDIENCE,h.SOURCE_PAGE_AUDIENCE,h.SOURCE_EVENT_AUDIENCE,h.SOURCE_CUSTOM_AUDIENCE,h.SOURCE_CONVERSION_PIXEL],iconURI:m('/images/ui/x/glyphs/dark/friends-of-friends_s.png'),valueRenderer:n},QUICK_LOOK:{text:"Quick Look",field:new j(g.UI_FIELD_NAME.QUICK_LOOK,i.STRING_SET),operators:[k.IN],values:[h.QUICKLOOK_RECENTLY_USED,h.QUICKLOOK_INACTIVE_ADS,h.QUICKLOOK_ACTION_NEEDED,h.QUICKLOOK_SHARED],iconURI:m('/images/ui/x/glyphs/dark/search_s.png'),valueRenderer:n}};e.exports=o;},null);
__d("AdsAMPresetFilterConfig",["AdsAMFilterFieldConfig","AdsAMFilterValueConfig","AdsGenericFilter","AdsGenericFilterOperator","AdsGenericFilterSet","AdsGenericFilterSetUtil","AudienceManagerUIConstants","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=i,p=k,q=g,r=j.IN,s={TYPE_CUSTOM_AUDIENCE:{text:m.CA_DISPLAY_NAME,shouldCheck:l.contains,filterSet:new p([new o(q.AUDIENCE_TYPE.field,r,[h.TYPE_CUSTOM_AUDIENCE.value])])},TYPE_LOOKALIKE:{text:m.LAL_DISPLAY_NAME,shouldCheck:l.contains,filterSet:new p([new o(q.AUDIENCE_TYPE.field,r,[h.TYPE_LOOKALIKE.value])])},TYPE_SAVED_AUDIENCE:{text:m.STS_DISPLAY_NAME,shouldCheck:l.contains,filterSet:new p([new o(q.AUDIENCE_TYPE.field,r,[h.TYPE_SAVED_AUDIENCE.value])])},AVAILABILITY_READY:{text:"Ready",shouldCheck:l.contains,filterSet:new p([new o(q.AVAILABILITY.field,r,[h.AVAILABILITY_READY.value])])},AVAILABILITY_NOT_READY:{text:"Not Ready",shouldCheck:l.contains,filterSet:new p([new o(q.AVAILABILITY.field,r,[h.AVAILABILITY_NOT_READY.value])])},AVAILABILITY_ERROR:{text:"Error",shouldCheck:l.contains,filterSet:new p([new o(q.AVAILABILITY.field,r,[h.AVAILABILITY_ERROR.value])])},SOURCE_DATA_FILE:{text:"Data File",shouldCheck:l.contains,filterSet:new p([new o(q.SOURCE.field,r,[h.SOURCE_DATA_FILE.value])])},SOURCE_WEBSITE:{text:"Website",shouldCheck:l.contains,filterSet:new p([new o(q.SOURCE.field,r,[h.SOURCE_WEBSITE.value])])},SOURCE_MOBILE_APP:{text:"Mobile App",shouldCheck:l.contains,filterSet:new p([new o(q.SOURCE.field,r,[h.SOURCE_MOBILE_APP.value])])},SOURCE_SAVED_AUDIENCE:{text:m.STS_DISPLAY_NAME,shouldCheck:l.contains,filterSet:new p([new o(q.SOURCE.field,r,[h.SOURCE_SAVED_AUDIENCE.value])])},SOURCE_PAGE_AUDIENCE:{text:"Page Audience",shouldCheck:l.contains,filterSet:new p([new o(q.SOURCE.field,r,[h.SOURCE_PAGE_AUDIENCE.value])])},SOURCE_EVENT_AUDIENCE:{text:"Event Audience",shouldCheck:l.contains,filterSet:new p([new o(q.SOURCE.field,r,[h.SOURCE_EVENT_AUDIENCE.value])])},SOURCE_CUSTOM_AUDIENCE:{text:m.CA_DISPLAY_NAME,shouldCheck:l.contains,filterSet:new p([new o(q.SOURCE.field,r,[h.SOURCE_CUSTOM_AUDIENCE.value])])},SOURCE_CONVERSION_PIXEL:{text:"Conversion Pixel",shouldCheck:l.contains,filterSet:new p([new o(q.SOURCE.field,r,[h.SOURCE_CONVERSION_PIXEL.value])])},QUICKLOOK_RECENTLY_USED:{text:"Recently Used",shouldCheck:l.contains,filterSet:new p([new o(q.QUICK_LOOK.field,r,[h.QUICKLOOK_RECENTLY_USED.value])])},QUICKLOOK_INACTIVE_ADS:{text:"In Active Ads",shouldCheck:l.contains,filterSet:new p([new o(q.QUICK_LOOK.field,r,[h.QUICKLOOK_INACTIVE_ADS.value])])},QUICKLOOK_ACTION_NEEDED:{text:"Action Needed",shouldCheck:l.contains,filterSet:new p([new o(q.QUICK_LOOK.field,r,[h.QUICKLOOK_ACTION_NEEDED.value])])},QUICKLOOK_SHARED:{text:"Shared",shouldCheck:l.contains,filterSet:new p([new o(q.QUICK_LOOK.field,r,[h.QUICKLOOK_SHARED.value])])}};e.exports=s;},null);
__d("BUIPresetFiltersGroup",["ClientIDs"],function(a,b,c,d,e,f,g){'use strict';var h=function(){return 0;};function i(j,k,l,m,n,o){this.$BUIPresetFiltersGroup0=j;this.$BUIPresetFiltersGroup1=k;this.$BUIPresetFiltersGroup2=l;this.$BUIPresetFiltersGroup3=m||0;this.$BUIPresetFiltersGroup4=n||h;this.$BUIPresetFiltersGroup5=o||g.getNewClientID();}i.prototype.getTitle=function(){return this.$BUIPresetFiltersGroup0;};i.prototype.getFilters=function(){return this.$BUIPresetFiltersGroup1;};i.prototype.getID=function(){return this.$BUIPresetFiltersGroup5;};i.prototype.getMaxItemCount=function(){return this.$BUIPresetFiltersGroup3;};i.prototype.doCompare=function(j,k){return this.$BUIPresetFiltersGroup4(j,k);};i.prototype.doOnChange=function(j,k,l){this.$BUIPresetFiltersGroup2(j,k,l);};e.exports=i;},null);
__d("BUIPresetFiltersHeader.react",["BUIPresetFiltersGroup","Image.react","InlineBlock.react","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=j.createClass({displayName:"BUIPresetFiltersHeader",propTypes:{group:j.PropTypes.instanceOf(g).isRequired,headerKey:j.PropTypes.string,hidden:j.PropTypes.bool,isAnyChecked:j.PropTypes.bool,onCheckmarkClick:j.PropTypes.func.isRequired,onTextClick:j.PropTypes.func.isRequired},render:function(){var n=this.props.hidden?l('/images/ui/x/glyphs/dark/chevron-down_s.png'):l('/images/ui/x/glyphs/dark/chevron-up_s.png'),o=this.props.hidden&&this.props.isAnyChecked,p=(("_1h6e")+(o?' '+"_48wf":'')+(this.props.isAnyChecked?' '+"_1h6h":''));return (j.createElement("div",{className:"_1h6i",onClick:this._onTextClick},j.createElement(i,{className:p,onClick:this._onCheckmarkClick}),j.createElement(i,null,j.createElement("h3",{className:"_1h6k"},this.props.children,j.createElement(h,{src:n,className:"_1h6l"})))));},_onTextClick:function(event){event.preventDefault();this.props.onTextClick(this.props.group,this.props.headerKey,!this.props.hidden);},_onCheckmarkClick:function(event){event.preventDefault();this.props.onCheckmarkClick(this.props.group);}});e.exports=m;},null);
__d("BUIPresetFiltersItem",["ClientIDs","invariant"],function(a,b,c,d,e,f,g,h){'use strict';function i(j,k,l,m,n,o){this.$BUIPresetFiltersItem0=j;this.$BUIPresetFiltersItem1=!!k;this.$BUIPresetFiltersItem2=!!l;this.$BUIPresetFiltersItem3=m;this.$BUIPresetFiltersItem4=n;this.$BUIPresetFiltersItem5=o||g.getNewClientID();}i.prototype.getText=function(){return this.$BUIPresetFiltersItem0;};i.prototype.isChecked=function(){return this.$BUIPresetFiltersItem1;};i.prototype.isDisabled=function(){return this.$BUIPresetFiltersItem2;};i.prototype.getFilterReference=function(){return this.$BUIPresetFiltersItem3;};i.prototype.getID=function(){return this.$BUIPresetFiltersItem5;};i.prototype.canBeDeleted=function(){return !!this.$BUIPresetFiltersItem4;};i.prototype.doOnDelete=function(){h(this.canBeDeleted());this.$BUIPresetFiltersItem4(this);};e.exports=i;},null);
__d("BUIPresetFiltersSelectableItem.react",["BUIPresetFiltersItem","InlineBlock.react","React","XUICloseButton.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l=i.createClass({displayName:"BUIPresetFiltersSelectableItem",propTypes:{filter:i.PropTypes.instanceOf(g).isRequired},render:function(){var m=!!this.props.disabled,n=((!m?"_48wc":'')+(m?' '+"_48wd":'')),o=(("_48we")+(this.props.checked?' '+"_48wf":'')),p=(("_48wg")+(this.props.deletable?' '+"_48wh":'')),q=m?null:this._onClick,r=this.props.deletable?i.createElement(j,{className:"_48wi",size:"small",onClick:this._onDelete}):null;return (i.createElement("li",{className:n,onClick:q},i.createElement(h,{className:o}),i.createElement(h,{className:p},this.props.filter.getText()),r));},_onClick:function(event){event.preventDefault();this.props.onClick(this.props.filter,!this.props.checked);},_onDelete:function(event){event.preventDefault();this.props.filter.doOnDelete();}});e.exports=l;},null);
__d("BUIPresetFilters.react",["BUIPresetFiltersGroup","BUIPresetFiltersHeader.react","Image.react","ImmutableObject","BUIPresetFiltersSelectableItem.react","React","ReactComponentWithPureRenderMixin","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';var p=l.createClass({displayName:"BUIPresetFilters",mixins:[m],propTypes:{filterGroups:l.PropTypes.arrayOf(l.PropTypes.instanceOf(g)).isRequired},render:function(){return (l.createElement("div",{className:"_5q8w"},this.props.filterGroups.map(function(s){return l.createElement(q,{group:s,key:s.getID()});})));}}),q=l.createClass({displayName:"Section",mixins:[m],propTypes:{group:l.PropTypes.instanceOf(g).isRequired},getInitialState:function(){return this._calculateState(this.props,{});},componentWillReceiveProps:function(s){this.setState(this._calculateState(s,this.state));},_calculateState:function(s,t){var u=s.group,v={};if(u.getMaxItemCount()){var w=u.getFilters().slice(0);w.sort(u.doCompare.bind(u));w.forEach(function(x,y){v[x.getID()]=y+1;});}return ({filterIDToRankMap:new j(v),howManyToShow:t.howManyToShow||u.getMaxItemCount(),isHidden:t.isHidden||false});},_onHeaderClick:function(){this.setState({isHidden:!this.state.isHidden});},_getSelectedFilters:function(s,t){return this.props.group.getFilters().filter(function(u){if(u.getID()===s.getID())return t;return u.isChecked();});},_onFilterClick:function(s){var t=!s.isChecked();this.props.group.doOnChange(this._getSelectedFilters(s,t),[s],t);},_onHeaderCheckmarkClick:function(){var s=false,t=[];this.props.group.getFilters().forEach(function(u){if(u.isChecked()){t.push(u);s=true;}});if(s)this.props.group.doOnChange([],t,false);},_renderItems:function(s){return (l.createElement("ul",{className:"_5q8z"},s.map(function(t){return (l.createElement(k,{deletable:t.canBeDeleted(),disabled:t.isDisabled(),checked:t.isChecked(),filter:t,onClick:this._onFilterClick,key:t.getID()}));}.bind(this))));},_renderShowMoreLink:function(s){return l.createElement(r,{group:s,onClick:this._onShowMoreLinkClick});},_onShowMoreLinkClick:function(s){var t=this.state.howManyToShow;t+=s.getMaxItemCount();this.setState({howManyToShow:t});},render:function(){var s=this.props.group,t=s.getFilters(),u=this.state.howManyToShow,v=null,w=u&&t.length>u;if(w&&!this.state.isHidden){t=t.filter(function(x){return this.state.filterIDToRankMap[x.getID()]<=u;}.bind(this));v=this._renderShowMoreLink(s);}return (l.createElement("div",{key:s.getID(),className:"_5q8-",onMouseDown:function(event){event.preventDefault();}},l.createElement(h,{group:s,hidden:this.state.isHidden,isAnyChecked:s.getFilters().some(function(x){return x.isChecked();}),onCheckmarkClick:this._onHeaderCheckmarkClick,onTextClick:this._onHeaderClick},s.getTitle()),!this.state.isHidden?this._renderItems(t):null,v));}}),r=l.createClass({displayName:"ShowMoreLink",propTypes:{group:l.PropTypes.instanceOf(g).isRequired},_onClick:function(event){event.preventDefault();this.props.onClick(this.props.group);},render:function(){return (l.createElement("div",{className:"_5q8_",onClick:this._onClick},l.createElement(i,{src:o('images/ui/x/glyphs/dark/3-dots_s-2x.png')})));}});e.exports=p;},null);
__d("AdsAMPresetFilters.react",["AdsAMPresetFilterConfig","AdsGenericFilterSet","AdsGenericFilterSetUtil","BUIPresetFilters.react","BUIPresetFiltersGroup","BUIPresetFiltersItem","React","ReactComponentWithPureRenderMixin","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';function p(){return 0;}var q=m.createClass({displayName:"AdsAMPresetFilters",mixins:[n],propTypes:{filterSet:m.PropTypes.instanceOf(h),selectedFilters:m.PropTypes.arrayOf(m.PropTypes.instanceOf(l)),onChange:m.PropTypes.func.isRequired},getInitialState:function(){return this._calculateState(this.props);},componentWillReceiveProps:function(r){this.setState(this._calculateState(r));},_calculateState:function(r){var s=[this._createQuickLookSection(r),this._createTypeSection(r),this._createAvailabilitySection(r),this._createSourceSection(r)];return {filterSections:s};},_createQuickLookSection:function(r){return this._createSection(r,'quicklook',"Quick Look",g.QUICKLOOK_RECENTLY_USED,g.QUICKLOOK_INACTIVE_ADS,g.QUICKLOOK_ACTION_NEEDED,g.QUICKLOOK_SHARED);},_createTypeSection:function(r){return this._createSection(r,'type',"Type",g.TYPE_CUSTOM_AUDIENCE,g.TYPE_LOOKALIKE,g.TYPE_SAVED_AUDIENCE);},_createAvailabilitySection:function(r){return this._createSection(r,'availability',"Availability",g.AVAILABILITY_READY,g.AVAILABILITY_NOT_READY,g.AVAILABILITY_ERROR);},_createSourceSection:function(r){return this._createSection(r,'source',"Source",g.SOURCE_DATA_FILE,g.SOURCE_WEBSITE,g.SOURCE_MOBILE_APP,g.SOURCE_SAVED_AUDIENCE,g.SOURCE_PAGE_AUDIENCE,g.SOURCE_EVENT_AUDIENCE,g.SOURCE_CUSTOM_AUDIENCE,g.SOURCE_CONVERSION_PIXEL);},render:function(){return m.createElement(j,{filterGroups:this.state.filterSections});},_createSection:function(r,s,t){for(var u=[],v=3,w=arguments.length;v<w;v++)u.push(arguments[v]);var x=r.filterSet,y=u.map(function(z){var aa=x?z.shouldCheck(x,z.filterSet):false,ba=new l(z.text,aa,false,z);return ba;});return new k(t,y,this._onFiltersChange,0,p,s);},_onFiltersChange:function(r,s,t){var u=s.map(function(w){return w.getFilterReference().filterSet;}),v=u.reduce(function(w,x){return i.mergeByField(w,x);});t?this._onFilterAdded(v):this._onFilterRemoved(v);},_onFilterAdded:function(r){var s=this.props.filterSet,t=s?i.mergeByField(s,r):r;this.props.onChange(t);},_onFilterRemoved:function(r){var s=i.exclude(this.props.filterSet,r);this.props.onChange(s);}});e.exports=q;},null);
__d("AdsActionSelector.react",["ContextualLayer.react","LayerHideOnBlur","Link.react","React","ReactChildren","ReactLayeredComponentMixin","XUIPopoverButton.react","cloneWithProps","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';var q=j.PropTypes,r=j.createClass({displayName:"AdsActionSelector",mixins:[l],propTypes:{alignment:q.oneOf(['left','right','center']),disabled:q.bool,maxHeight:q.number,onAction:q.func.isRequired,position:q.oneOf(['above','below','left','right']),size:j.PropTypes.oneOf(['small','medium','large','xlarge','xxlarge'])},getInitialState:function(){return {showMenu:false};},render:function(){var s=this.props,t=s.className,u=s.disabled,v=s.use,w=(function(x,y){var z={},aa=Object.prototype.hasOwnProperty;if(x==null)throw new TypeError();for(var ba in x)if(aa.call(x,ba)&&!aa.call(y,ba))z[ba]=x[ba];return z;})(s,{className:1,disabled:1,use:1});t=p("_2ljj","_5myu",t);v=v||'default';return (j.createElement(m,j.__spread({},w,{className:t,depressed:v=='default'&&this.state.showMenu,disabled:u,onClick:u?null:this._showMenu,ref:"menuOpener",use:v})));},renderLayers:function(){if(this.state.showMenu&&!this.props.disabled){var s=k.map(this.props.children,function(u,v){return n(u,{optionName:'option_'+v,onOptionSelect:this._onOptionSelect});}.bind(this)),t=this.props.maxHeight?{maxHeight:this.props.maxHeight,overflow:'auto'}:(void 0);return {layer:j.createElement(g,{alignment:this.props.alignment,key:"menu",behaviors:{LayerHideOnBlur:h},contextRef:"menuOpener",position:this.props.position?this.props.position:"below",onToggle:this._onMenuToggle,shown:true},j.createElement("div",{className:"_2ljk",style:t,role:"menu"},s))};}else return null;},_showMenu:function(){if(!this.state.showMenu)this.setState({showMenu:true});},_removeMenu:function(){if(this.state.showMenu&&this.isMounted())this.setState({showMenu:false});},_onMenuToggle:function(s){if(!s)setTimeout(this._removeMenu,16);},_onOptionSelect:function(s){this.setState({showMenu:false});this.props.onAction(s);}});r.Option=j.createClass({displayName:"Option",propTypes:{value:j.PropTypes.string.isRequired,disabled:j.PropTypes.bool},render:function(){if(this.props.disabled)return (j.createElement("div",{className:"_34vf"},this.props.children));return (j.createElement(i,{className:"_2ljl",onClick:this._onClick},this.props.children));},_onClick:function(event){event.preventDefault();this.props.onOptionSelect(this.props.value);}});r.Separator=j.createClass({displayName:"Separator",render:function(){return j.createElement("div",{className:"_1ydq"});}});e.exports=r;},null);
__d("AdsCreateAudienceActionSelector.react",["AdsActionSelector.react","AudienceManagerUIConstants","React","fbt"],function(a,b,c,d,e,f,g,h,i,j){var k=g.Option,l=h.CREATE_AUDIENCE_ACTION_TYPE,m=i.createClass({displayName:"AdsCreateAudienceActionSelector",propTypes:{onAction:i.PropTypes.func.isRequired,disabled:i.PropTypes.bool,supportSavedTargetSpec:i.PropTypes.bool.isRequired},render:function(){var n="Create Audience",o=[i.createElement(k,{value:l.CUSTOM_AUDIENCE},"Custom Audience"),i.createElement(k,{value:l.LOOKALIKE},"Lookalike Audience")];if(this.props.supportSavedTargetSpec)o.push(i.createElement(k,{value:l.SAVED_TARGET_SPEC},h.STS_DISPLAY_NAME));return (i.createElement(g,i.__spread({use:"special"},this.props,{label:n}),o));}});e.exports=m;},null);
__d("AdsPixelInsights.react",["SpectrumChart","SpectrumLines","Link.react","React","SpectrumTimeScale","SpectrumStyle","SpectrumTooltipMenu","SpectrumXAxis","XUISpinner.react","SpectrumYAxis","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=j.createClass({displayName:"AdsPixelInsights",propTypes:{pixelId:j.PropTypes.string.isRequired,dao:j.PropTypes.object.isRequired,height:j.PropTypes.number.isRequired,width:j.PropTypes.number.isRequired},getInitialState:function(){return {dataLoaded:false,startDate:null,endDate:null,lines:[],duration:1};},componentWillMount:function(){this._loadInsightsForPixel(this.state.duration);},render:function(){if(!this.state.dataLoaded)return (j.createElement(o,{className:"_5swe",size:"small",background:"light"}));if(!this.state.lines.length)return (j.createElement("div",{className:"_5kkb"},"No pixel events received from your website in the last one week"));var t=this._getSampledData(),u=null;if((this.state.lines[0].length-1)%this._getSamplingRate())u=t[0].length-1;return (j.createElement("div",null,this._renderDurationLinks(),j.createElement(g,{scaleX:k().domain([this.state.startDate,this.state.endDate]).interval(k.Intervals.Hour),height:this.props.height,width:this.props.width,theme:{lines:{colors:[l.FB_BLUE]}}},j.createElement(h,{base:'bottom',data:t,partialValue:function(v,w){return w==u;},titles:["Pixel Events"],valueX:function(v,w){return new Date(v[0]);},valueY:function(v,w){return v[1]||0;}}),j.createElement(n,{ticks:t[0].length,secondaryTicks:true}),j.createElement(p,null),j.createElement(m,null))));},_renderDurationLinks:function(){return (j.createElement("div",null,j.createElement("div",{className:"_1uju _1ujv"},this._renderLinkIfNeeded("Last 24 hours",1)),j.createElement("div",{className:"_1uju _1ujv"},this._renderLinkIfNeeded("Last 7 days",7)),j.createElement("div",{className:"_1ujw"})));},_renderLinkIfNeeded:function(t,u){if(this.state.duration===u)return t;return (j.createElement(i,{onClick:this._loadInsightsForPixel.bind(this,u)},t));},_loadInsightsForPixel:function(t){this.props.dao.fetch.pixelInsights.one(function(u){if(!u.length){this.setState({dataLoaded:true});return;}var v=u[u.length-1].timestamp,w=u[0].timestamp,x=[[]];for(var y=0,z=u.length;y<z;y++)x[0].push([u[y].timestamp,parseInt(u[y].data[0].count,10)]);this.setState({dataLoaded:true,startDate:new Date(w),endDate:new Date(v),lines:x,duration:t});}.bind(this),{pixelId:this.props.pixelId,start_time:'-'+t+' days',aggregation:'pixel_fire'});},_getSampledData:function(){var t=this._getSamplingRate(),u=this.state.lines[0],v=[];for(var w=0;w<u.length;w++)if(w%t===0)v.push(u[w]);if((u.length-1)%t)v.push(u[u.length-1]);return [v];},_getSamplingRate:function(){return this.state.duration===1?3:6;}});e.exports=s;},null);
__d("AdsAudienceDataSourceUtils",["CustomAudienceDataSourceType","CustomAudienceDataSourceSubType","Map","Set","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l=g,m=h,n=l.FILE_IMPORTED,o=new i([[l.UNKNOWN,"Unknown"],[l.FILE_IMPORTED,"Data File"],[l.EVENT_BASED,"Event"],[l.SEED_BASED,"Lookalike"],[l.THIRD_PARTY_IMPORTED,"Email Provider"],[l.COPY_PASTE,"Copy & Paste"],[l.CLAIM_BASED,"Claim"]]),p=new i([[m.ANYTHING,"Anything"],[m.NOTHING,"Nothing"],[m.HASHES,"Hashes"],[m.USER_IDS,"UIDs"],[m.HASHES_OR_USER_IDS,"Hashes & UIDs"],[m.MOBILE_ADVERTISER_IDS,"IDFAs"],[m.EXTERNAL_IDS,"External IDs"],[m.MULTI_HASHES,"Multi Hashes"],[m.WEB_PIXEL_HITS,"Website"],[m.WEB_PIXEL_COMBINATION_EVENTS,"Website"],[m.MOBILE_APP_EVENTS,"App"],[m.MOBILE_APP_COMBINATION_EVENTS,"App"],[m.CUSTOM_AUDIENCE_USERS,"Custom Audience"],[m.PAGE_FANS,"Page Fans"],[m.CONVERSION_PIXEL_HITS,"Conversion Pixel Hits"],[m.APP_USERS,"App Users"],[m.S_EXPR,"Saved Target Group"],[m.MAIL_CHIMP_EMAIL_HASHES,"MailChimp"],[m.CONSTANT_CONTACTS_EMAIL_HASHES,"ConstantContacts"],[m.COPY_PASTE_EMAIL_HASHES,"Emails"],[m.USER_PROPERTIES,"User Properties"]]),q=new j([l.CLAIM_BASED]),r=new j([m.USER_PROPERTIES]),s={TYPES:l,SUBTYPES:m,isDisallowedByDataSource:function(t){return q.has(t.type)||r.has(t.sub_type);},textByType:function(t){return o.get(t)||o.get(n);},textBySubType:function(t){return p.get(t)||'';},detailOfAudience:function(t){var u=t.data_source.type;if(!u)return '';var v;switch(u){case l.FILE_IMPORTED:v=JSON.parse(t.data_source.creation_params);return (v&&v.file_name)||'';case l.SEED_BASED:var w=t.lookalike_spec&&t.lookalike_spec.origin;if(w&&w.length){var x=w.map(function(y){return y.name;}).join(', ');return k._("Similar to {name}",[k.param("name",x)]);}return '';case l.THIRD_PARTY_IMPORTED:v=JSON.parse(t.data_source.creation_params);return (v&&v.list_name)||'';default:return '';}},textByDataSource:function(t){var u=s.textBySubType(t.sub_type);if(!u)u=s.textByType(t.type);if(!u)u="Unknown";return u;},getTypeColumnText:function(t){return (t.type===l.SEED_BASED?"Lookalike":"Custom Audience");}};e.exports=s;},null);
__d("AdsAMAudienceUtils",["AdsAudienceDataSourceUtils","AudienceManagerUIConstants","BusinessURI.brands","dotAccess"],function(a,b,c,d,e,f,g,h,i,j){'use strict';var k='/ads/audience/details',l={isSavedTargetSpec:function(m){return !!m.isSavedTargetSpec;},getAudienceDetailsURIByType:function(m,n,o){var p=new i(k);p.addQueryData({audience_id:m,act:n,type:o});return p;},isWebsiteCustomAudience:function(m){var n=j(m,'data_source.sub_type');if(!n)return false;return n===g.SUBTYPES.WEB_PIXEL_HITS||n===g.SUBTYPES.WEB_PIXEL_COMBINATION_EVENTS;},getAudienceDetailsURI:function(m,n){var o=this.isSavedTargetSpec(m)?h.AUDIENCE_TYPE.SAVED_TARGET_SPEC:h.AUDIENCE_TYPE.CUSTOM_AUDIENCE;return this.getAudienceDetailsURIByType(m.id,n,o);}};e.exports=l;},null);
__d("AudiencePropertyConstants",["AdsAPISpec","AdsUtils"],function(a,b,c,d,e,f,g,h){var i=g.CUSTOM_AUDIENCE_FIELDS_WITH_EXPANSION.map(h.underscoreKey),j=function(){var k=['capabilities'],l=i;k.forEach(function(m){if(l.indexOf(m)===-1)l.push(m);});return l;};e.exports={ACCOUNT_ID:'account_id',APPROXIMATE_COUNT:'approximate_count',DATA_SOURCE:'data_source',DESCRIPTION:'description',ID:'id',NAME:'name',PARENT_AUDIENCE_ID:'parent_audience_id',PARENT_CATEGORY:'parent_category',RETENTION_DAYS:'retention_days',RULE:'rule',STATUS:'status',DELIVERY_STATUS:'delivery_status',OPERATION_STATUS:'operation_status',PERMISSION_FOR_ACTIONS:'permission_for_actions',SUBTYPE:'subtype',SUBTYPE_NAME:'subtype_name',TIME_CONTENT_UPDATED:'time_content_updated',TIME_CREATED:'time_created',TIME_UPDATED:'time_updated',TYPE:'type',TYPE_NAME:'type_name',INCLUDED_CUSTOM_AUDIENCES:'included_custom_audiences',EXCLUDED_CUSTOM_AUDIENCES:'excluded_custom_audiences',LOOKALIKE_SPEC:'lookalike_spec',LOOKALIKE_AUDIENCE_IDS:'lookalike_audience_ids',CAPABILITIES:'capabilities',AUDIENCE_MANAGER_FIELDS:j()};},null);
__d("AudienceManagerErrorTypes",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({ACCOUNT_INIT:null,AUDIENCE_INIT:null,AUDIENCE_DELETE:null,AUDIENCE_ADD:null,AUDIENCE_UPDATE:null,AUDIENCE_GET:null,CAPABILITY_REMOVE:null,CAPABILITY_UPDATE:null,PIXEL_GET:null,STS_GET:null}),i=g({INIT_ERRORS:null,NON_INIT_ERRORS:null}),j={};j[i.INIT_ERRORS]=[h.ACCOUNT_INIT,h.AUDIENCE_INIT,h.PIXEL_GET];j[i.NON_INIT_ERRORS]=[h.AUDIENCE_DELETE,h.AUDIENCE_UPDATE,h.AUDIENCE_ADD,h.AUDIENCE_GET,h.CAPABILITY_REMOVE,h.CAPABILITY_UPDATE];e.exports={Errors:h,ErrorTypes:i,ErrorTypeToErrors:j};},null);
__d("FixedDataTableSortFunctions",[],function(a,b,c,d,e,f){function g(j,k){if(j>k)return 1;if(j<k)return -1;return 0;}function h(j,k){if(j!==null&&j!==(void 0)&&k!==null&&k!==(void 0))return null;j=(j===null||j===(void 0))?1:0;k=(k===null||k===(void 0))?1:0;return j-k;}var i={compareNumber:function(j,k){var l=h(j,k);if(l===null)l=parseFloat(j)-parseFloat(k);return l;},compareString:function(j,k){var l=h(j,k);if(l===null)l=g(j,k);return l;},compareMixedNumberString:function(j,k){var l=h(j,k);if(l===null){var m=typeof(j),n=typeof(k);l=g(m,n)||g(j,k);}return l;},compareDate:function(j,k){var l=h(j,k);if(l===null)l=j.getTime()-k.getTime();return l;}};e.exports=i;},null);
__d("AdsAMAudienceStore",["AdsAMActionTypes","AdsAMAudienceUtils","AdsAMDispatcher","Arbiter","AudienceManagerUIConstants","AudiencePropertyConstants","FixedDataTableSortFunctions","ImmutableObject","copyProperties","invariant","merge","AudienceManagerErrorTypes"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=b('AudienceManagerErrorTypes').ErrorTypeToErrors,s=k.SORT_ORDER,t,u,v,w,x,y,z,aa,ba,ca,da={},ea={customAudiences:[],savedTargetSpecs:[]};function fa(){t=false;w={};x={};y={};z={};aa={};ba={};ca={sortOrder:s.DESC,sortKey:l.TIME_CREATED,compareFunction:m.compareNumber};}function ga(){u=false;v={};}fa();ga();function ha(ma){ma[l.TIME_CREATED]=ma.time_updated_timestamp;}function ia(ma){(ma||[]).forEach(function(na){if(h.isSavedTargetSpec(na))ha(na);w[na.id]=na;});}function ja(ma,na){w[ma]=q(w[ma],na);}function ka(ma,na){var oa=ca.compareFunction(ma[ca.sortKey],na[ca.sortKey]);return ca.sortOrder===s.ASC?oa:-oa;}var la=o(new j(),{getState:function(ma){var na=w[ma];p(na);return new n(na);},getCloneState:function(ma){var na=w[ma];return Object.assign({},na);},getAllAudiences:function(){var ma=[];for(var na in w)ma.push(new n(w[na]));ma.sort(ka);return ma;},hasAllContent:function(){return t&&u;},getAllAudiencesMap:function(){var ma={};for(var na in w)ma[na]=(new n(w[na]));return ma;},hasError:function(ma){return !!da[ma];},getErrorsByType:function(ma){var na=[],oa=r[ma]||[];for(var pa=0;pa<oa.length;pa++)if(da[oa[pa]])na.push(da[oa[pa]]);return na;},getAccount:function(){return new n(v);},getSortState:function(){return ca;},hasAudienceDetailsContent:function(ma){return !!w[ma];},getAudienceStatus:function(ma){return y[ma];},getAudienceLALNames:function(ma){return x[ma];},getAudienceUsageHistory:function(ma){return z[ma];},getAudienceAccountIDs:function(ma){return aa[ma];},getAudiencePixel:function(ma){return ba[ma];},getCustomAudiencesFromBuffer:function(){return ea.customAudiences;},getSavedTargetSpecFromBuffer:function(){return ea.savedTargetSpecs;},dispatchToken:i.register(function(ma){var na=ma.action,oa=false;switch(na.actionType){case g.ACCOUNT_INIT:ga();v=na.account;u=true;oa=true;break;case g.AUDIENCE_INIT:fa();ia(na.audiences);t=true;oa=true;break;case g.AUDIENCE_ADD:var pa=na.audience;w[pa.id]=pa;oa=true;break;case g.AUDIENCE_BULK_ADD:na.audiences.forEach(function(ra){w[ra.id]=ra;});oa=true;break;case g.AUDIENCE_APPEND:ia(na.audiences);oa=true;break;case g.AUDIENCE_DELETE:delete w[na.audience.id];oa=true;break;case g.AUDIENCE_BULK_DELETE:na.audiences.forEach(function(ra){delete w[ra.id];});oa=true;break;case g.AUDIENCE_CHANGE:ja(na.audienceID,na.changedProperties);oa=true;break;case g.AUDIENCE_SAVE_TO_CA_BUFFER:ea.customAudiences=na.audiences;break;case g.AUDIENCE_SAVE_TO_STS_BUFFER:ea.savedTargetSpecs=na.audiences;break;case g.AUDIENCE_DETAILS_AUDIENCE_INITIALIZE:var qa=na.audience.id;if(h.isSavedTargetSpec(na.audience))ha(na.audience);w[qa]=na.audience;x[qa]=na.lookalikeNames;oa=true;break;case g.AUDIENCE_DETAILS_UPDATE_USAGE:z[na.audienceID]=na.audienceUsageHistory;break;case g.AUDIENCE_DETAILS_UPDATE_STATUS:y[na.audienceID]=na.audienceStatuses;break;case g.AUDIENCE_DETAILS_UPDATE_ACCOUNTS:aa[na.audienceID]=na.accountIDs;break;case g.AUDIENCE_DETAILS_UPDATE_PIXEL:ba[na.audienceID]=na.pixel;break;case g.AUDIENCE_SORT:ca.sortOrder=na.sortOrder;ca.sortKey=na.sortKey;ca.compareFunction=na.compareFunction;oa=true;break;case g.ERROR:da[na.error]=na.rawData.error;oa=true;break;case g.VIEW_CLEAR_ERRORS:da={};oa=true;break;}if(oa)la.inform('change');})});e.exports=la;},null);
__d("AdsAMViewStore",["AdsAMActionTypes","AdsAMDispatcher","Arbiter","ImmutableObject","copyProperties","dotAccess"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p,q,r,s,t,u,v,w,x,y,z;function aa(){m={showCreateCustomAudienceDialog:false,showDeleteDialog:false,showPixelDialog:false,showRegularEditDialog:false,showWCADialog:false,showMACADialog:false,showShareDialog:false,showLookalikeDialog:false,showSavedTargetSpecDialog:false,showBulkDeleteDialog:false,showOptOutDialog:false,showFilterPane:false};n=null;o=null;p=null;q=null;r=null;s={name:true,type:true,source:true,size:true,status:true,dateCreated:true,audienceID:false,sharing:false,debug:true};t=false;u=false;v=null;w=false;x={edit:false};y={edit:null};z={wcaState:null,stsState:null};}aa();var ba=k(new i(),{getViewState:function(){return new j(m);},getAudienceIdClicked:function(){return n;},getSelectedTab:function(){return o;},hasFilterContent:function(){return w;},getNameFilter:function(){return p?p.name:null;},setNameFilter:function(ca){w=true;p=p||{};p.name=ca;},getCustomAudienceAfterCursor:function(){return q;},getSavedTargetSpecAfterCursor:function(){return r;},getColumnsShown:function(){return s;},getFilterSet:function(){return v;},isSaveEnableForDetailsPage:function(){return x.edit;},getEditSaveHandlerForDetailsPage:function(){return y.edit;},getWCAFormState:function(){return z.wcaState;},getSTSFormState:function(){return z.stsState;},isFiltering:function(){return t;},isLoadingMoreAudiences:function(){return u;},dispatchToken:h.register(function(ca){var da=ca.action,ea=true;switch(da.actionType){case g.VIEW_SHOW_CREATE_CA_DIALOG:m.showCreateCustomAudienceDialog=true;break;case g.VIEW_CLOSE_CREATE_CA_DIALOG:m.showCreateCustomAudienceDialog=false;break;case g.VIEW_SHOW_DELETE_AUDIENCE_DIALOG:m.showDeleteDialog=true;n=da.audienceId;break;case g.VIEW_CLOSE_DELETE_AUDIENCE_DIALOG:m.showDeleteDialog=false;n=null;break;case g.VIEW_SHOW_PIXEL_DIALOG:m.showPixelDialog=true;break;case g.VIEW_CLOSE_PIXEL_DIALOG:m.showPixelDialog=false;break;case g.VIEW_SHOW_REGULAR_EDIT_DIALOG:m.showRegularEditDialog=true;n=da.audienceId;break;case g.VIEW_CLOSE_REGULAR_EDIT_DIALOG:m.showRegularEditDialog=false;n=null;break;case g.VIEW_SHOW_WCA_DIALOG:m.showWCADialog=true;n=da.audienceId;break;case g.VIEW_CLOSE_WCA_DIALOG:m.showWCADialog=false;n=null;break;case g.VIEW_SHOW_MACA_DIALOG:m.showMACADialog=true;break;case g.VIEW_CLOSE_MACA_DIALOG:m.showMACADialog=false;break;case g.VIEW_SHOW_SHARE_AUDIENCE_DIALOG:m.showShareDialog=true;n=da.audienceId;break;case g.VIEW_CLOSE_SHARE_AUDIENCE_DIALOG:m.showShareDialog=false;n=null;break;case g.VIEW_SHOW_LOOKALIKE_DIALOG:m.showLookalikeDialog=true;n=da.audienceId;break;case g.VIEW_CLOSE_LOOKALIKE_DIALOG:m.showLookalikeDialog=false;n=null;break;case g.VIEW_SHOW_SAVED_TARGET_SPEC_DIALOG:m.showSavedTargetSpecDialog=true;n=da.audienceId;break;case g.VIEW_CLOSE_SAVED_TARGET_SPEC_DIALOG:m.showSavedTargetSpecDialog=false;n=null;break;case g.VIEW_SHOW_BULK_DELETE_DIALOG:m.showBulkDeleteDialog=true;break;case g.VIEW_CLOSE_BULK_DELETE_DIALOG:m.showBulkDeleteDialog=false;break;case g.VIEW_SHOW_OPT_OUT_DIALOG:m.showOptOutDialog=true;n=da.audienceId;break;case g.VIEW_CLOSE_OPT_OUT_DIALOG:m.showOptOutDialog=false;n=null;break;case g.VIEW_INIT_DETAILS_TAB:o=da.tab;break;case g.VIEW_DETAILS_TAB_CHANGE:o=da.tab;break;case g.VIEW_CUSTOM_AUDIENCE_CURSOR_CHANGE:if(l(da,'paging.cursors.after')){q=l(da,'paging.cursors.after');}else q=null;ea=false;break;case g.VIEW_SAVED_TARGET_SPEC_CURSOR_CHANGE:if(l(da,'paging.cursors.after')){r=l(da,'paging.cursors.after');}else r=null;ea=false;break;case g.VIEW_INIT_COLUMN_DISPLAY:s=da.columnsShown;ea=false;break;case g.VIEW_COLUMN_DISPLAY_CHANGE:s[da.column]=da.show;break;case g.VIEW_SHOW_FILTER_PANE:m.showFilterPane=true;break;case g.VIEW_HIDE_FILTER_PANE:m.showFilterPane=false;break;case g.VIEW_UPDATE_FILTER_SET:w=true;v=da.filterSet;break;case g.VIEW_UPDATE_SAVE_STATE_FOR_EDIT:if(x.edit===da.saveEnable)ea=false;x.edit=da.saveEnable;y.edit=da.editSaveCallback;break;case g.VIEW_UPDATE_WCA_FORM_STATE:z.wcaState=da.formState;break;case g.VIEW_UPDATE_STS_FORM_STATE:z.stsState=da.formState;break;case g.VIEW_UPDATE_FILTERING_STATE:t=da.isFiltering;break;case g.VIEW_UPDATE_LOADING_MORE_AUDIENCES:u=da.isLoadingMoreAudiences;break;default:ea=false;break;}if(ea)ba.inform('change');})});e.exports=ba;},null);
__d("AudienceManagerWorkflowTypes",[],function(a,b,c,d,e,f){e.exports={DATA_FILE:'datafile',MAIL_CHIMP:'mailchimp',COPY_PASTE:'copypaste',MACA:'maca',WCA:'wca',PIXEL_DETAILS:'pixel',LOOKALIKE:'lal',CUSTOM_LIST:'customlist'};},null);
__d("CreateCAStages",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({CREATE_AUDIENCE_INIT:null,CUSTOMER_LIST:null,COPY_PASTE_INIT:null,COPY_PASTE_UPLOAD:null,COPY_PASTE_UPLOAD_COMPLETE:null,FILE_IMPORT_INIT:null,FILE_IMPORT_CHECK_FILE:null,FILE_IMPORT_UPLOAD:null,FILE_IMPORT_UPLOAD_CONVERT_ERROR:null,FILE_IMPORT_NO_VALID_ENTRY:null,FILE_IMPORT_UPLOAD_COMPLETE:null,FILE_IMPORT_UPLOAD_ERROR:null,MAIL_CHIMP_INIT:null,MAIL_CHIMP_AUTHENTICATE:null,MAIL_CHIMP_FETCH_COMPLETE:null,MAIL_CHIMP_UPLOAD:null,MAIL_CHIMP_UPLOAD_COMPLETE:null,CREATION_COMPLETE_NEXT_STEP:null,EDIT_AUDIENCE_INIT:null,OPT_OUT_USER_FILE_IMPORT_INIT:null,FATAL_ERROR:null});e.exports=h;},null);
__d("CreateCADialogTypes",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({MACA:null,CUSTOMER_LIST:null,LOOKALIKE:null});e.exports=h;},null);
__d("AdsAMCreateAudienceStore",["AdsAMActionTypes","AdsAMDispatcher","Arbiter","CreateCAStages","CreateCADialogTypes","CustomAudienceCreationErrors","ImmutableObject","copyProperties","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p,q,r,s,t,u,v,w,x,y,z,aa;function ba(){p=0;r=k.CUSTOMER_LIST;q=j.CREATE_AUDIENCE_INIT;s={validRecord:0,invalidRecord:0,totalRecord:0};w=[];x={};y=0;z=0;t={};u=[];v={};aa="";}function ca(ea){switch(ea.type){case l.FILE_IMPORT_CSV_CONVERT_ERROR:q=j.FILE_IMPORT_UPLOAD_CONVERT_ERROR;aa=ea.errorDetails;break;case l.FILE_IMPORT_NO_VALID_ENTRY:q=j.FILE_IMPORT_NO_VALID_ENTRY;aa="No valid entries were found. Please upload a different file.";break;case l.FILE_IMPORT_TOKEN_ERROR:case l.COPY_PASTE_TOKEN_ERROR:u.push(ea.error);return;case l.FILE_IMPORT_ERROR_LIMIT_REACH:v=ea.errorDetails;q=j.FILE_IMPORT_UPLOAD_ERROR;return;case l.FATAL_ERROR:aa=ea.error.message;q=j.FATAL_ERROR;return;}}ba();var da=n(new i(),{getViewDialogType:function(){return r;},getViewStage:function(){return q;},getNumberOfRecords:function(){return new m(s);},getContactsLists:function(){return w;},getTotalPage:function(){return y;},getCurrentPage:function(){return z;},getProgress:function(){return p;},getSelectableContactsLists:function(){var ea={};for(var fa in x)ea[fa]=new m(x[fa]);return ea;},getAudiences:function(){return t;},getErrorTokenLists:function(){var ea=[];ea=u.map(function(fa){return fa.token;});return ea;},getErrorDetailsForLimitReach:function(){return new m(v);},getErrorMessage:function(){return aa;},dispatchToken:h.register(function(ea){var fa=ea.action,ga=true;switch(fa.actionType){case g.CREATE_AUDIENCE_RESET:ba();break;case g.CREATE_AUDIENCE_SET_VIEW_STAGE:q=fa.viewStage;break;case g.CREATE_AUDIENCE_SET_VIEW_DIALOG_TYPE:r=fa.viewDialogType;break;case g.CREATE_AUDIENCE_SHOW_MACA_DIALOG:r=k.MACA;break;case g.FILE_IMPORT_CHECK_FILE:q=j.FILE_IMPORT_CHECK_FILE;break;case g.FILE_IMPORT_START_UPLOAD:q=j.FILE_IMPORT_UPLOAD;break;case g.FILE_IMPORT_UPLOAD_PROGRESS:case g.COPY_PASTE_UPLOAD_PROGRESS:case g.MAIL_CHIMP_UPLOAD_PROGRESS:p=fa.progress;break;case g.FILE_IMPORT_CREATE_AUDIENCE_COMPLETE:t[fa.audienceID]={id:fa.audienceID,name:fa.audienceName};break;case g.FILE_IMPORT_UPLOAD_COMPLETE:q=j.FILE_IMPORT_UPLOAD_COMPLETE;s=fa.numberOfRecords;break;case g.COPY_PASTE_START_UPLOAD:q=j.COPY_PASTE_UPLOAD;break;case g.COPY_PASTE_CREATE_AUDIENCE_COMPLETE:t[fa.audienceID]={id:fa.audienceID,name:fa.audienceName};break;case g.COPY_PASTE_UPLOAD_COMPLETE:q=j.COPY_PASTE_UPLOAD_COMPLETE;s=fa.numberOfRecords;break;case g.MAIL_CHIMP_FETCH_COMPLETE:q=j.MAIL_CHIMP_FETCH_COMPLETE;y=fa.totalPage;z=fa.currentPage;w=fa.contactsLists;w.forEach(function(ha){x[ha.list_id]=ha;});break;case g.MAIL_CHIMP_START_UPLOAD:q=j.MAIL_CHIMP_UPLOAD;break;case g.MAIL_CHIMP_UPLOAD_COMPLETE:q=j.MAIL_CHIMP_UPLOAD_COMPLETE;t=fa.audiences;break;case g.FILE_IMPORT_ERROR:case g.COPY_PASTE_ERROR:ca(fa);break;case g.UPDATE_NAME_DESCRIPTION_COMPLETE:Object.keys(fa.audiences).forEach(function(ha){t[ha]=fa.audiences[ha];});break;default:ga=false;break;}if(ga)da.inform('change');})});e.exports=da;},null);
__d("AdsMobileRemarketingAppNameSearchSource",["AbstractSearchSource","AdsDestinationTypes","AdsUtils","SearchableEntry","TokenizeUtil","ads-destinationType"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b('ads-destinationType').DEST_TYPE_TO_NAME,m,n,o;for(var p in g)if(g.hasOwnProperty(p))r[p]=g[p];var q=g===null?null:g.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=g;function r(s){"use strict";if(m)return m;n=s;this.$AdsMobileRemarketingAppNameSearchSource0=n.fetch.accountInfo.constantParameters.accountId;}r.prototype.bootstrap=function(s){"use strict";if(o){s&&s();return;}n.fetch.adConnectedApp.one(function(t){o=t||[];s&&s();},{act:this.$AdsMobileRemarketingAppNameSearchSource0});};r.prototype.fetchApps=function(s){"use strict";if(o)return;n.fetch.adConnectedApp.one(function(t){o=t||[];s&&s();},{act:this.$AdsMobileRemarketingAppNameSearchSource0});};r.prototype.searchImpl=function(s,t){"use strict";if(!o){this.fetchApps(this.$AdsMobileRemarketingAppNameSearchSource1.bind(this,s,t));}else this.$AdsMobileRemarketingAppNameSearchSource1(s,t);};r.prototype.$AdsMobileRemarketingAppNameSearchSource1=function(s,t){"use strict";var u=o.filter(function(v){return !s||k.isQueryMatch(s,v.name)||s==v.id;}).map(function(v){var w=new j({uniqueID:v.id,title:v.name,photo:v.picture,subtitle:l[h.APP],auxiliaryData:{}});return w;});t(u,s);};r.getInstance=function(s){"use strict";if(!m||!i.isEqualWeak(s,n))m=new r(s);return m;};e.exports=r;},null);
__d("AudienceManagerErrorView.react",["React","XUINotice.react","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.PropTypes,k=g.createClass({displayName:"AudienceManagerErrorView",propTypes:{shown:j.bool,message:j.string},render:function(){return (g.createElement("div",{className:((!this.props.shown?"hidden_elem":''))},g.createElement(h,{use:"warn"},this.props.message)));}});e.exports=k;},null);
__d("AudienceManagerLoggingEvents",[],function(a,b,c,d,e,f){e.exports={AM_CREATE_MACA_ICON_CLICK:'am_create_maca_icon_click',AM_MACA_NUX_SHOWN:'am_maca_nux_shown',AM_MACA_NUX_CREATE_AUDIENCE:'am_maca_nux_create_audience',AM_MACA_EDITOR_APP_NO_EVENTS:'am_maca_editor_app_no_events',AM_MACA_EDITOR_APP_SELECTED:'am_maca_editor_app_selected',AM_MACA_EDITOR_VALIDATION_FAILURE:'am_maca_editor_validation_failure',AM_MACA_EDITOR_CREATE_AUDIENCE:'am_maca_editor_create_audience',AM_MACA_EDITOR_CREATE_SUCCESS:'am_maca_editor_create_success',AM_MACA_EDITOR_INCLUSIVE_EVENT_SELECTED:'am_maca_editor_event_selected',AM_MACA_EDITOR_EXCLUSIVE_EVENT_SELECTED:'am_maca_editor_exclusive_event_selected',AM_MACA_EDITOR_ACTION_TAKEN_ACTIVITY_SELECTED:'am_maca_editor_action_taken_activity_selected',AM_MACA_EDITOR_ACTION_NOT_TAKEN_ACTIVITY_SELECTED:'am_maca_editor_action_not_taken_activity_selected',AM_MACA_EDITOR_COMBINATION_ACTION_ACTIVITY_SELECTED:'am_maca_editor_combination_action_activity_selected',AM_MACA_EDITOR_INCLUDE_MOST_ACTIVE:'am_maca_editor_include_most_active',AM_MACA_EDITOR_INCLUDE_HIGHEST_VALUE:'am_maca_editor_include_highest_value',AM_MACA_EDITOR_SHOW_PERCENTILE_CHART:'am_maca_editor_show_percentile_chart',AM_MACA_EDITOR_NO_PERCENTILE_DATA:'am_maca_editor_no_percentile_data',AM_MACA_EDITOR_CREATE_WHALE_AUDIENCE_ATTEMPT:'am_maca_editor_create_whale_audience_attempt',AM_MACA_ACTIVATE_APP_UPSELL_SHOWN:'am_maca_editor_activate_app_upsell_shown',AM_CREATE_WCA_ICON_CLICK:'am_create_wca_icon_click',AM_WCA_NUX_CREATE_AUDIENCE:'am_wca_nux_create_audience',AM_WCA_VIEW_PIXEL_CREATE_AUDIENCE:'am_wca_view_pixel_create_audience',AM_WCA_NUX_VIEW_PIXEL:'am_wca_nux_view_pixel',AM_WCA_NUX_CREATE_PIXEL:'am_wca_nux_create_pixel',AM_WCA_NUX_CREATE_PIXEL_SUCCESS:'am_wca_nux_create_pixel_success',AM_WCA_EDITOR_VALIDATION_FAILURE:'am_wca_editor_validation_failure',AM_WCA_EDITOR_CREATE_AUDIENCE:'am_wca_editor_create_audience',AM_WCA_EDITOR_CREATE_FAIL:'am_wca_editor_create_fail',AM_WCA_EDITOR_CREATE_SUCCESS:'am_wca_editor_create_success',AM_WCA_EDITOR_ADD_RULE:'am_wca_editor_add_rule',AM_WCA_EDITOR_ADD_TOKEN:'am_wca_editor_add_token',AM_WCA_TOS_ACCEPT_FAILURE:'am_wca_tos_accept_failure',AM_WCA_TOS_ACCEPT_SUCCESS:'am_wca_tos_accept_success',AM_WCA_EDITOR_AUDIENCE_TYPE_ALL_WEBSITE_VISITORS:'am_wca_editor_audience_type_all_website_visitors',AM_WCA_EDITOR_AUDIENCE_TYPE_ALL_WEBSITE_VISITORS_WITH_DOMAIN:'am_wca_editor_audience_type_all_website_visitors_with_domain',AM_WCA_EDITOR_DOMAIN_SELECTOR_SHOWN:'am_wca_editor_audience_domain_selector_shown',AM_WCA_EDITOR_AUDIENCE_TYPE_RULES:'am_wca_editor_audience_type_rules',AM_WCA_EDITOR_AUDIENCE_TYPE_SPECIFIC_PAGES:'am_wca_editor_audience_type_specific_pages',AM_WCA_EDITOR_AUDIENCE_TYPE_INC_EXC:'am_wca_editor_audience_type_inc_exc',AM_WCA_EDITOR_AUDIENCE_TYPE_CHURNED:'am_wca_editor_audience_type_churned',WCA_NUX_CONFIRM:'wca_nux_confirm',WCA_EMAIL_PIXEL:'am_wca_email_pixel',WCA_EMAIL_PIXEL_SUCCESS:'am_wca_email_pixel_success',WCA_EMAIL_PIXEL_FAILURE:'am_wca_email_pixel_failure',AM_CA_NUX_CREATE_AUDIENCE:'am_ca_nux_create_audience',AM_CA_CREATE_AUDIENCE_CLICK:'am_ca_create_audience_click',AM_LAL_NUX_CREATE_AUDIENCE:'am_lal_nux_create_audience',AM_LAL_CREATE_AUDIENCE_CLICK:'am_lal_create_audience_click',AM_CA_CREATE_DIALOG_LOAD:'am_ca_create_dialog_load',AM_CA_CREATE_CUSTOMER_LIST_CLICK:'am_ca_create_customer_list_click',AM_CA_CREATE_WCA_CLICK:'am_ca_create_wca_click',AM_CA_CREATE_MACA_CLICK:'am_ca_create_maca_click',AM_CA_CREATE_FILE_IMPORT_CLICK:'am_ca_create_file_import_click',AM_CA_CREATE_COPY_PASTE_CLICK:'am_ca_create_copy_paste_click',AM_CA_CREATE_MAIL_CHIMP_CLICK:'am_ca_create_mail_chimp_click',AM_CA_CREATE_CUSTOMER_LIST_BACK_CLICK:'am_ca_create_customer_list_back_click',AM_CA_CREATE_BACK_TO_CUSTOMER_LIST_CLICK:'am_ca_create_back_to_customer_list_click',AM_CA_CREATE_FILE_IMPORT_CREATE_AUDIENCE_CLICK:'am_ca_create_file_import_create_audience_click',AM_CA_CREATE_FILE_IMPORT_CONTINUE_CREATE_AUDIENCE_CLICK:'am_ca_create_file_import_continue_create_audience_click',AM_CA_CREATE_FILE_IMPORT_CHOOSE_ANOTHER_FILE_CLICK:'am_ca_create_file_import_choose_another_file_click',AM_CA_CREATE_COPY_PASTE_CREATE_AUDIENCE_CLICK:'am_ca_create_copy_paste_create_audience_click',AM_CA_CREATE_LOG_INTO_MAIL_CHIMP_CLICK:'am_ca_create_log_into_mail_chimp_click',AM_CA_CREATE_MAIL_CHIMP_CREATE_AUDIENCE_CLICK:'am_ca_create_mail_chimp_create_audience_click',AM_CA_CREATE_UPLOAD_COMPLETE_CLICK:'am_ca_create_upload_complete_click',AM_CA_CREATE_UPLOAD_COMPLETE_NEXT_CLICK:'am_ca_create_upload_complete_next_click',AM_CA_CREATE_CREATE_AD_CLICK:'am_ca_create_create_ad_click',AM_CA_CREATE_CREATE_LAL_CLICK:'am_ca_create_create_lal_click',AM_CA_CREATE_FINISH_CREATION_SUCCESS:'am_ca_create_finish_creation_success',AM_CA_CREATE_CLOSE_DIALOG:'am_ca_create_close_dialog',AM_CA_CREATE_VIEW_EXAMPLE_CLICK:'am_ca_create_view_example_click',AM_CA_CREATE_UPLOAD_FILE:'am_ca_create_upload_file',AM_CA_CREATE_VIEW_ERROR_REPORT:'am_ca_create_view_error_report',AM_CA_CREATE_UPLOAD_FILE_ERROR:'am_ca_create_upload_file_error',AM_CA_EDIT_UPDATE_META_DATA:'am_ca_edit_update_meta_data',AM_CA_EDIT_UPDATE_META_DATA_ONLY:'am_ca_edit_update_meta_data_only',AM_CA_EDIT_FILE_IMPORT_ADD_USERS:'am_ca_edit_file_import_add_users',AM_CA_EDIT_FILE_IMPORT_REMOVE_USERS:'am_ca_edit_file_import_remove_users',AM_CA_EDIT_COPY_PASTE_ADD_USERS:'am_ca_edit_copy_paste_add_users',AM_CA_EDIT_COPY_PASTE_REMOVE_USERS:'am_ca_edit_copy_paste_remove_users',AM_CA_EDIT_FILE_IMPORT_CHOOSE_ANOTHER_FILE_CLICK:'am_ca_edit_file_import_choose_another_file_click',AM_CA_EDIT_FILE_IMPORT_CONTINUE_EDIT_AUDIENCE_CLICK:'am_ca_edit_file_import_continue_edit_audience_click',AM_CA_EDIT_FINISH_SUCCESS:'am_ca_edit_finish_success',AM_CA_EDIT_CLOSE_DIALOG:'am_ca_edit_close_dialog',AM_CA_OPT_OUT_USER_FINISH_SUCCESS:'am_ca_opt_out_user_finish_success',AM_CA_OPT_OUT_USER_CLOSE_DIALOG:'am_ca_opt_out_user_close_dialog',AM_CA_OPT_OUT_USER_CONTINUE_EDIT_AUDIENCE_CLICK:'am_ca_opt_out_user_continue_edit_audience_click',AM_CA_OPT_OUT_USER_CHOOSE_ANOTHER_FILE_CLICK:'am_ca_opt_out_user_choose_another_file_click',AM_AUDIENCE_MANAGER_VIEW:'am_audience_manager_view',AM_FILTER_BUTTON_CLICKED:'am_filter_button_clicked',AM_FILTER_LEFT_PRESET_CHANGED:'am_filter_left_preset_changed',AM_FILTER_TOKENIZER_CHANGED:'am_filter_tokenizer_changed',AM_FILTER_NAME_SEARCH:'am_filter_name_search',AM_TABLE_ACTION_CREATE_AD_CLICKED:'am_table_action_create_ad_clicked',AM_TABLE_COLUMN_CUSTOMIZE:'am_table_column_customize',AM_TABLE_ACTION_BULK_DELETE_CLICKED:'am_table_action_bulk_delete_clicked',AM_TABLE_ACTION_CREATE_LAL_CLICKED:'am_table_action_create_lal_clicked',AM_TABLE_ACTION_DELETE_CLICKED:'am_table_action_delete_clicked',AM_TABLE_ACTION_EDIT_CLICKED:'am_table_action_edit_clicked',AM_TABLE_ACTION_VIEW_PIXEL_CLICKED:'am_table_action_view_pixel_clicked',AM_TABLE_ACTION_SHARE_CLICKED:'am_table_action_share_clicked',AM_TABLE_SCROLLING_FETCH:'am_table_scrolling_fetch',AM_CREATE_SAVED_AUDIENCE_CLICKED:'am_create_saved_audience_clicked',AM_CREATE_SAVED_AUDIENCE_COMPLETED:'am_create_saved_audience_completed',AM_DETAILS_AUDIENCE_VIEW:'am_details_audience_view',AM_DETAILS_ACTION_CREATE_AD_CLICKED:'am_details_action_create_ad_clicked',AM_DETAILS_SAVE_CLICKED:'am_details_save_clicked',AM_DETAILS_SHARE_CLICKED:'am_details_share_clicked',AM_DETAILS_CREATE_LAL_CLICKED:'am_details_create_lal_clicked'};},null);
__d("AudienceManagerTextInput",["React","XUITextInput.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=g.PropTypes,l=g.createClass({displayName:"AudienceManagerTextInput",propTypes:{value:k.string,onChange:k.func.isRequired,className:k.string,isTextArea:k.bool,placehodler:k.string},getInitialState:function(){return {value:this.props.value};},componentWillReceiveProps:function(m){this.setState({value:m.value});},render:function(){if(this.props.isTextArea){return (g.createElement("textarea",g.__spread({},this.props,{className:j(this.props.className,(("_5oum")+(!this.state.value?' '+"_5p0t":''))),value:this.state.value,onChange:this._onChange})));}else return (g.createElement(h,g.__spread({},this.props,{value:this.state.value,onChange:this._onChange,className:j(this.props.className,"_5rkv")})));},_onChange:function(m){this.setState({value:m.target.value});this.props.onChange(m.target.value);}});e.exports=l;},null);
__d("AudienceManagerURLConstants",[],function(a,b,c,d,e,f){e.exports={CUSTOM_AUDIENCE_TOS:'/ads/manage/customaudiences/tos.php',MACA_LEARN_MORE:'https://developers.facebook.com/docs/ads-for-apps/mobile-app-custom-audiences',MACA_ANDROID_SDK:'https://developers.facebook.com/docs/android/app-events/',MACA_IOS_SDK:'https://developers.facebook.com/docs/ios/app-events/',MACA_ANDROID_ACTIVATE_APP:'https://developers.facebook.com/docs/android/app-events#appActivation',MACA_IOS_ACTIVATE_APP:'https://developers.facebook.com/docs/ios/app-events/#appActivation',MACA_CANVAS_SDK:'https://developers.facebook.com/docs/canvas/appevents',WCA_GETTING_STARTED:'https://www.facebook.com/business/a/online-sales/custom-audiences-website',WCA_TECHNICAL_DOC:'https://developers.facebook.com/docs/ads-for-websites/website-custom-audiences/getting-started',WCA_CONFIGURE_RULES_DOC:'https://developers.facebook.com/docs/ads-for-websites/website-custom-audiences/getting-started#configure-rules',WCA_INSTALL_PIXEL_DOC:'https://developers.facebook.com/docs/ads-for-websites/website-custom-audiences/getting-started#install-the-pixel',WCA_FEEDBACK:'https://www.facebook.com/help/contact/237474373109946',MOBILE_ADVERTISING_IDS_DOC:'https://developers.facebook.com/docs/ads-for-apps/custom-audiences-for-mobile-apps/'};},null);
__d("MobileAppRemarketingAppTypeaheadPresenter.react",["cx","React","ReactPropTypes"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:"Presenter",propTypes:{entries:i.array.isRequired,onSelect:i.func.isRequired},render:function(){if(this.props.entries&&this.props.entries.length){return (h.createElement("ul",{className:"_5e6y"},this.props.entries.map(function(k){return (h.createElement("li",{className:"_5e6z",key:'appTypeahead_'+k.getUniqueID(),onMouseEnter:this.props.onHighlight.bind(null,k),onMouseDown:this.props.onSelect.bind(null,k)},h.createElement("img",{className:"_5eye",src:k.getPhoto()}),h.createElement("div",{className:"_5eyf"},h.createElement("div",{className:"_5e6-"},k.getTitle()),h.createElement("div",{className:"_5oid"},k.getSubtitle()))));}.bind(this))));}else return (h.createElement("ul",null));}});e.exports={maxEntries:10,ViewRenderer:j,useLayer:true};},null);
__d("MobileAppRemarketingAppTypeahead.react",["cx","React","ReactPropTypes","AbstractTypeahead.react","AdsMobileRemarketingAppNameSearchSource","MobileAppRemarketingAppTypeaheadPresenter.react","SearchableEntry","XUICloseButton.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=h.createClass({displayName:"MobileAppRemarketingAppTypeahead",propTypes:{searchSource:i.object,selectedApp:i.instanceOf(m),placeholder:i.string,dao:i.object},getInitialState:function(){return {queryString:''};},componentDidMount:function(){if(this.props.dao)k.getInstance(this.props.dao).bootstrap();},render:function(){var p=this.props.selectedApp,q=this.props.searchSource;if(this.props.dao)q=k.getInstance(this.props.dao);return (h.createElement("div",{className:"_5gfl"},h.createElement("div",{className:(("_5e6_")+(!p?' '+"hidden_elem":''))},h.createElement("img",{className:"_5eyh",src:p&&p.getPhoto()}),h.createElement("div",{className:"_5eyi"},h.createElement("div",{className:"fwb"},p&&p.getTitle()),h.createElement("div",null,p&&p.getSubtitle())),h.createElement(n,{size:"small",className:"_5e70",onClick:this.onAppClose})),h.createElement(j,{className:((!!p?"hidden_elem":'')),placeholder:this.props.placeholder,presenter:l,searchSource:q,queryString:this.state.queryString,onChange:this._onInputChange,onSelectAttempt:this._onSelectAppAttempt,showEntriesOnFocus:true})));},_onInputChange:function(event){this.setState({queryString:event.target.value});},_onSelectAppAttempt:function(p){this.props.appSelected(p);},onAppClose:function(){this.setState({queryString:''});this.props.appSelected(null);}});e.exports=o;},null);
__d("AdsMobileRemarketingEventNameSearchSource",["AbstractSearchSource","SearchableEntry","TokenizeUtil"],function(a,b,c,d,e,f,g,h,i){for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(m,n){"use strict";this.$AdsMobileRemarketingEventNameSearchSource0=m;this.$AdsMobileRemarketingEventNameSearchSource1=n||(function(event){return event.display_name;});}l.prototype.bootstrap=function(m){"use strict";m&&m();};l.prototype.searchImpl=function(m,n){"use strict";var o=this.$AdsMobileRemarketingEventNameSearchSource0.filter(function(event){return !m||i.isQueryMatch(m,event.event_name);}).map(function(event){var p=event.parameters||[],q=new h({uniqueID:event.event_name,title:event.display_name,auxiliaryData:{key:this.$AdsMobileRemarketingEventNameSearchSource1(event),segments:p.map(function(r){var s={};if(r.known_parameter_values)r.known_parameter_values.forEach(function(t){s[t.parameter_value]=t.display_name;});return {uniqueID:r.parameter_name,title:r.display_name,knownValues:s};})}});return q;}.bind(this));o.sort(function(p,q){p=p.getAuxiliaryData().key;q=q.getAuxiliaryData().key;if(i.isExactMatch(p,m)){return -1;}else if(i.isExactMatch(q,m))return 1;return p.toUpperCase()>q.toUpperCase()?1:-1;});n(o,m);};e.exports=l;},null);
__d("MobileAppRemarketingRuleTypeaheadPresenter.react",["cx","React","ReactPropTypes"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:"Presenter",propTypes:{entries:i.array.isRequired,onSelect:i.func.isRequired},render:function(){if(this.props.entries&&this.props.entries.length){return (h.createElement("ul",{className:"_5h93"},this.props.entries.map(function(k){return (h.createElement("li",{key:'ruleTypeahead_'+k.getUniqueID(),onMouseEnter:this.props.onHighlight.bind(null,k),onMouseDown:this.props.onSelect.bind(null,k),className:"_5h94"},h.createElement("div",null,k.getTitle())));}.bind(this))));}else return (h.createElement("ul",null));}});e.exports={maxEntries:10,ViewRenderer:j,useLayer:true};},null);
__d("AudienceManagerAppRemarketingOperatorConfig",[],function(a,b,c,d,e,f){var g=[{value:'eq',text:'is equal to'},{value:'neq',text:'is not equal to'},{value:'lt',text:'is less than'},{value:'gt',text:'is greater than'},{value:'gte',text:'is greater than or equals'},{value:'lte',text:'is less than or equals'},{value:'is_any',text:'is any of'},{value:'is_not_any',text:'is not any of'},{value:'contains',text:'contains substring'},{value:'not_contains',text:'does not contain substring'}];f.operators=g;f.labels={eq:'=',neq:'!=',lt:'<',gt:'>',gte:'>=',lte:'<=',is_any:'any',is_not_any:'not any',contains:'cont.',not_contains:'not cont.'};f.isArray={is_any:true,is_not_any:true};f.getLabelForOperator=function(h){for(var i=0;i<g.length;++i)if(g[i].value===h)return g[i].text;};f.defaultValue='eq';},null);
__d("MobileAppRemarketingParameterView.react",["AbstractTypeahead.react","LeftRight.react","LoadingIndicator.react","MobileAppRemarketingRuleTypeaheadPresenter.react","AudienceManagerAppRemarketingOperatorConfig","React","SearchableEntry","Token.react","TokenizeUtil","XUICloseButton.react","XUISelector.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';var t=q.Option,u=10000,v=l.createClass({displayName:"MobileAppRemarketingParameterView",propTypes:{index:l.PropTypes.number.isRequired,knownValues:l.PropTypes.object,title:l.PropTypes.string.isRequired,onValuesChanged:l.PropTypes.func.isRequired,onOperatorChanged:l.PropTypes.func.isRequired,onParameterRemoved:l.PropTypes.func.isRequired,operator:l.PropTypes.string.isRequired,possibleValues:l.PropTypes.array,possibleValuesLoading:l.PropTypes.bool,values:l.PropTypes.array},getInitialState:function(){var w=this.props.possibleValues||[];return {searchSource:this._constructSearchSource(w),queryString:'',values:[],loadingTimeout:false};},componentWillMount:function(){setTimeout(function(){if(this.props.possibleValuesLoading)this.setState({loadingTimeout:true});}.bind(this),u);},componentWillReceiveProps:function(w){var x=w.possibleValues||[],y=this._constructSearchSource(x);this.setState({searchSource:y});},render:function(){var w="Add a value";if(k.isArray[this.props.operator])w="Add values";var x;if(this.props.possibleValuesLoading&&!this.state.loadingTimeout){x=l.createElement(i,{size:"small",color:"white",className:"_4c97"});}else x=l.createElement(g,{presenter:j,onChange:this._onInputChange,onBlur:this._onBlur,onSelectAttempt:this._onSelectParameterAttempt,placeholder:w,searchSource:this.state.searchSource,queryString:this.state.queryString,showEntriesOnFocus:true});return (l.createElement("div",{className:"_5gop"},l.createElement(h,null,l.createElement("div",{className:"_5goq"},l.createElement("div",{className:"_5svm"},l.createElement("div",{className:"_5h95 _5svn"},this.props.title),this._renderOperatorSelector(this.props.operator),l.createElement("div",{className:"_5svo"})),l.createElement("div",{className:(("_5hms")+(' '+"_5svp")+(!this.props.values.length?' '+"hidden_elem":''))},this._renderTokens()),l.createElement("div",{className:(("_5gos")+(!this._shouldShowParamInput()?' '+"hidden_elem":''))},x)),l.createElement(p,{size:"small",onClick:this._onParameterRemoved,className:"_5got"}))));},_addToken:function(w){if(w){this.setState({queryString:''});if(this.props.values.indexOf(w)>=0)return;this.props.onValuesChanged(this.props.index,this.props.values.concat([w]));}},_constructSearchSource:function(w){return {bootstrap:function(x){x&&x();},exactMatch:function(x){for(var y=0;y<w.length;y++){var z=w[y];if(z.title.toUpperCase()===x.toUpperCase())return new m({uniqueID:z.uniqueID,title:z.title});}return null;},search:function(x,y){w.sort(function(aa,ba){return aa.title.toUpperCase()>ba.title.toUpperCase()?1:-1;});var z=w.filter(function(aa){return !x||o.isQueryMatch(x,aa.title);}).map(function(aa){return new m({uniqueID:aa.uniqueID,title:aa.title});});y(z,x);}};},_onBlur:function(event){var w=this.state.searchSource,x=w.exactMatch(this.state.queryString);if(x){this._addToken(x.getUniqueID());}else this._addToken(this.state.queryString);},_onInputChange:function(event){this.setState({queryString:event.target.value});},_onParameterRemoved:function(){this.props.onParameterRemoved(this.props.index);},_onSelectParameterAttempt:function(event){this._addToken(event.getUniqueID());},_removeToken:function(w){var x=this.props.values.filter(function(y){return y!==w;});this.props.onValuesChanged(this.props.index,x);},_renderOperatorSelector:function(w){return (l.createElement(q,{className:"_5svn _5svq",name:"filter_selector",size:"xlarge",onChange:function(event){this.props.onOperatorChanged(this.props.index,event.value);}.bind(this),value:w},k.operators.map(function(x){return (l.createElement(t,{value:x.value},x.text));})));},_renderTokens:function(){var w=this.props.knownValues||{};return this.props.values.map(function(x){return (l.createElement(n,{label:w[x]||x,removable:true,onRemove:this._removeToken.bind(this,x)}));},this);},_shouldShowParamInput:function(){return k.isArray[this.props.operator]||!this.props.values.length;}});e.exports=v;},null);
__d("MobileAppRemarketingEventView.react",["cx","fbt","AbstractTypeahead.react","BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiSectionDataLoaderMixin","MobileAppRemarketingRuleTypeaheadPresenter.react","AudienceManagerAppRemarketingOperatorConfig","MobileAppRemarketingParameterView.react","React","SearchableEntry","TokenizeUtil","XUICloseButton.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=p.createClass({displayName:"MobileAppRemarketingEventView",mixins:[l],propTypes:{eventDisplayName:p.PropTypes.string.isRequired,event:p.PropTypes.string.isRequired,parameters:p.PropTypes.array.isRequired,onEventClosed:p.PropTypes.func,enableEventParameters:p.PropTypes.bool},getDefaultProps:function(){return {enableEventParameters:true};},getInitialState:function(){var u=this.props.parameters||[];return {selectedParams:[],searchSource:this._constructSearchSource(u),queryString:''};},componentWillReceiveProps:function(u){var v=u.parameters||[],w=this._constructSearchSource(v);this.setState({searchSource:w});},render:function(){return (p.createElement("div",{className:"_5gom"},p.createElement("div",{className:(("_5gon")+(this.props.enableEventParameters?' '+"_1ldq":'')+(' '+"pam"))},p.createElement("div",null,this.props.eventDisplayName),p.createElement(s,{size:"small",className:"_5goo",onClick:this._eventClosed})),this._renderEventParameters()));},_getBonsaiApiBreakdownName:function(u){return u==='_appVersion'?j.APP_VERSION:u;},_renderEventParameters:function(){if(!this.props.enableEventParameters)return null;var u=this.state,v=this.props,w="Optionally add a parameter",x="Optionally add another parameter";return (p.createElement("span",null,p.createElement("div",{style:{display:u.selectedParams.length?'block':'none'}},u.selectedParams.map(this._renderParameterView)),p.createElement("div",{className:((u.selectedParams.length===v.parameters.length?"hidden_elem":'')+(' '+"mvm"))},p.createElement(i,{className:"mlm mtm",placeholder:u.selectedParams.length?x:w,presenter:m,onSelectAttempt:this._onSelectParameterAttempt,searchSource:this.state.searchSource,queryString:u.queryString,onChange:this._onInputChange,showEntriesOnFocus:true}))));},_onSelectParameterAttempt:function(u){if(u.getUniqueID()!=='_valueToSum'){var v=this._getBonsaiApiBreakdownName(u.getUniqueID()),w={event_name:this.props.event,aggregateBy:'COUNT',breakdowns:[v]};this.addMetric([v,w.event_name],'app_event',w);this.fetchMetrics(true);}var x=this.state.selectedParams;x.push({id:u.getUniqueID(),title:u.getTitle(),operator:n.defaultValue,knownValues:u.getAuxiliaryData().knownValues,values:[]});this.setState({selectedParams:x,queryString:''});},_constructSearchSource:function(u){return {bootstrap:function(v){v&&v();},search:function(v,w){u.sort(function(y,z){return y.title.toUpperCase()>z.title.toUpperCase()?1:-1;});var x=u.filter(function(y){return !v||r.isQueryMatch(v,y.title);}).map(function(y){return new q({uniqueID:y.uniqueID,title:y.title,auxiliaryData:{knownValues:y.knownValues}});});w(x,v);}};},_onInputChange:function(event){this.setState({queryString:event.target.value});},_renderParameterView:function(u,v){var w=this._getBonsaiApiBreakdownName(u.id),x=u.operator,y=u.values;if(!n.isArray[x]&&y.length)y.splice(1,y.length-1);var z=false,aa=[],ba=u.knownValues||{};if(u.id!=='_valueToSum'){var ca=this.getRawData([w,this.props.event]);if(ca instanceof k){var da=ca.groupBy(w);aa=Object.keys(da).map(function(ea){return {title:ba[ea]||ea,uniqueID:ea};});}else z=true;}return (p.createElement(o,{index:v,key:'eventParam_'+u.id+v,knownValues:ba,onValuesChanged:this._parameterValuesChanged,onOperatorChanged:this._parameterOperatorChanged,onParameterRemoved:this._paramRemoved,operator:x,possibleValues:aa,possibleValuesLoading:z,title:u.title,values:y}));},_parameterValuesChanged:function(u,v){var w=this.state.selectedParams;w.forEach(function(x,y){if(y===u)x.values=v;});this.setState({selectedParams:w});},_parameterOperatorChanged:function(u,v){var w=this.state.selectedParams;w.forEach(function(x,y){if(y===u){x.operator=v;x.values=[];}});this.setState({selectedParams:w});},_paramRemoved:function(u){var v=this.state.selectedParams.filter(function(w,x){return u!==x;});this.setState({selectedParams:v,queryString:''});},_eventClosed:function(){this.setState(this.getInitialState());this.props.onEventClosed();},getSelectedParams:function(){return this.state.selectedParams;}});e.exports=t;},null);
__d("MobileAppRemarketingRuleSelector.react",["AbstractTypeahead.react","AdInterfacesUiLogger","AdsMobileRemarketingEventNameSearchSource","AudienceManagerLoggingEvents","InfoTable.react","InfoTableRow.react","InfoTableSection.react","MobileAppRemarketingRuleTypeaheadPresenter.react","MobileAppRemarketingEventView.react","React","ReactPropTypes","XUITextInput.react","cx","fbt","isNumberLike"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=p.createClass({displayName:"MobileAppRemarketingRuleSelector",propTypes:{events:q.array,exclusive:q.bool,label:q.string,shouldValidateUI:q.bool.isRequired},getInitialState:function(){return {queryString:'',selectedEvent:null,duration:'7'};},render:function(){var w="Action Taken",x="Action Not Taken",y=this.props.exclusive?x:w,z="Add an event",aa="In The Last",ba=this.state,ca=ba.selectedEvent?ba.selectedEvent.getTitle():'',da=ba.selectedEvent?ba.selectedEvent.getAuxiliaryData().segments:[];return (p.createElement("div",{className:"_5rkp"},p.createElement(k,{className:"_5gfn"},p.createElement(m,null,p.createElement(l,{type:"data",label:y},p.createElement("div",null,p.createElement("div",{className:((!!ba.selectedEvent?"hidden_elem":'')+(this.props.shouldValidateUI?' '+"_5vvv":''))},p.createElement(g,{placeholder:z,presenter:n,onSelectAttempt:this._onSelectEventAttempt,searchSource:new i(this.props.events),queryString:this.state.queryString,onChange:this._onInputChange,showEntriesOnFocus:true})),p.createElement("div",{className:((!ba.selectedEvent?"hidden_elem":''))},p.createElement(o,{ref:"eventView",className:"hidden_elem",onEventClosed:this._closeEvent,eventName:ca,parameters:da})))),p.createElement(l,{label:aa,type:"data"},p.createElement("div",null,p.createElement(r,{value:this.state.duration,onChange:this._durationChanged,className:"_1xio"}),p.createElement("span",{className:"_5se8"},"days")))))));},_onSelectEventAttempt:function(w){h.log(this.props.exclusive?j.AM_MACA_EDITOR_EXCLUSIVE_EVENT_SELECTED:j.AM_MACA_EDITOR_INCLUSIVE_EVENT_SELECTED);this.setState({selectedEvent:w});},_onInputChange:function(event){this.setState({queryString:event.target.value});},_closeEvent:function(){this.setState({selectedEvent:null,queryString:''});},_durationChanged:function(event){var w=event.target.value;if(!w||u(w)){if(w&&w.length>3)w=w.substring(0,3);this.setState({duration:w});}},getRule:function(){var w=this.state;return {retention_days:w.duration,event:w.selectedEvent?w.selectedEvent.getUniqueID():'',params:this.refs.eventView.getSelectedParams()};}});e.exports=v;},null);
__d("BonsaiPercentileStrings",["fbt"],function(a,b,c,d,e,f,g){var h={0:"0th percentile",1:"1st percentile",2:"2nd percentile",3:"3rd percentile",4:"4th percentile",5:"5th percentile",6:"6th percentile",7:"7th percentile",8:"8th percentile",9:"9th percentile",10:"10th percentile",11:"11th percentile",12:"12th percentile",13:"13th percentile",14:"14th percentile",15:"15th percentile",16:"16th percentile",17:"17th percentile",18:"18th percentile",19:"19th percentile",20:"20th percentile",21:"21st percentile",22:"22nd percentile",23:"23rd percentile",24:"24th percentile",25:"25th percentile",26:"26th percentile",27:"27th percentile",28:"28th percentile",29:"29th percentile",30:"30th percentile",31:"31st percentile",32:"32nd percentile",33:"33rd percentile",34:"34th percentile",35:"35th percentile",36:"36th percentile",37:"37th percentile",38:"38th percentile",39:"39th percentile",40:"40th percentile",41:"41st percentile",42:"42nd percentile",43:"43rd percentile",44:"44th percentile",45:"45th percentile",46:"46th percentile",47:"47th percentile",48:"48th percentile",49:"49th percentile",50:"50th percentile",51:"51st percentile",52:"52nd percentile",53:"53rd percentile",54:"54th percentile",55:"55th percentile",56:"56th percentile",57:"57th percentile",58:"58th percentile",59:"59th percentile",60:"60th percentile",61:"61st percentile",62:"62nd percentile",63:"63rd percentile",64:"64th percentile",65:"65th percentile",66:"66th percentile",67:"67th percentile",68:"68th percentile",69:"69th percentile",70:"70th percentile",71:"71st percentile",72:"72nd percentile",73:"73rd percentile",74:"74th percentile",75:"75th percentile",76:"76th percentile",77:"77th percentile",78:"78th percentile",79:"79th percentile",80:"80th percentile",81:"81st percentile",82:"82nd percentile",83:"83rd percentile",84:"84th percentile",85:"85th percentile",86:"86th percentile",87:"87th percentile",88:"88th percentile",89:"89th percentile",90:"90th percentile",91:"91st percentile",92:"92nd percentile",93:"93rd percentile",94:"94th percentile",95:"95th percentile",96:"96th percentile",97:"97th percentile",98:"98th percentile",99:"99th percentile",100:"100th percentile"};e.exports=h;},null);
__d("BonsaiDraggableMarker",["Image.react","React","ReactART","SpectrumDataVisualization","SpectrumUtilities","cx","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=i.Group,p=i.Path,q=i.Shape,r=i.Surface,s=8,t=3,u={NOT_DRAGGING:1,DRAGGING_GRABBED_MARKER:2},v=12,w=11,x=3,y=h.createClass({displayName:"BonsaiDraggableMarker",mixins:[j.Mixin],propTypes:{onPositionChanged:h.PropTypes.func,startX:h.PropTypes.number.isRequired},getInitialState:function(){return {dragging:u.NOT_DRAGGING,highlight:false,x:this.props.startX};},handleEvent:function(z){var aa=this.getX(),ba=this.props.scaleX.invert(z.x),ca=this.newX(ba);if(z.type==='mousedown'){if(this.inBounds(aa,ba)){this.setState({dragging:u.DRAGGING_GRABBED_MARKER,highlight:true,x:ca});this.onPositionChanged(ca);}}else if(z.type==='click'){var da={dragging:u.NOT_DRAGGING,highlight:false};if(this.state.dragging==u.DRAGGING_GRABBED_MARKER){da.x=ca;this.onPositionChanged(ca);}this.setState(da);}else if(z.type==='mousemove')if(this.state.dragging==u.DRAGGING_GRABBED_MARKER){this.setState({x:ca});this.onPositionChanged(ca);}else if(this.inBounds(aa,ba)){this.setState({highlight:true});}else this.setState({highlight:false});},inBounds:function(z,aa){var ba=Math.max(this.props.scaleX.invert(s),1);return z+ba>aa&&z-ba<aa;},getTop:function(){var z=k.getOuterRange(this.props.scaleY);return z[1];},getX:function(){return this.state.x;},newX:function(z){var aa=k.getOuterRange(this.props.scaleX);aa=aa.map(function(ba){return this.props.scaleX.invert(ba);}.bind(this));return Math.max(aa[0],Math.min(z,aa[1]));},onPositionChanged:function(z){this.props.onPositionChanged&&this.props.onPositionChanged(z);},render:function(){var z=this.props.theme.markers,aa=k.getOuterRange(this.props.scaleY),ba=this.props.scaleX(this.state.x),ca=this.getTop(),da=aa[0],ea="_5mn1",fa,ga,ha;if(this.state.highlight){ga=z.highlightColor;ha=z.highlightWidth;fa=p().moveTo(ba,da).lineTo(ba,ca+x);ea=n(ea,"_5mn2");}else{ga=z.lineColor;ha=z.lineWidth;var ia=z.dashSize||t;fa=p().moveTo(ba,da);var ja=(da-ca-v-x)/(ia+2.5);for(var ka=0;ka<ja;ka++)fa.line(0,-ia).move(0,-ia);}var la=(h.createElement(o,null,h.createElement(q,{d:fa,stroke:ga,strokeWidth:ha}))),ma={left:ba-w/2,top:ca-v};return (h.createElement("div",{className:ea},h.createElement(r,{height:this.props.height,width:this.props.width},la),h.createElement(g,{className:"_13q4",style:ma,src:m('images/insights/topslider.png')})));}});e.exports=y;},null);
__d("BonsaiPercentileChart",["BonsaiColors","BonsaiContextualHelp","BonsaiPercentileStrings","BonsaiStyle","SpectrumChart","SpectrumCurrencyScale","BonsaiDraggableMarker","d3/scale/linear","SpectrumLines","React","SpectrumMarkers","SpectrumStackedAreas","SpectrumXAxis","SpectrumYAxis","SpectrumTooltipData","SpectrumTooltipDescription","SpectrumTooltipMenu","cx","fbt","mergeDeep","throttle","mergeHelpers"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){var ba=b('mergeHelpers').ArrayStrategies,ca=735,da=p.createClass({displayName:"BonsaiPercentileChart",propTypes:{data:p.PropTypes.array.isRequired,currency:p.PropTypes.string,event:p.PropTypes.object.isRequired,height:p.PropTypes.number,helptext:p.PropTypes.string,hintPercentilePosition:p.PropTypes.number.isRequired,interval:p.PropTypes.number,onHintPercentileChange:p.PropTypes.func.isRequired,theme:p.PropTypes.object,totalUsers:p.PropTypes.number.isRequired,width:p.PropTypes.number,measurement:p.PropTypes.oneOf(['count','value','spend'])},getInitialState:function(){return {hintPercentilePosition:this.props.hintPercentilePosition};},getPercentileChart:function(){var ea=n();if(this.props.currency)ea=l(this.props.currency);var fa=n().range([0,99]).domain([0,99]).clamp(true);fa.tooltipFormat=function(){return function(ka){return 'p'+ka.toFixed(0);};};fa.secondaryTicks=function(ka){return [0];};fa.tickFormat=function(){var ka=function(la){return 'p'+la;};ka.primary=function(la){return 'p'+la;};ka.secondary=function(){return "Percentile of Users";};return ka;};var ga=z(j.CHART_THEME,this.props.theme,ba.Clobber);ga.areas.hoveBarStrokeWidth=3;ga.lines.colors=[g.GRAY30];ga.lines.markers=false;ga.lines.widths=[1];ga.gutter={right:5};ga.markers={lineWidth:2,dashSize:3};var ha=[],ia=[];for(var ja=99;ja>=0;ja--)if(ja>this.props.hintPercentilePosition){ha[ja]=this.props.data[ja];ia[ja]=null;}else if(ja==this.props.hintPercentilePosition){ha[ja]=ia[ja]=this.props.data[ja];}else{ha[ja]=null;ia[ja]=this.props.data[ja];}return (p.createElement(k,p.__spread({},this.props,{height:this.props.height||j.CHART_HEIGHT,width:this.props.width||ca,domain:[0,99],scaleX:fa,scaleY:ea,theme:ga}),p.createElement(o,{data:[ia]}),p.createElement(r,{data:[ha]}),p.createElement(s,{secondaryTicks:true,ticks:20}),p.createElement(t,null),p.createElement(w,{customFormat:this._formatTooltip}),p.createElement(q,null,p.createElement(m,{onPositionChanged:aa(this.onHintPosChanged,100,this),startX:this.props.hintPercentilePosition}))));},_formatTooltip:function(ea){var fa;switch(this.props.measurement){case 'count':fa="Average Number of Events";break;case 'value':fa="Average Value of Events";break;case 'spend':fa="Average Money Spent";break;}return (p.createElement("div",null,p.createElement(u,null,fa),p.createElement(u,null,ea.yValueString),p.createElement(v,null,i[ea.xValue])));},onHintPosChanged:function(ea){ea=parseInt(ea.toFixed(0),10);this.props.onHintPercentileChange(ea);},render:function(){return (p.createElement("div",null,p.createElement("div",{className:"_5r8_ ptm"},this.getPercentileChart()),p.createElement("div",{className:"_5x4g"},this.getChartHelpText())));},getChartHelpText:function(){if(this.props.helptext){return p.createElement(h,{helpKey:this.props.helptext});}else return p.createElement("noscript",null);}});e.exports=da;},null);
__d("CustomEventSectionDataLoaderMixin",["BonsaiApiBreakdown","d3/time/day","InsightsUtils","copyProperties","mergeArrays","shallowEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=-3,n=-1,o='app_retention_datapoints',p={},q={addCustomEventMetric:function(r,s,t){this._addCustomEventMetricInternal(r,s,t,true);},addUnfilteredCustomEventMetric:function(r,s,t){this._addCustomEventMetricInternal(r,s,t,false);},_addCustomEventMetricInternal:function(r,s,t,u){var v={applyFilters:u,key:s,params:t};this._getStoredMetrics(r).push(v);this._enqueueCustomEventMetric(r,v);},_enqueueCustomEventMetric:function(r,s){var t=this._getKey(s.key,r.event.name),u=j({event_name:r.event.name,since:i.utcTimeToPacificDay(r.visibleDateRange.since),until:i.utcTimeToPacificDay(r.visibleDateRange.until)},s.params);if(s.applyFilters){var v=u.breakdowns||[];u.breakdowns=k(v.slice(0),Object.keys(r.filters).slice(0));}if(Array.isArray(u.breakdowns)&&u.breakdowns.indexOf(g.PERCENTILE)!=-1)u.since=h.utc.offset(r.visibleDateRange.until,m);if(u.custom_metric){if(u.custom_metric===o)u.until=h.utc.offset(r.visibleDateRange.until,n);var w=u.custom_metric;delete u.custom_metric;this.addMetric(t,w,u,null,null,'');}else this.addMetric(t,'app_event',u);},_refetchStoredMetrics:function(r){this.resetMetrics();this._getStoredMetrics(r).forEach(function(s){this._enqueueCustomEventMetric(r,s);}.bind(this),this);this.fetchMetrics();},componentWillReceiveProps:function(r){var s=r.event&&this.props.event.name!=r.event.name,t=r.visibleDateRange&&(this.props.visibleDateRange.since.getTime()!==r.visibleDateRange.since.getTime()||this.props.visibleDateRange.until.getTime()!==r.visibleDateRange.until.getTime()),u=this.willApplyFilters()&&!l(this.props.filters,r.filters),v=this.shouldAutoRefetch();if(v&&(u||s||t))this._refetchStoredMetrics(r);},getUnfilteredCustomEventData:function(r){r=this._getKey(r,this.props.event.name);return this.getData(r);},getUnfilteredCustomEventDataWithName:function(r,s){r=this._getKey(r,s);return this.getData(r);},getCustomEventData:function(r){var s=this.getUnfilteredCustomEventData(r);if(!s)return null;if(this.props.filters&&Object.keys(this.props.filters).length>0)Object.keys(this.props.filters).forEach(function(t){if(t=='custom_breakdown')return;s=s.filterBy(t,'=',[this.props.filters[t]]);},this);return s;},_getKey:function(r,s){return r.concat(s).concat(this.props.cardKey);},_getStoredMetrics:function(r){if(!p[r.cardKey])p[r.cardKey]=[];return p[r.cardKey];}};e.exports=q;},null);
__d("CustomEventPercentilesLoaderMixinResponse",[],function(a,b,c,d,e,f){function g(){"use strict";}g.prototype.setState=function(h){"use strict";this.$CustomEventPercentilesLoaderMixinResponse0=h;};g.prototype.setPayload=function(h){"use strict";this.$CustomEventPercentilesLoaderMixinResponse1=h;};g.prototype.getState=function(){"use strict";return this.$CustomEventPercentilesLoaderMixinResponse0;};g.prototype.getPayload=function(){"use strict";return this.$CustomEventPercentilesLoaderMixinResponse1;};e.exports=g;},null);
__d("CustomEventPercentilesLoaderMixinResponseState",[],function(a,b,c,d,e,f){var g={LOADING:0,ERROR:1,SUCCESS:2,NO_DATA:3};e.exports=g;},null);
__d("CustomEventPercentilesLoaderMixin",["BonsaiApiBreakdown","BonsaiApiDataAdapter","BonsaiApiError","BonsaiApiPromise","BonsaiSectionDataLoaderMixin","BonsaiUtils","CustomEventSectionDataLoaderMixin","CustomEventPercentilesLoaderMixinResponse","CustomEventPercentilesLoaderMixinResponseState"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={mixins:[k,m],willApplyFilters:function(){return false;},fetchPercentileMetrics:function(q,r){this.resetMetrics();this._intervals=r;this._addPercentileMetric('COUNT',q,r);this._addPercentileMetric('SUM',q,r);this._addPercentileMetric('USD_SUM',q,r);r.forEach(function(s){this.addUnfilteredCustomEventMetric(q,['USERS','TOTAL',s],{aggregateBy:'USERS',intervals_to_aggregate:s,period:'daily'});}.bind(this),this);this.fetchMetrics();},_addPercentileMetric:function(q,r,s){s.forEach(function(t){var u={aggregateBy:q,breakdowns:[g.PERCENTILE],period:'daily',intervals_to_aggregate:t},v=[q,t];this.addUnfilteredCustomEventMetric(r,v,u);}.bind(this),this);},_makePercentileArray:function(q){var r=q.getLatest().groupBy(g.PERCENTILE),s=[],t=true;for(var u=0;u<100;u++){var v=r[u]?r[u].getTotal():0;if(v)t=false;s.push(v);}if(t){return null;}else return s;},getTotalUsersData:function(q){if(!this._intervals)return null;var r={};this._intervals.forEach(function(s){var t=this.getUnfilteredCustomEventDataWithName(['USERS','TOTAL',s],q),u=new n();if(t instanceof h){u.setState(o.SUCCESS);u.setPayload(t.getLatestTotal());}else if(t instanceof j){u.setState(o.LOADING);}else{u.setState(o.ERROR);if(t instanceof i)u.setPayload(t.getMessage());}r[s]=u;}.bind(this));return r;},getCountPercentileData:function(q){if(!this._intervals)return null;var r={};this._intervals.forEach(function(s){var t=this.getUnfilteredCustomEventDataWithName(['COUNT',s],q),u=new n();if(t instanceof h){var v=this._makePercentileArray(t);if(v){u.setState(o.SUCCESS);u.setPayload(v);}else u.setState(o.NO_DATA);}else if(t instanceof j){u.setState(o.LOADING);}else{u.setState(o.ERROR);if(t instanceof i)u.setPayload(t.getMessage());}r[s]=u;}.bind(this));return r;},getValuePercentileData:function(q){if(!this._intervals)return null;var r={};this._intervals.forEach(function(s){var t=this.getUnfilteredCustomEventDataWithName(['COUNT',s],q),u=this.getUnfilteredCustomEventDataWithName(['USD_SUM',s],q),v=this.getUnfilteredCustomEventDataWithName(['SUM',s],q),w=[t,u,v],x=w.every(function(ca){return ca instanceof h;}),y=w.some(function(ca){return ca instanceof j;}),z=new n();if(x){z.setState(o.SUCCESS);var aa={};if(l.getSumData(t,u)){aa.isUSD=true;aa.data=this._makePercentileArray(u);}else if(l.getSumData(t,v)){aa.isUSD=false;aa.data=this._makePercentileArray(v);}if(aa.data){z.setPayload(aa);}else z.setState(o.NO_DATA);}else if(y){z.setState(o.LOADING);}else{z.setState(o.ERROR);var ba=u instanceof i?u.getMessage():v instanceof i?v.getMessage():t.getMessage();if(ba)z.setPayload(ba);}r[s]=z;}.bind(this));return r;},isAnyDataLoading:function(q){var r=false;Object.keys(q).forEach(function(s){if(q[s].getState()===o.LOADING)r=true;});return r;},shouldAutoRefetch:function(){return true;}};e.exports=p;},null);
__d("XBonsaiAppEventDataController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/insights\/app_event_data\/",{app_id:{type:"Int",required:true},event:{type:"String",required:true}});},null);
__d("MobileAppRemarketingEventPercentileSentence",["InsightsNumUtils","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:"MobileAppRemarketingEventPercentileSentence",propTypes:{data:h.PropTypes.array.isRequired,event:h.PropTypes.object.isRequired,hintPercentilePosition:h.PropTypes.number.isRequired,measurement:h.PropTypes.oneOf(['count','value']),totalUsers:h.PropTypes.number.isRequired,showHelpText:h.PropTypes.bool},render:function(){var l=100-this.props.hintPercentilePosition,m=parseInt((((100-this.props.hintPercentilePosition)/100)*this.props.totalUsers).toFixed(0),10);return (h.createElement("div",null,h.createElement("div",null,h.createElement("span",{className:"_5snf"},j._("Top {percentage}",[j.param("percentage",l+'%')])),' ',this.props.showHelpText?"(Drag chart slider to change percentage)":null),h.createElement("div",null,this._renderTotalPeopleSentence(m))));},_renderTotalPeopleSentence:function(l){if(this.props.measurement==='count'){return (j._("{user count} people ({percentage of activity} of activity)",[j.param("user count",g.prettyInt(l)),j.param("percentage of activity",this._getPercentageValueOfPercentile()+'%')]));}else return (j._("{user count} people ({percentage of value} of value)",[j.param("user count",g.prettyInt(l)),j.param("percentage of value",this._getPercentageValueOfPercentile()+'%')]));},_getPercentageValueOfPercentile:function(){var l=0,m=0;for(var n=0;n<100;n++){l+=this.props.data[n];if(n>=this.props.hintPercentilePosition)m+=this.props.data[n];}return ((m/l)*100).toFixed(0);}});e.exports=k;},null);
__d("XUICheckboxList.react",["InputLabel.react","ScrollableArea.react","React","XUICheckboxInput.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=i.createClass({displayName:"XUICheckboxList",propTypes:{items:i.PropTypes.array.isRequired,height:i.PropTypes.number},renderItem:function(n){return (i.createElement(g,{key:n.value,className:n.className},i.createElement(j,{disabled:n.disabled,value:n.value,checked:n.checked,onChange:this._onItemChange.bind(this,n)}),i.createElement("label",null,n.label)));},render:function(){var n="_5uy8"+' '+(this.props.className||'');return (i.createElement(h,i.__spread({},this.props,{shadow:false,className:l(this.props.className,n)}),this.props.items.map(this.renderItem)));},_onItemChange:function(n,o){if(n.checked){this.props.onRemove&&this.props.onRemove(n);}else this.props.onAdd&&this.props.onAdd(n);}});e.exports=m;},null);
__d("MobileAppRemarketingEventPercentileChart",["AdInterfacesUiLogger","AppEventClientFilter","AsyncRequest","AudienceManagerErrorView.react","AudienceManagerLoggingEvents","BonsaiPercentileChart","BonsaiText","CustomEventPercentilesLoaderMixin","XBonsaiAppEventDataController","FBMoreLink.react","InfoTable.react","InfoTableRow.react","InfoTableSection.react","InsightsContext","LoadingIndicator.react","MobileAppRemarketingEventPercentileSentence","React","CustomEventPercentilesLoaderMixinResponseState","WebApiApplication","XUICheckboxList.react","XUIRadioList.react","XUISelector.react","XUITextInput.react","adsGKCheck","areEqual","cx","fbt","invariant","isNumberLike","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja){var ka=aa.Item,la=ba.Option,ma=[75,90],na=75,oa=70,pa="In The Last",qa=['1','7','28'],ra='28',sa='all',ta='count',ua='amount',va='usd_amount',wa={},xa=['fb_mobile_first_app_launch'],ya="Include",za={all:"All Users",count:"Most Active Users",amount:"Highest Value Users"},ab="Filter by platform",bb=w.createClass({displayName:"MobileAppRemarketingEventPercentileChart",mixins:[n],propTypes:{appID:w.PropTypes.number.isRequired,eventName:w.PropTypes.string.isRequired,initialInterval:w.PropTypes.number,initialMeasurement:w.PropTypes.string,initialPercentile:w.PropTypes.number,onMeasurementChange:w.PropTypes.func,width:w.PropTypes.number},getInitialState:function(){var cb=na,db=oa;if(this.props.initialPercentile)if(ma.indexOf(this.props.initialPercentile)!==-1){cb=this.props.initialPercentile;}else{cb='custom';db=this.props.initialPercentile;}var eb=ja(h),fb=[eb.android,eb.ios];if(da('insights_canvas_events'))fb.push(eb.fbcanvas);fb.push(eb.other);var gb={};fb.forEach(function(hb){gb[hb]=true;});return {durationInput:ra,durationSelector:ra,event:null,measurement:this.props.initialMeasurement||sa,percentileRadio:cb,percentileChart:db,showClientFilters:false,selectedClientFilters:gb};},componentWillMount:function(){var cb=y.getAccessToken(),db=y.getClientID();ha(cb&&db);t.setBonsaiApiAccess(cb,db);this._loadData(this.props);},componentWillReceiveProps:function(cb){if(cb.appID!==this.props.appID||cb.eventName!==this.props.eventName||cb.interval!==this.props.interval)this._loadData(cb);},shouldComponentUpdate:function(cb,db){return (cb.appID!==this.props.appID||cb.eventName!==this.props.eventName||cb.interval!==this.props.interval||!ea(db,this.state));},render:function(){if(this._supportsWhaleRules(this.props.eventName)&&(!this.state.event||!this._getAvailableMeasurements()))return this._renderLoadingIndicator();var cb=this.state.measurement!==sa;return (w.createElement("div",null,w.createElement("div",{className:"_5rkp"},w.createElement(q,{className:"_5gfn"},w.createElement(s,null,this._supportsWhaleRules(this.props.eventName)?this._renderMeasurementSelector():null,w.createElement(r,{className:((cb?"_2ozd":'')),label:pa,type:"data"},cb?this._renderDurationSelector():this._renderDurationText()),this._renderClientFilters(cb)))),cb?this._renderChart():null));},_renderClientFilters:function(cb){if(cb)return null;var db=w.createElement(p,{moreLabel:ab,lessLabel:ab,allowToggle:true,onClick:this._onToggleClientFilters,isInitiallyCollapsed:true});if(!this.state.showClientFilters)return (w.createElement(r,null,db));var eb=Object.keys(this.state.selectedClientFilters).map(function(fb){return {value:fb,label:m.breakdown.client[fb],checked:this.state.selectedClientFilters[fb]};}.bind(this));return (w.createElement(r,null,w.createElement("div",null,w.createElement("div",null,db),w.createElement("div",null,w.createElement(z,{items:eb,onAdd:this._onAddClientFilter,onRemove:this._onRemoveClientFilter})))));},_supportsWhaleRules:function(cb){return xa.indexOf(cb)===-1;},_isLoadingInsightsData:function(){var cb=this.state.event.name,db=this.getTotalUsersData(cb),eb=this.getCountPercentileData(cb),fb=this.getValuePercentileData(cb);if(!db||!eb||!fb||this.isAnyDataLoading(eb)||this.isAnyDataLoading(fb))return true;var gb=this.state.durationSelector,hb=db[gb],ib=eb[gb],jb=fb[gb];if(!hb||!ib||!jb)return true;return false;},_getAvailableMeasurements:function(){var cb=this.state.event.name;if(wa[this.props.appID]&&wa[this.props.appID][cb])return wa[this.props.appID][cb];var db=this.getValuePercentileData(cb);if(!db)return null;var eb=false,fb=false,gb=false;Object.keys(db).forEach(function(ib){var jb=db[ib];if(jb.getState()===x.SUCCESS||jb.getState()===x.NO_DATA)eb=true;if(jb.getState()===x.SUCCESS){fb=true;gb=jb.getPayload().isUSD;}});if(!eb)return null;var hb=[sa,ta];if(gb){hb.push(va);}else hb.push(ua);if(!wa[this.props.appID])wa[this.props.appID]={};wa[this.props.appID][cb]=hb;return hb;},_renderChart:function(){if(this._isLoadingInsightsData())return this._renderLoadingIndicator();var cb=this.state.event.name,db=this.getTotalUsersData(cb),eb=this.state.measurement===ta?this.getCountPercentileData(cb):this.getValuePercentileData(cb),fb=this.state.durationSelector,gb=eb[fb],hb=db[fb];if(gb.getState()===x.ERROR||hb.getState()===x.ERROR){var ib;if(gb.getState()===x.ERROR){ib=gb.getPayload();}else ib=hb.getPayload();return (w.createElement(j,{shown:true,message:ib}));}if(gb.getState()===x.NO_DATA)return this._renderNoDataMessage();var jb=this.state.measurement===ta?gb.getPayload():gb.getPayload().data,kb=hb.getPayload(),lb=this.state.measurement===va?'USD':null,mb;if(this.state.measurement===ta){mb='count';}else if(cb==='fb_mobile_purchase'){mb='spend';}else mb='value';return (w.createElement("div",{className:"_409d"},this.state.measurement!==sa?this._renderPercentileRadio(jb,kb):null,this.state.percentileRadio==='custom'?w.createElement(l,{className:"_5688",currency:lb,data:jb,event:this.state.event,hintPercentilePosition:this.state.percentileChart,interval:parseInt(fb,10),key:'day_'+fb,measurement:mb,onHintPercentileChange:this._onPercentileChartChange,totalUsers:kb,width:this.props.width}):null));},_renderDurationText:function(){return (w.createElement("div",null,w.createElement(ca,{className:"_1xio",onChange:this._onDurationTextChange,value:this.state.durationInput}),w.createElement("span",{className:"_5se8"},"days")));},_renderDurationSelector:function(){var cb=[];qa.forEach(function(db){cb.push(w.createElement(la,{key:db,value:db},db==1?"1 day":ga._("{days} days",[ga.param("days",db)])));});return (w.createElement(ba,{onChange:this._onDurationSelectorChange,value:this.state.durationSelector},cb));},_renderMeasurementSelector:function(){var cb=this._getAvailableMeasurements(),db=[];cb.forEach(function(fb){var gb;if(fb===ua||fb===va){gb=za[ua];}else gb=za[fb];db.push(w.createElement(la,{value:fb,key:fb},gb));});var eb=this.state.measurement;if(eb==='amount'&&cb.indexOf('amount')===-1)eb='usd_amount';return (w.createElement(r,{className:"_2ozd",label:ya,type:"data"},w.createElement(ba,{onChange:this._onMeasurementChange,value:eb},db)));},_renderPercentileRadio:function(cb,db){var eb=this.state.measurement===ta?'count':'value',fb=[];ma.forEach(function(gb){fb.push(w.createElement(ka,{key:'radio'+gb,value:gb},w.createElement(v,{data:cb,event:this.state.event,hintPercentilePosition:gb,measurement:eb,totalUsers:db})));}.bind(this));fb.push(w.createElement(ka,{key:"radiocustom",value:"custom"},this.state.percentileRadio==='custom'?w.createElement("div",null,w.createElement(v,{data:cb,event:this.state.event,hintPercentilePosition:this.state.percentileChart,measurement:eb,totalUsers:db,showHelpText:true})):"Custom percentage"));return (w.createElement(aa,{className:"_409h",onChange:this._onPercentileRadioChange,selectedValue:this._getSelectedPercentileRadioValue()},fb));},_getSelectedPercentileRadioValue:function(){if(this.state.percentileRadio===0||ma.indexOf(this.state.percentileRadio)!==-1)return this.state.percentileRadio;return 'custom';},_renderLoadingIndicator:function(){return (w.createElement("div",{className:"_409i"},w.createElement(u,{size:"large",color:"blue"})));},_renderNoDataMessage:function(){g.log(k.AM_MACA_EDITOR_NO_PERCENTILE_DATA);return (w.createElement("div",null,w.createElement(j,{shown:true,message:"There is no data to show for this event"})));},_onMeasurementChange:function(cb){if(cb.value===ta){g.log(k.AM_MACA_EDITOR_INCLUDE_MOST_ACTIVE);}else if(cb.value===ua||cb.value===va)g.log(k.AM_MACA_EDITOR_INCLUDE_HIGHEST_VALUE);this.setState({measurement:cb.value});if(this.props.onMeasurementChange)this.props.onMeasurementChange(cb.value);},_onDurationSelectorChange:function(cb){this.setState({durationSelector:cb.value});this._loadEventMetrics(this.props);},_onDurationTextChange:function(event){var cb=event.target.value;if(!cb||ia(cb)){if(cb&&cb.length>3)cb=cb.substring(0,3);this.setState({durationInput:cb});}},_onPercentileRadioChange:function(event){if(event.target.value==='custom')g.log(k.AM_MACA_EDITOR_SHOW_PERCENTILE_CHART);var cb=event.target.value!=='custom'?parseInt(event.target.value,10):'custom';this.setState({percentileRadio:cb});},_onPercentileChartChange:function(cb){this.setState({percentileChart:cb});},_loadData:function(cb){if(this.state.event&&this.state.event.name===cb.eventName){this._loadEventMetrics(cb);return;}new i(o.getURIBuilder().setInt('app_id',this.props.appID).setString('event',this.props.eventName).getURI()).setHandler(function(db){this.setState({event:db.payload});this._loadEventMetrics(cb);}.bind(this)).send();},_loadEventMetrics:function(cb){t.setObjID(cb.appID);cb.event=this.state.event;this.fetchPercentileMetrics(cb,[this.state.durationSelector]);},_onToggleClientFilters:function(){this.setState({showClientFilters:!this.state.showClientFilters});},_onAddClientFilter:function(cb){var db=Object.assign({},this.state.selectedClientFilters);db[cb.value]=true;this.setState({selectedClientFilters:db});},_onRemoveClientFilter:function(cb){var db=Object.assign({},this.state.selectedClientFilters);db[cb.value]=false;this.setState({selectedClientFilters:db});},getCumulativeRule:function(){var cb=this.state.percentileRadio!=='custom'?this.state.percentileRadio:this.state.percentileChart;if(this.state.measurement===sa||cb===0)return null;g.log(k.AM_MACA_EDITOR_CREATE_WHALE_AUDIENCE_ATTEMPT);return {metric:this.state.measurement,period:this.state.durationSelector+'d',technique:{technique_name:'percentile',lower_bound:cb}};},getDuration:function(){var cb=this.state.measurement===sa?this.state.durationInput:this.state.durationSelector;return parseInt(cb,10);},getClientFilters:function(){var cb=Object.keys(this.state.selectedClientFilters).filter(function(db){return this.state.selectedClientFilters[db];}.bind(this));if(cb.length===Object.keys(this.state.selectedClientFilters).length)return null;return cb;}});e.exports=bb;},null);
__d("MobileAppRemarketingWhaleRuleSelector.react",["AbstractTypeahead.react","AdsMobileRemarketingEventNameSearchSource","InsightsContext","InfoTable.react","InfoTableRow.react","InfoTableSection.react","MobileAppRemarketingEventPercentileChart","MobileAppRemarketingRuleTypeaheadPresenter.react","MobileAppRemarketingEventView.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=541,t="Action Taken",u="Action Not Taken",v=p.createClass({displayName:"MobileAppRemarketingWhaleRuleSelector",propTypes:{appID:p.PropTypes.number,events:p.PropTypes.array,initialEventName:p.PropTypes.string,initialDuration:p.PropTypes.string,initialMeasurement:p.PropTypes.string,initialPercentile:p.PropTypes.string,shouldValidateUI:p.PropTypes.bool.isRequired,type:p.PropTypes.oneOf(['inclusion','exclusion'])},getInitialState:function(){return {enableEventParams:!this.props.initialPercentile,initialDuration:this.props.initialDuration,initialMeasurement:this.props.initialMeasurement,initialPercentile:this.props.initialPercentile,queryString:'',selectedEvent:null};},componentWillMount:function(){if(this.props.initialEventName){var w=new h(this.props.events,function(event){return event.event_name;});w.search(this.props.initialEventName,function(x){if(x&&x.length>0)this.setState({selectedEvent:x[0]});}.bind(this));}},render:function(){var w=this.props.type==='inclusion'?t:u,x="Add an action",y=this.state.selectedEvent?this.state.selectedEvent.getTitle():'',event=this.state.selectedEvent?this.state.selectedEvent.getUniqueID():'',z=this.state.selectedEvent?this.state.selectedEvent.getAuxiliaryData().segments:[];return (p.createElement("div",null,p.createElement("div",{className:"_5rkp"},p.createElement(j,{className:"_5gfn"},p.createElement(l,null,p.createElement(k,{type:"data",label:w},p.createElement("div",null,p.createElement("div",{className:((!!this.state.selectedEvent?"hidden_elem":'')+(this.props.shouldValidateUI?' '+"_5vvv":''))},p.createElement(g,{placeholder:x,presenter:n,onSelectAttempt:this._onSelectEventAttempt,searchSource:new h(this.props.events,function(event){return event.display_name;}),queryString:this.state.queryString,onChange:this._onInputChange,showEntriesOnFocus:true})),p.createElement("div",{className:((!this.state.selectedEvent?"hidden_elem":''))},p.createElement(o,{enableEventParameters:this.state.enableEventParams,eventDisplayName:y,event:event,fullDateRange:i.getFullDateRange(),onEventClosed:this._closeEvent,parameters:z,ref:"eventView"}))))))),this._renderPercentileChart()));},_renderPercentileChart:function(){if(!this.state.selectedEvent)return null;var w=this.state.initialPercentile&&parseInt(this.state.initialPercentile,10);return (p.createElement(m,{appID:this.props.appID,eventName:this.state.selectedEvent.getUniqueID(),fullDateRange:i.getFullDateRange(),initialInterval:parseInt(this.state.initialInterval,10),initialMeasurement:this.state.initialMeasurement,initialPercentile:w,key:"percentileChart",onMeasurementChange:this._onMeasurementChange,ref:"percentileChart",width:s,visibleDateRange:i.getDefaultVisibleDateRange()}));},_onSelectEventAttempt:function(w){this.setState({enableEventParams:true,initialDuration:null,initialMeasurement:null,initialPercentile:null,selectedEvent:w});},_onInputChange:function(event){this.setState({queryString:event.target.value});},_onMeasurementChange:function(w){this.setState({enableEventParams:w==='all'});},_closeEvent:function(){this.setState({selectedEvent:null,queryString:''});},getRule:function(){if(!this.state.selectedEvent)return null;var w={retention_days:this.refs.percentileChart.getDuration(),event:this.state.selectedEvent.getUniqueID(),params:this.refs.eventView.getSelectedParams()},x=this.refs.percentileChart.getCumulativeRule();if(x){w.cumulativeRule=x;}else w.clientFilters=this.refs.percentileChart.getClientFilters();return w;}});e.exports=v;},null);
__d("AdsCreateMobileRemarketingAudienceViewV2.react",["AdInterfacesUiLogger","AdsMobileRemarketingAppNameSearchSource","AudienceManagerErrorView.react","AudienceManagerLoggingEvents","AudienceManagerTextInput","AudienceManagerURLConstants","InfoTable.react","InfoTableRow.react","InfoTableSection.react","Link.react","MobileAppRemarketingAppTypeahead.react","MobileAppRemarketingRuleSelector.react","MobileAppRemarketingWhaleRuleSelector.react","React","XUIMenuStaticItem.react","XUISelector.react","XUITextInput.react","adsGKCheck","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var aa=v.Option,ba='action_taken_activity',ca='action_not_taken_activity',da='combined_action_activity',ea='fb_mobile_activate_app',fa=180,ga=t.createClass({displayName:"AdsCreateMobileRemarketingAudienceViewV2",propTypes:{searchSource:t.PropTypes.object,dao:t.PropTypes.object,error:t.PropTypes.string,shouldValidateUI:t.PropTypes.bool.isRequired,defaultMobileApp:t.PropTypes.object,config:t.PropTypes.object},componentWillMount:function(){if(this.props.config){this._loadConfig(this.props.config);}else if(this.props.defaultMobileApp!==null)this._appSelected(this.props.defaultMobileApp);},getInitialState:function(){return {selectedActivity:null,selectedApp:null,selectedRules:null,events:null,name:'',description:''};},render:function(){var ha="Name",ia="App",ja="Enter an App name";return (t.createElement("div",{className:"_5ezu"},t.createElement("div",{className:"_5rkp"},t.createElement(m,{className:"_5oht"},t.createElement(o,null,t.createElement(n,{label:ha,type:"data"},t.createElement("div",null,t.createElement(w,{value:this.state.name,onChange:this._nameChanged,className:((!this.state.name&&this.props.shouldValidateUI?"_5vvv":'')),placeholder:"Name your audience"}))),t.createElement(n,{label:"Description"},t.createElement(k,{isTextArea:true,className:"_5w16",value:this.state.description,placeholder:"Add an optional description of your audience",onChange:this._descriptionChanged})),t.createElement(n,{label:ia},t.createElement("div",{className:((!this.state.selectedApp&&this.props.shouldValidateUI?"_5vvv":''))},t.createElement(q,{dao:this.props.dao,searchSource:this.props.searchSource,selectedApp:this.state.selectedApp,appSelected:this._appSelected,placeholder:ja}))),t.createElement(n,{className:((!this.state.selectedApp||!this.state.events?"hidden_elem":''))},t.createElement("div",null,t.createElement("div",{className:"pbs"},"Create a list of people based on their activity in your app"),t.createElement("div",null,t.createElement(v,{disabled:!this.state.selectedApp,onChange:this._activitySelected,value:this.state.selectedActivity},this._renderActivityTypeOptions()))))))),this._renderRuleSelectors(),t.createElement(i,{shown:this.state.selectedApp&&!this.state.events,message:"This app doesn't log any events."}),t.createElement(i,{shown:!!this.props.error,message:this.props.error})));},_nameChanged:function(event){this.setState({name:event.target.value});},_descriptionChanged:function(ha){this.setState({description:ha});},_appSelected:function(ha,ia){if(!ha){this.setState({selectedApp:ha});return;}this.props.dao.fetch.appEventTypesForApp.one(function(ja){if(ja&&ja.length>0){g.log(j.AM_MACA_EDITOR_APP_SELECTED);}else g.log(j.AM_MACA_EDITOR_APP_NO_EVENTS);this.setState({selectedApp:ha,selectedRules:null,events:ja});ia&&ia();}.bind(this),{fbid:ha.getUniqueID()});},_activitySelected:function(ha){var ia;switch(ha.value){case ba:ia=j.AM_MACA_EDITOR_ACTION_TAKEN_ACTIVITY_SELECTED;break;case ca:ia=j.AM_MACA_EDITOR_ACTION_NOT_TAKEN_ACTIVITY_SELECTED;break;case da:ia=j.AM_MACA_EDITOR_COMBINATION_ACTION_ACTIVITY_SELECTED;break;}if(ia)g.log(ia);this.setState({selectedActivity:ha.value});},_renderActivityTypeOptions:function(){return [t.createElement(u,{className:"_4g1e"},"Select one"),t.createElement(aa,{key:ba,value:ba},"Action taken"),t.createElement(aa,{key:ca,value:ca},"Action not taken"),t.createElement(aa,{key:da,value:da},"Combined action")];},_renderRuleSelectors:function(){if(!this.state.selectedApp||!this.state.events||!this.state.selectedActivity)return null;var ha=x('am_maca_whale_ui'),ia=[];switch(this.state.selectedActivity){case ba:var ja=null,ka=null,la=null,ma=null;if(this.state.selectedRules&&this.state.selectedRules.inclusion){var na=this.state.selectedRules.inclusion;ja=na.event;ka=na.days;la=na.percentile;ma=na.measurement;}ia.push(ha?t.createElement(s,{appID:parseInt(this.state.selectedApp.getUniqueID(),10),shouldValidateUI:this.props.shouldValidateUI,events:this.state.events,initialEventName:ja,initialDuration:ka,initialMeasurement:ma,initialPercentile:la,key:"actionTakenRule",ref:"ruleSelectorInclusive",type:"inclusion"}):t.createElement(r,{shouldValidateUI:this.props.shouldValidateUI,events:this.state.events,key:"actionTakenRule",ref:"ruleSelectorInclusive"}));break;case ca:var oa=this.state.events.filter(function(event){return event.event_name===ea;})[0];if(!oa)return this._renderActionNotTakenUpsell();ia.push(ha?t.createElement(s,{appID:parseInt(this.state.selectedApp.getUniqueID(),10),shouldValidateUI:this.props.shouldValidateUI,events:this.state.events,key:"actionNotTakenRule",ref:"ruleSelectorExclusive",type:"exclusion"}):t.createElement(r,{shouldValidateUI:this.props.shouldValidateUI,exclusive:true,events:this.state.events,key:"actionNotTakenRule",ref:"ruleSelectorExclusive"}));break;case da:ia.push(ha?t.createElement(s,{appID:parseInt(this.state.selectedApp.getUniqueID(),10),shouldValidateUI:this.props.shouldValidateUI,events:this.state.events,key:"comboActionTakenRule",ref:"ruleSelectorInclusive",type:"inclusion"}):t.createElement(r,{shouldValidateUI:this.props.shouldValidateUI,events:this.state.events,key:"comboActionTakenRule",ref:"ruleSelectorInclusive"}));ia.push(ha?t.createElement(s,{appID:parseInt(this.state.selectedApp.getUniqueID(),10),shouldValidateUI:this.props.shouldValidateUI,events:this.state.events,key:"comboActionNotTakenRule",ref:"ruleSelectorExclusive",type:"exclusion"}):t.createElement(r,{exclusive:true,key:"comboActionNotTakenRule",shouldValidateUI:this.props.shouldValidateUI,events:this.state.events,ref:"ruleSelectorExclusive"}));break;}return (t.createElement("div",null,t.createElement("div",{className:"_5svv"}),ia));},_renderActionNotTakenUpsell:function(){g.log(j.AM_MACA_ACTIVATE_APP_UPSELL_SHOWN);return (t.createElement("div",null,t.createElement("div",{className:"_5svv"}),t.createElement(i,{shown:true,message:"This app does not log app activation events."}),t.createElement("div",{className:"pam"},z._("This is required to create custom audiences based on an action not taken. See {app activation info link for iOS} or {app activation info link for Android} for more information.",[z.param("app activation info link for iOS",t.createElement(p,{href:l.MACA_IOS_ACTIVATE_APP,target:"_blank"},"App Activations For iOS")),z.param("app activation info link for Android",t.createElement(p,{href:l.MACA_ANDROID_ACTIVATE_APP,target:"_blank"},"App Activations For Android"))]))));},_loadConfig:function(ha){var ia=h.getInstance(this.props.dao);ia.searchImpl(ha.rule.application,function(ja){if(ja&&ja.length>0)this._appSelected(ja[0],function(){var ka={inclusion:{event:ha.rule.eventName,days:ha.rule.days,percentile:ha.rule.percentile,measurement:ha.rule.measurement}};this.setState({selectedActivity:ba,selectedRules:ka});}.bind(this));}.bind(this));},getCreationParams:function(){var ha=this.state,ia={name:ha.name,description:ha.description,application:ha.selectedApp&&ha.selectedApp.getUniqueID()};if(this.state.selectedActivity===ca){ia.inclusions=[this._getActivatedAppRule()];}else if(this.refs.ruleSelectorInclusive)ia.inclusions=[this.refs.ruleSelectorInclusive.getRule()];if(this.refs.ruleSelectorExclusive)ia.exclusions=[this.refs.ruleSelectorExclusive.getRule()];return ia;},_getActivatedAppRule:function(){return {event:ea,params:[],retention_days:fa};},clearState:function(){this.setState(this.getInitialState());}});e.exports=ga;},null);
__d("AdsMobileRemarketingRuleOperations",["AudienceManagerAppRemarketingOperatorConfig","copyProperties","fbt","mergeArrays"],function(a,b,c,d,e,f,g,h,i,j){var k=function(o,p){if(!o.event)return false;var q=o.retention_days;if(!q||(parseInt(q,10)!=parseFloat(q,10))||q<1||q>180){p("Days to stay in list must be an integer between 1 and 180");return false;}var r=o.params.filter(function(s){return s.values&&!s.values.length;});if(r.length){p("Parameter value required");return false;}return true;};f.validateCombinationRule=function(o,p){if(!o.name||!o.application||(!o.inclusions&&!o.exclusions))return false;var q=[];if(o.inclusions)q=j(q,o.inclusions);if(o.exclusions)q=j(q,o.exclusions);for(var r=0;r<q.length;r++){var s=q[r];if(!k(s,p))return false;}return true;};f.validateRule=function(o,p){if(!o.name||!o.application||!o.rule.event)return false;return k(o.rule);};var l=function(o){var p={};o.forEach(function(q){if(!p[q.id])p[q.id]=[];var r;if(g.isArray[q.operator]){r=q.values;}else r=q.values[0];var s={};s[q.operator]=r;p[q.id].push(s);});return Object.keys(p).map(function(q){var r=p[q].map(function(s){var t={};t[q]=s;return t;});return {and:r};});};f.transformUIParamsToAPIRule=l;var m=function(o,p){if(o.cumulativeRule)return n(o,p);var q={retention_days:o.retention_days,type:'app',rule:{_application:p,_eventName:o.event}},r=l(o.params);if(r&&r.length)q.rule.and=r;if(o.clientFilters)q.rule._clientFilters=o.clientFilters;return q;},n=function(o,p){var q={retention_days:o.retention_days,type:'app',rule:{_application:p,_eventName:o.event,_cumulativeRule:o.cumulativeRule}};return q;};f.getUploadParams=function(o,p){var q={name:o.name,description:o.description,handleError:function(r,s){var t=s.error&&s.error.message;p(t);}.bind(this)};h(q,m(o.rule,o.application));return q;};f.getCombinationUploadParams=function(o,p){var q={name:o.name,description:o.description,handleError:function(r,s){var t=s.error&&s.error.message;p(t);}.bind(this)};if(o.inclusions){q.inclusions=[];o.inclusions.forEach(function(r){q.inclusions.push(m(r,o.application));});}if(o.exclusions){q.exclusions=[];o.exclusions.forEach(function(r){q.exclusions.push(m(r,o.application));});}return q;};},null);
__d("XRemarketingTOSController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/customaudiences\/app\/tos\/",{act:{type:"Int"},account_id:{type:"Int"}});},null);
__d("AdsCreateMobileRemarketingAudienceDialog.react",["AdsCreateMobileRemarketingAudienceViewV2.react","AdInterfacesUiLogger","AudienceManagerLoggingEvents","AudienceManagerUIConstants","AudienceManagerURLConstants","LayerHideOnEscape","Link.react","React","ReactLayeredComponentMixin","AdsMobileRemarketingRuleOperations","XRemarketingTOSController","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogOkayButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUISpinner.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){var ba=n.PropTypes,ca={NUX_DIALOG:1,CREATE_AUDIENCE_DIALOG:2,CREATE_AUDIENCE_REQUEST_SENT:3,CREATE_AUDIENCE_REQUEST_COMPLETE:4},da=n.createClass({displayName:"AdsCreateMobileRemarketingAudienceDialog",mixins:[o],propTypes:{dao:ba.object.isRequired,accountID:n.PropTypes.string.isRequired,config:ba.object,onAudienceAdded:ba.func.isRequired,onCancel:ba.func.isRequired,tosAccepted:ba.object.isRequired,tosRequirementsForAccount:ba.object.isRequired,defaultMobileApp:ba.object},getInitialState:function(){return {viewState:ca.NUX_DIALOG,termsAccepted:false,error:null,shouldValidateUI:false};},render:function(){return n.createElement("span",null);},renderLayers:function(){return {dialog:n.createElement(r,{layerHideOnBlur:false,shown:true,behaviors:{LayerHideOnEscape:l},width:j.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},n.createElement(x,null,this._renderDialogTitle()),n.createElement(s,null,n.createElement("div",{className:"_5rkr"},this._renderDialogBody())),n.createElement(v,{leftContent:this._renderDialogFooterLeftContent()},this._renderFooter()))};},_renderDialogBody:function(){switch(this.state.viewState){case ca.NUX_DIALOG:return (n.createElement("div",null,n.createElement("div",null,n.createElement("p",null,"Create a custom audience to reach people who take specific actions in your app - like reaching a specific level in a game, adding items to their cart or rating your app."),n.createElement("p",null,aa._("Start measuring events in your app by integrating our SDK for {ios-link}, {android-link}, and {canvas-link}. Every time someone takes the specified action within your app, they will be added to your Custom Audience.",[aa.param("ios-link",n.createElement(m,{href:k.MACA_IOS_SDK,target:"_blank"},"iOS")),aa.param("android-link",n.createElement(m,{href:k.MACA_ANDROID_SDK,target:"_blank"},"Android")),aa.param("canvas-link",n.createElement(m,{href:k.MACA_CANVAS_SDK,target:"_blank"},"Canvas"))]))),n.createElement("div",null,n.createElement("input",{type:"checkbox",checked:this._getIsTosAccepted()||this.state.termsAccepted,onChange:this._termsCheckboxChanged,disabled:this._getIsTosAccepted()},aa._("I have read and accepted the {=Terms for Custom Audience from your App and Website}",[aa.param("=Terms for Custom Audience from your App and Website",n.createElement(m,{target:"_blank",href:(q.getURIBuilder()).setInt('act',this.props.accountID).getURI()},"Terms for Custom Audience from your App and Website"))])))));case ca.CREATE_AUDIENCE_DIALOG:case ca.CREATE_AUDIENCE_REQUEST_SENT:return (n.createElement(g,{config:this.props.config,dao:this.props.dao,ref:"view",error:this.state.error,shouldValidateUI:this.state.shouldValidateUI,defaultMobileApp:this.props.defaultMobileApp}));case ca.CREATE_AUDIENCE_REQUEST_COMPLETE:return (n.createElement("div",{className:"_5saq"},n.createElement("div",{className:"_5svr _5svs"},"Thank You for Creating a Custom Audience"),n.createElement("p",null,"Your audience is ready.")));}},_renderDialogTitle:function(){switch(this.state.viewState){case ca.CREATE_AUDIENCE_REQUEST_COMPLETE:return ("Custom Audience from your Mobile App Created");default:return ("Create a Custom Audience from your App");}},_renderFooter:function(){switch(this.state.viewState){case ca.NUX_DIALOG:return (n.createElement("div",null,n.createElement(t,null),n.createElement(w,{use:"confirm",action:"confirm",onClick:this._onNuxCreateClick,disabled:!this.state.termsAccepted&&!this._getIsTosAccepted(),label:"Create Audience"})));case ca.CREATE_AUDIENCE_DIALOG:return (n.createElement("div",null,n.createElement(t,null),n.createElement(w,{use:"confirm",action:"confirm",onClick:this._onCreateClick,label:"Create Audience"})));case ca.CREATE_AUDIENCE_REQUEST_SENT:return (n.createElement("div",null,n.createElement(y,{className:"_5jy4",size:"small",background:"light"}),n.createElement(t,{disabled:true}),n.createElement(w,{use:"confirm",action:"confirm",onClick:this._onCreateClick,disabled:true,label:"Create Audience"})));case ca.CREATE_AUDIENCE_REQUEST_COMPLETE:return n.createElement(u,{use:"confirm",action:"cancel"});}},_renderDialogFooterLeftContent:function(){switch(this.state.viewState){case ca.NUX_DIALOG:return (n.createElement(m,{href:k.MACA_LEARN_MORE,target:"_blank"},"Learn More"));default:return n.createElement("span",null);}},_onNuxCreateClick:function(){if(!this._getIsTosAccepted())this._acceptTos();h.log(i.AM_MACA_NUX_CREATE_AUDIENCE);this.setState({viewState:ca.CREATE_AUDIENCE_DIALOG});},_acceptTos:function(){this.props.dao.add.acceptCustomAudiencesTos.one(function(){},{accountId:this.props.accountID,tos_id:this.props.tosRequirementsForAccount.mobile_app_custom_audience});},_onCreateClick:function(){this.setState({shouldValidateUI:true});var ea=this.refs.view.getCreationParams(),fa=p.validateCombinationRule(ea,function(ha){this.setState({error:ha,viewState:ca.CREATE_AUDIENCE_DIALOG});}.bind(this));if(!fa){h.log(i.AM_MACA_EDITOR_VALIDATION_FAILURE);return;}h.log(i.AM_MACA_EDITOR_CREATE_AUDIENCE);this.setState({viewState:ca.CREATE_AUDIENCE_REQUEST_SENT});var ga=p.getCombinationUploadParams(ea,function(ha){this.setState({error:ha,viewState:ca.CREATE_AUDIENCE_DIALOG});}.bind(this));this.props.dao.add.createMobileAppCombinationCustomAudience.one(function(ha){this.props.onAudienceAdded(ha.id);this.setState({viewState:ca.CREATE_AUDIENCE_REQUEST_COMPLETE});h.log(i.AM_MACA_EDITOR_CREATE_SUCCESS);}.bind(this),ga);},_getIsTosAccepted:function(){var ea=this.props.tosRequirementsForAccount.mobile_app_custom_audience;return this.props.tosAccepted.hasOwnProperty(ea)&&(this.props.tosAccepted[ea]==1);},_termsCheckboxChanged:function(event){this.setState({termsAccepted:event.target.checked});},_onToggle:function(ea){if(!ea)this.props.onCancel();}});e.exports=da;},null);
__d("CustomAudienceFinishNextStepSelector.react",["Image.react","ImageBlock.react","React","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m='/images/ads/audience_manager/ca_new_ad.png',n='/images/ads/createflow/targeting/new_ca.png',o=i.createClass({displayName:"CustomAudienceFinishNextStepSelector",propTypes:{onCreateAdClick:i.PropTypes.func.isRequired,onCreateLookalikeClick:i.PropTypes.func.isRequired},render:function(){return (i.createElement("div",{className:"_247t"},i.createElement("ul",null,this._renderCreateAdItem(),this._renderCreateLookalikeItem())));},_renderCreateAdItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onCreateAdClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:m}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Create an Ad Using the Audience"),i.createElement("div",{className:"_3-8x"},"You can start creating an ad using Custom Audience you just created.")))));},_renderCreateLookalikeItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onCreateLookalikeClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:n}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Expand your Audience"),i.createElement("div",{className:"_3-8x"},"Facebook can help you reach more people that matter to your business by finding people that are similar to your source audience.")))));}});e.exports=o;},null);
__d("AudienceManagerNextStepDialogContent.react",["CustomAudienceFinishNextStepSelector.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=h.createClass({displayName:"AudienceManagerNextStepDialogContent",propTypes:{onFinish:h.PropTypes.func.isRequired,onCreateAdClick:h.PropTypes.func.isRequired,onCreateLookalikeClick:h.PropTypes.func.isRequired},render:function(){return (h.createElement("div",null,h.createElement(i,null,h.createElement("div",{className:"_50_z"},h.createElement(l,{weight:"bold",shade:"medium",size:"medium"},"Next Steps"),h.createElement("div",{className:"_3-98 _3-8y"},"Start creating an ad using the Custom Audience you just created or creating a Lookalike Audience to expand your audience."),h.createElement(g,{onCreateAdClick:this.props.onCreateAdClick,onCreateLookalikeClick:this.props.onCreateLookalikeClick}))),h.createElement(k,null,h.createElement(j,{onClick:this.props.onFinish,label:"Done"}))));}});e.exports=o;},null);
__d("AudienceManagerLookalikeDialog.react",["AdsCreateLookalikeConfig","AdsCreateLookalikeDialogTooltipRangeInput.react","AdsCreateLookalikeDialogCountryTypeahead.react","AdsCreateLookalikeDialogSourceTypeahead.react","AsyncRequest","ads-cluster-constants","InfoTable.react","InfoTableRow.react","InfoTableSection.react","LayerHideOnEscape","React","SearchableEntry","XAdsLookalikeSuggestedCountryController","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUINotice.react","XUISpinner.react","InsightsNumberUtils","adsGKCheck","copyProperties","cx","fbt","ads-lib-formatters"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){var ga=b('ads-lib-formatters').createLimitedSigFigNumberFormatter(0,2),ha=g.countries,ia=l.LOOKALIKE_SOURCE_TYPE,ja=l.LOOKALIKE_CUSTOM_RATIO_LIMIT,ka={CUSTOM_AUDIENCE:("Custom Audience"),CONVERSION_PIXEL:("Conversion Pixel"),PAGE:("Page"),APPLICATION:("Application")},la=q.createClass({displayName:"AudienceManagerLookalikeDialog",propTypes:{accountID:q.PropTypes.string.isRequired,audience:q.PropTypes.object,dao:q.PropTypes.object.isRequired,onAudienceAdded:q.PropTypes.func.isRequired,onClose:q.PropTypes.func.isRequired},getInitialState:function(){return {loading:false,isFinancialService:false,error:null,source:(void 0),country:(void 0),ratio:ja.MIN,minSize:(void 0),maxSize:(void 0)};},render:function(){return (q.createElement(t,{shown:true,width:630,behaviors:{LayerHideOnEscape:p},onToggle:this._onToggle},q.createElement(y,null,"Create Lookalike Audience"),q.createElement(u,null,q.createElement("div",{className:"_wm-"},this._renderError(),this._renderDialogBody())),q.createElement(w,null,q.createElement(v,{onClick:this.props.onClose,disabled:this.state.loading}),q.createElement(x,{use:"confirm",action:"confirm",label:"Create Audience",disabled:this.state.loading||!this._canCreate(),onClick:this._onCreateLookalike}))));},_renderDialogBody:function(){if(this.state.loading)return (q.createElement("div",{className:"_5saq"},q.createElement(aa,{background:"light",size:"large"})));var ma=(q.createElement(n,{label:"Size",className:"_wn2",type:"data"},q.createElement("div",null,q.createElement("div",null,q.createElement("span",{className:"_wn3"},this.state.minSize),q.createElement("div",{className:"_wn4"},q.createElement(h,{min:ja.MIN,max:ja.MAX,step:ja.GRANULARITY,initValue:this.state.ratio,tooltip:this._getAudienceSizeText(),disabled:!this._canCreate(),onChange:this._onAudienceSizeChange})),q.createElement("span",{className:"_wn3"},this.state.maxSize)),q.createElement("p",{className:"_wn5"},"Size range is based on the total audience in the country you choose. Smaller audiences most closely match your source audience. Creating a larger audience increases your potential reach, but reduces the level of similarity to your source.")))),na=[q.createElement(n,{label:"Source",className:"_wn1",type:"data"},q.createElement(j,{accountID:this.props.accountID,source:this.state.source,onSelectAttempt:this._onSourceSelected})),q.createElement(n,{label:"Country",className:"_wn1",type:"data"},q.createElement(i,{ref:"countryTypeahead",country:this.state.country,onSelectAttempt:this._onCountrySelected}))];if(this.state.country!==(void 0))na.push(ma);if(ca('financial_service_lookalike'))na.push(q.createElement(n,null,q.createElement("div",null,q.createElement("input",{type:"checkbox",checked:this.state.isFinancialService,onChange:this._toggleFinancialService}),"Use FCRA-compliant matching for financial services advertising")));return (q.createElement("div",null,q.createElement("p",{className:"_wm_"},"Reach new people who are similar to an audience you care about. Select a source and a country below, then choose an optimization."),q.createElement(m,{className:"_wn0"},q.createElement(o,null,na))));},componentWillMount:function(){this._init();},_init:function(){if(this.props.audience){var ma={uniqueID:this.props.audience.id,title:this.props.audience.name};ma.subtitle=ka.CUSTOM_AUDIENCE;ma.type=ia.CUSTOM_AUDIENCE;this.setState({source:new r(ma)});this._loadSuggestedCountry(this.props.audience.id);}},_canCreate:function(){return !!(this.state.source&&this.state.country);},_toggleFinancialService:function(ma){this.setState({isFinancialService:ma.target.checked});},_onSourceSelected:function(ma){var na=this.state.source;if(ma&&(!na||ma.getUniqueID()!==na.getUniqueID()))this._loadSuggestedCountry(ma.getUniqueID());this.setState({source:ma});},_onCountrySelected:function(ma){this.setState({country:ma,minSize:ba.abbrevInt(this._getApproximateAudienceSize(ma,ja.MIN)),maxSize:ba.abbrevInt(this._getApproximateAudienceSize(ma,ja.MAX))});},_onAudienceSizeChange:function(ma){this.setState({ratio:parseFloat(ma),ratioChanged:true});},_getApproximateAudienceSize:function(ma,na){var oa=Math.floor(ha[ma].count*na);return oa;},_getAudienceSizeText:function(){if(!this._canCreate())return '';var ma=ga(this._getApproximateAudienceSize(this.state.country,this.state.ratio));return (fa._("{size} people",[fa.param("size",ma)]));},_renderError:function(){if(this.state.error)return (q.createElement("div",{className:"_wn6"},q.createElement(z,{use:"warn"},this.state.error.message)));},_onCreateLookalike:function(){var ma=this.state.source,na=this.state.country,oa=this.state.ratio,pa;this.setState({error:null});var qa={accountId:this.props.accountID,lookalike_spec:{country:na,ratio:oa,is_financial_service:this.state.isFinancialService},handleError:(function(ra,sa){this.setState({loading:false,error:sa&&sa.error});}).bind(this)};switch(ma.getType()){case ia.CUSTOM_AUDIENCE:pa='createLookalikeCluster';qa.origin_audience_id=ma.getUniqueID();qa.lookalike_spec.type=l.LOOKALIKE_CUSTOM_RATIO;break;case ia.CONVERSION_PIXEL:pa='createActionsLookalike';da(qa.lookalike_spec,{pixel_ids:[ma.getUniqueID()],conversion_type:'offsite'});break;case ia.PAGE:pa='createActionsLookalike';da(qa.lookalike_spec,{page_id:ma.getUniqueID(),conversion_type:'page_like'});break;case ia.APPLICATION:pa='createActionsLookalike';da(qa.lookalike_spec,{app_id:ma.getUniqueID(),conversion_type:'engaged_app_users'});break;default:return;}this.props.dao.add[pa].one((function(ra){this.setState({loading:false});this.props.onAudienceAdded(ra.id);this.props.onClose();}.bind(this)),qa);this.setState({loading:true});},_loadSuggestedCountry:function(ma){var na=(s.getURIBuilder()).setInt('origin_audience_id',ma).getURI(),oa=(new k()).setURI(na).setHandler((function(pa){var qa=this.state.source.getUniqueID(),ra=this.refs.countryTypeahead;if(qa===ma&&!ra.state.queryString){var sa=pa&&pa.payload;if(ha[sa])this._onCountrySelected(sa);}}.bind(this))).setErrorHandler(function(pa){});oa.send();},_onToggle:function(ma){if(!ma)this.props.onClose();}});e.exports=la;},null);
__d("AdsAppTokenizerToken.react",["React","XUITokenizerToken.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){var k=g.createClass({displayName:"AdsAppTokenizerToken",propTypes:h.propTypes,render:function(){var l=(("_13w9")+(this.props.entry.getAuxiliaryData()&&this.props.entry.getAuxiliaryData().invalid?' '+"_13wa":''));return (g.createElement(h,g.__spread({},this.props,{className:j(this.props.className,l)})));}});e.exports=k;},null);
__d("DummySearchSource",["AbstractSearchSource"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.searchImpl=function(k,l,m){"use strict";l([],k);};e.exports=j;},null);
__d("AudienceManagerAppIDInput.react",["AudienceDaoManager","AdsAppTokenizerToken.react","AdsConnectionObjTypes","DummySearchSource","Link.react","React","SearchableEntry","XUIError.react","XUIGrayText.react","XUITokenizer.react","XUITypeaheadTextOnlyView.react","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';var u=10,v=l.createClass({displayName:"AudienceManagerAppIDInput",propTypes:{accountID:l.PropTypes.string.isRequired,onAppEntriesUpdated:l.PropTypes.func.isRequired},componentWillMount:function(){var w=g.getPrimedDao(this.props.accountID),x=function(y){y.data=y.data.filter(function(ba){return ba.type===i.APPLICATION;});if(y.data.length>1)return;var z=this.state.appIdEntries,aa=function(ba){if(ba.is_first_party_app===false){var ca=new m({uniqueID:ba.id,title:ba.id,auxiliaryData:{invalid:false}});z.push(ca);}};w.fetch.appInfo.one(function(ba){aa(ba);this.setState({appIdEntries:z});this.props.onAppEntriesUpdated(z);}.bind(this),{appId:y.data[0].id,fields:['is_first_party_app']});}.bind(this);w.fetch.connectionObjectsForAccount.one(x,{});},getInitialState:function(){return {appIdEntries:[],queryString:'',searchSource:new j()};},render:function(){var w={ViewRenderer:q,TokenRenderer:h,useLayer:true};return (l.createElement("div",null,l.createElement(o,{weight:"bold",display:"block",shade:"medium",className:"_3-95"},"Add a Facebook App ID"),l.createElement(n,{xuiError:this._getAppIDErrorMessage()},l.createElement(p,{entries:this.state.appIdEntries,limit:u,onAddEntryAttempt:this._onAddEntryAttempt,onEnterWithoutSelection:this._onEnterWithoutSelection,onQueryStringChange:this._onQueryStringChange,onRemoveEntryAttempt:this._onRemoveEntryAttempt,placeholder:this._getTokenizerPlaceholder(),presenter:w,queryString:this.state.queryString,searchSource:this.state.searchSource,tokenizeQueryStringOnBlur:this._tokenizeQueryString})),l.createElement("div",{className:"_3-8x"},"You can only upload IDs for people that download or use your Facebook app.",' ',t._("You can find the ID for your Facebook apps in {=App Dashboard}",[t.param("=App Dashboard",l.createElement(k,{target:"_blank",href:r('https://developers.facebook.com/apps')},"App Dashboard"))]))));},_getAppIDErrorMessage:function(){if(this.state.appIdEntries.length===0||this._isAppIDTokensValid())return null;return ("One or more of the Facebook app IDs aren't connected to your account");},_getTokenizerPlaceholder:function(){return ("Add Facebook App ID");},_tokenizeQueryString:function(w){if(w)return new m({uniqueID:w,title:w});},_onEnterWithoutSelection:function(event){var w=event.target.value;if(w)this._onAddEntryAttempt(this._tokenizeQueryString(w));},_onQueryStringChange:function(event){this.setState({queryString:event.target.value});},_onAddEntryAttempt:function(w){var x=w.getUniqueID(),y=this.state.appIdEntries,z=y.some(function(ba){return ba.getUniqueID()===x;});if(z)return;var aa=g.getPrimedDao(this.props.accountID);aa.fetch.appInfo.one(function(ba){if(ba.is_first_party_app===false){w=new m({uniqueID:x,title:x,auxiliaryData:{invalid:false}});}else w=new m({uniqueID:x,title:x,auxiliaryData:{invalid:true}});y.push(w);this.setState({appIdEntries:y,queryString:''});this.props.onAppEntriesUpdated(y);}.bind(this),{appId:x,fields:['is_first_party_app'],handleError:function(ba,ca,da){w=new m({uniqueID:x,title:x,auxiliaryData:{invalid:true}});y.push(w);this.setState({appIdEntries:y,queryString:''});this.props.onAppEntriesUpdated(y);}.bind(this)});},_onRemoveEntryAttempt:function(w){var x=this.state.appIdEntries,y=x.indexOf(w);if(y>=0)x.splice(y,1);this.setState({appIdEntries:x});this.props.onAppEntriesUpdated(x);},_isAppIDTokensValid:function(){var w=this.state.appIdEntries,x=w.some(function(y){return y.getAuxiliaryData().invalid;});return w.length>0&&!x;}});e.exports=v;},null);
__d("AudienceManagerDataTypeSelector.react",["AudienceManagerUIConstants","React","XUISelector.react","XUIGrayText.react","cx","fbt","getObjectValues","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=i.Option,p=g.CUSTOM_AUDIENCE_DATA_TYPE_LABEL,q=h.createClass({displayName:"AudienceManagerDataTypeSelector",propTypes:{defaultValue:h.PropTypes.oneOf(m(n)),onTypeChange:h.PropTypes.func.isRequired},getDefaultProps:function(){return {defaultValue:n.UPLOAD_TYPE_EMAIL};},render:function(){var r=[h.createElement(o,{value:n.UPLOAD_TYPE_EMAIL,key:n.UPLOAD_TYPE_EMAIL},p[n.UPLOAD_TYPE_EMAIL]),h.createElement(o,{value:n.UPLOAD_TYPE_UID,key:n.UPLOAD_TYPE_UID},p[n.UPLOAD_TYPE_UID]),h.createElement(o,{value:n.UPLOAD_TYPE_PHONE,key:n.UPLOAD_TYPE_PHONE},p[n.UPLOAD_TYPE_PHONE]),h.createElement(o,{value:n.UPLOAD_TYPE_MOBILE_ADVERTISER_ID,key:n.UPLOAD_TYPE_MOBILE_ADVERTISER_ID},p[n.UPLOAD_TYPE_MOBILE_ADVERTISER_ID])];return (h.createElement("div",null,h.createElement(j,{weight:"bold",display:"block",shade:"medium",className:"_2pin"},"Data Type"),h.createElement(i,{defaultValue:this.props.defaultValue,onChange:this.props.onTypeChange},r)));}});e.exports=q;},null);
__d("AudienceManagerFBCustomAudienceTerm.react",["BusinessURI.brands","Link.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j){'use strict';var k=i.createClass({displayName:"AudienceManagerFBCustomAudienceTerm",propTypes:{accountID:i.PropTypes.string.isRequired,termsAccepted:i.PropTypes.bool.isRequired,onTermsCheckboxChanged:i.PropTypes.func.isRequired},render:function(){return (i.createElement("input",{type:"checkbox",checked:this.props.termsAccepted,onChange:this.props.onTermsCheckboxChanged},j._("I agree to the {link}",[j.param("link",i.createElement(h,{target:"_blank",href:g('/ads/manage/customaudiences/tos.php?act='+this.props.accountID)},"Facebook Custom Audiences Terms"))])));}});e.exports=k;},null);
__d("AudienceManagerViewFormatingExampleLink.react",["AdInterfacesUiLogger","AudienceManagerLoggingEvents","AudienceManagerUIConstants","AudienceManagerURLConstants","LeftRight.react","Link.react","React","ReactLayeredComponentMixin","XUISelector.react","XUICloseButton.react","XUIContextualDialog.react","XUIContextualDialogTitle.react","XUIContextualDialogBody.react","XUIGrayText.react","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){'use strict';var x=o.Option,y=i.CUSTOM_AUDIENCE_DATA_TYPE_LABEL,z=m.createClass({displayName:"AudienceManagerViewFormatingExampleLink",mixins:[n],propTypes:{exampleContents:m.PropTypes.array},getDefaultProps:function(){return {exampleContents:[{name:w.UPLOAD_TYPE_EMAIL,label:y[w.UPLOAD_TYPE_EMAIL],content:m.createElement("p",null,"Ex.",m.createElement("br",null),"name1@example.com",m.createElement("br",null),"name2@example.com",m.createElement("br",null),"name3@example.com",m.createElement("br",null),"name1@example.com,name2@example.com",m.createElement("br",null),"name1@example.com;name2@example.com",m.createElement("br",null))},{name:w.UPLOAD_TYPE_UID,label:y[w.UPLOAD_TYPE_UID],content:m.createElement("p",null,m.createElement("ul",{className:"_4wii"},m.createElement("li",null,"Numeric characters only")),"Ex.",m.createElement("br",null),"1234567890",m.createElement("br",null),"1443637309",m.createElement("br",null))},{name:w.UPLOAD_TYPE_PHONE,label:y[w.UPLOAD_TYPE_PHONE],content:m.createElement("p",null,m.createElement("ul",{className:"_4wii"},m.createElement("li",null,"Country code + Area Code + Number"),m.createElement("li",null,"No leading zeros from country code"),m.createElement("li",null,"Numeric characters only")),"Ex.",m.createElement("br",null),"16505551234",m.createElement("br",null),"16505551235",m.createElement("br",null))},{name:w.UPLOAD_TYPE_MOBILE_ADVERTISER_ID,label:y[w.UPLOAD_TYPE_MOBILE_ADVERTISER_ID],content:m.createElement("p",null,"We support:",m.createElement("ul",{className:"_4wii"},m.createElement("li",null,"Android's advertising ID,"),m.createElement("li",null,"Apple's Advertising Identifier(IDFA),and"),m.createElement("li",null,"Facebook App User IDs")),m.createElement(l,{href:j.MOBILE_ADVERTISING_IDS_DOC,target:"_blank"},"Learn more"))}]};},getInitialState:function(){return {dialogShown:false,currentContent:this.props.exampleContents[0]};},onLinkClick:function(){this.setState({dialogShown:!this.state.dialogShown});g.log(h.AM_CA_CREATE_VIEW_EXAMPLE_CLICK);},onSelectorClick:function(aa){this.setState({currentContent:this._findContentByName(aa.value)});},_findContentByName:function(aa){for(var ba=0;ba<this.props.exampleContents.length;ba++)if(this.props.exampleContents[ba].name===aa)return this.props.exampleContents[ba];},_getSelectorOptions:function(){var aa=this.props.exampleContents.map(function(ba){return (m.createElement(x,{value:ba.name,key:ba.name},ba.label));});return aa;},renderLayers:function(){return {contextualDialog:m.createElement(q,{contextRef:"link",shown:this.state.dialogShown,position:"below",alignment:"right",autoFocus:true,width:q.WIDTH.NORMAL},m.createElement(r,null,m.createElement(k,null,m.createElement(o,{defaultValue:this.state.currentContent.name,onChange:this.onSelectorClick},this._getSelectorOptions()),m.createElement("div",null,m.createElement(p,{use:"confirm",label:"Close",onClick:this.onLinkClick})))),m.createElement(s,null,m.createElement(t,{shade:"light",size:"small",display:"block"},this.state.currentContent.content)))};},render:function(){return (m.createElement(l,{ref:"link",onClick:this.onLinkClick},"View formatting examples."));}});e.exports=z;},null);
__d("CustomAudienceUploadErrorBox.react",["React","cx","fbt","ix","Image.react","List.react"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.PropTypes,n=g.createClass({displayName:"CustomAudienceUploadErrorBox",propTypes:{message:m.string.isRequired,type:m.string,numMissing:m.number,numInvalid:m.number,errorList:m.array},getDefaultProps:function(){return {message:null,type:'',numMissing:0,numInvalid:0,errorList:null};},_renderErrorList:function(){var o=this.props.errorList;return (g.createElement(l,{border:"none",spacing:"none"},o.map(function(p){return g.createElement("li",{key:p.line}," ",p.token," ");})));},_renderType:function(o){switch(o){case 'email':return "Email";case 'uid':return "Uid";case 'phone number':return "Phone Number";case 'hash':return "Hash";default:return '';}},render:function(){var o=this.props.message,p=this.props.type,q=this.props.numMissing,r=this.props.numInvalid,s=this.props.errorList,t=null;if(s){var u=i._("{Number of errors} {Type of token} Errors",[i.param("Number of errors",q+r),i.param("Type of token",this._renderType(p))]),v=null,w=null;if(q>0&&r>0){v=g.createElement("div",null,i._("Missing: {Number of missing tokens}",[i.param("Number of missing tokens",g.createElement("span",{className:"_5od5"},q))]));w=g.createElement("div",null,i._("Incorrectly formatted: {Number of invalid tokens}",[i.param("Number of invalid tokens",g.createElement("span",{className:"_5od5"},r))]));}t=g.createElement("div",{className:"_5od3"},g.createElement("div",{className:"_5od4"},u),v,w,g.createElement("div",{className:"_5od6"},this._renderErrorList()));}return (g.createElement("div",{className:"_5od7"},g.createElement("span",{className:"_5od8"},g.createElement(k,{src:j('images/ads/createflow/creative/error-white.png')})),g.createElement("span",{className:"_5od9"},o,t)));}});e.exports=n;},null);
__d("AudienceManagerCopyPasteInitDialogContent.react",["AbstractTextArea.react","AudienceManagerAppIDInput.react","AudienceManagerDataTypeSelector.react","AudienceManagerFBCustomAudienceTerm.react","AudienceManagerViewFormatingExampleLink.react","CustomAudienceUploadErrorBox.react","ImageBlock.react","Image.react","InlineBlock.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","ads-cluster-constants","isEmail","isInternationalPhoneNumber","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){var aa="Untitled",ba='/images/ads/audience_manager/ca_copy.png',ca=44,da=/^\d+$/,ea=20,fa=p.createClass({displayName:"AudienceManagerCopyPasteInitDialogContent",propTypes:{accountID:p.PropTypes.string.isRequired,onBack:p.PropTypes.func.isRequired,onCreateAudienceClick:p.PropTypes.func.isRequired},getInitialState:function(){return {pasteBin:'',error:null,selectedDataType:z.UPLOAD_TYPE_EMAIL,termsAccepted:true,appIDEntries:[]};},render:function(){return (p.createElement("div",null,p.createElement(q,null,p.createElement("div",{className:"_50_z"},p.createElement(m,{spacing:"large"},p.createElement(n,{src:ba}),p.createElement(o,{alignv:"middle",height:ca},p.createElement(t,{weight:"bold",shade:"medium",size:"medium"},"Copy and paste your customer list"))),p.createElement("div",{className:"_3-8-"},p.createElement("p",null,"Copy and paste a list of emails, phone numbers, Facebook user IDs or mobile advertiser IDs from a spreadsheet or text file."),p.createElement("p",null,"You can copy columns from a spreadsheet with one record per row or a list of records separated by commas.",' ',p.createElement(k,null))),p.createElement("div",{className:"_3-98 _3-8z"},p.createElement(i,{defaultValue:this.state.selectedDataType,canUploadAppUserID:this.props["false"],onTypeChange:this._onDataTypeChange})),this._renderAppIDInput(),this._renderPasteBin(),p.createElement("div",{className:"_3-8w"},p.createElement(j,{accountID:this.props.accountID,termsAccepted:this.state.termsAccepted,onTermsCheckboxChanged:this._onTermsCheckboxChanged})))),p.createElement(s,null,p.createElement("div",null,p.createElement(r,{onClick:this.props.onBack,label:"Back"}),p.createElement(r,{use:"confirm",disabled:!this._getShouldEnableCreateAudienceButton(),onClick:this._onCreateAudienceButtonClick,label:"Create Audience"})))));},_renderPasteBin:function(){var ga=null;if(!!this.state.error)ga=p.createElement(l,{message:this.state.error});return (p.createElement("div",{className:"_3-8- _3-98"},p.createElement(g,{className:"_5ukc",value:this.state.pasteBin,onChange:this._onPasteBinChange,placeholder:"Paste your customer list here."}),ga));},_renderAppIDInput:function(){if(this.state.selectedDataType===z.UPLOAD_TYPE_UID)return p.createElement(h,{accountID:this.props.accountID,onAppEntriesUpdated:this._onAppEntriesUpdated});return null;},_getShouldEnableCreateAudienceButton:function(){var ga=true;if(this.state.selectedDataType===z.UPLOAD_TYPE_UID){var ha=this.state.appIDEntries.some(function(ia){return ia.getAuxiliaryData().invalid;});ga=this.state.appIDEntries.length>0&&!ha;}return !!this.state.pasteBin&&!!this.state.termsAccepted&&ga;},_onAppEntriesUpdated:function(ga){this.setState({appIDEntries:ga});},_onPasteBinChange:function(ga){this.setState({pasteBin:ga.target.value});},_onDataTypeChange:function(ga){this.setState({selectedDataType:ga.value,appIDEntries:[]});},_onTermsCheckboxChanged:function(ga){this.setState({termsAccepted:ga.target.checked});},_onCreateAudienceButtonClick:function(){var ga=this.state.pasteBin.trim().split(/\r\n|\n|\r|;|,/).map(function(ia){return ia.trim();});ga=ga.filter(function(ia){return !!ia;});if(ga.length>u.CLUSTER_API_MAX_SIZE){this.setState({error:y._("You can upload at most {max number of entries} entries using copy and paste. Try uploading a file instead.",[y.param("max number of entries",u.CLUSTER_API_MAX_SIZE)])});return;}var ha=this._onCheckError(ga);if(!ha){this.props.onCreateAudienceClick(this.state.selectedDataType,this.state.appIDEntries,ga,aa);}else this.setState({error:y._("You need to add at least {mininum number of entries} valid entries to continue.",[y.param("mininum number of entries",ea)])});},_onCheckError:function(ga){var ha=ga;if(this.state.selectedDataType===z.UPLOAD_TYPE_EMAIL){ha=ga.filter(function(ia){ia=ia.toLowerCase();return v(ia);});}else if(this.state.selectedDataType===z.UPLOAD_TYPE_PHONE){ha=ga.filter(function(ia){return w(ia);});}else if(this.state.selectedDataType===z.UID)ha=ga.filter(function(ia){return da(ia);});if(ha.length<ea)return true;return false;}});e.exports=fa;},null);
__d("AudienceCreatorTypeSelector.react",["Image.react","ImageBlock.react","React","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m='/images/ads/audience_manager/ca_custom_list.png',n='/images/ads/audience_manager/ca_fb_app.png',o='/images/ads/audience_manager/ca_web.png',p=i.createClass({displayName:"AudienceCreatorTypeSelector",propTypes:{onCustomerListClick:i.PropTypes.func.isRequired,onWebsiteTrafficClick:i.PropTypes.func.isRequired,onMobileAppClick:i.PropTypes.func.isRequired},_renderCustomerListItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onCustomerListClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:m}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Customer List"),i.createElement("div",{className:"_3-8x"},"Match emails, phone numbers, Facebook user IDs or mobile advertiser IDs to people on Facebook")))));},_renderWebsiteTrafficItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onWebsiteTrafficClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:o}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Website Traffic"),i.createElement("div",{className:"_3-8x"},"Create a list of people who visit your website or view specific web pages")))));},_renderMobileAppItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onMobileAppClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:n}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"App Activity"),i.createElement("div",{className:"_3-8x"},"Create a list of people who have taken a specific action in your app or game")))));},render:function(){return (i.createElement("div",{className:"_247t"},i.createElement("ul",null,this._renderCustomerListItem(),this._renderWebsiteTrafficItem(),this._renderMobileAppItem())));}});e.exports=p;},null);
__d("AudienceManagerCreateAudienceInitDialogContent.react",["React","AudienceCreatorTypeSelector.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=g.createClass({displayName:"AudienceManagerCreateAudienceInitDialogContent",propTypes:{onCancel:g.PropTypes.func.isRequired,onCustomerListClick:g.PropTypes.func.isRequired,onWebsiteTrafficClick:g.PropTypes.func.isRequired,onMobileAppClick:g.PropTypes.func.isRequired},render:function(){return (g.createElement("div",null,g.createElement(i,null,g.createElement("div",{className:"_50_z"},g.createElement(l,{weight:"bold",shade:"medium",size:"medium"},"Choose the type of audience you want to create on Facebook."),g.createElement("div",{className:"_3-98 _3-8y"},"This process is secure and the details about your customers will be kept private."),g.createElement(h,{onCustomerListClick:this.props.onCustomerListClick,onWebsiteTrafficClick:this.props.onWebsiteTrafficClick,onMobileAppClick:this.props.onMobileAppClick}))),g.createElement(k,null,g.createElement(j,{onClick:this.props.onCancel,label:"Cancel"}))));}});e.exports=o;},null);
__d("CustomerListTypeSelector.react",["Image.react","ImageBlock.react","React","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m='/images/ads/audience_manager/ca_file.png',n='/images/ads/audience_manager/ca_copy.png',o='/images/ads/audience_manager/ca_import.png',p=i.createClass({displayName:"CustomerListTypeSelector",propTypes:{onUploadFileClick:i.PropTypes.func.isRequired,onCopyPasteClick:i.PropTypes.func.isRequired,onThirdPartyClick:i.PropTypes.func.isRequired},_renderUploadFileItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onUploadFileClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:m}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Upload a file"),i.createElement("div",{className:"_3-8x"},"Upload a data file that contains emails, phone numbers, Facebook user IDs or mobile advertiser IDs")))));},_renderCopyPasteItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onCopyPasteClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:n}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Copy and paste your custom list"),i.createElement("div",{className:"_3-8x"},"Copy and paste emails, phone numbers, Facebook user IDs or mobile advertiser IDs of your customers and create a Custom Audience")))));},_renderThirdPartyItem:function(){return (i.createElement("li",{className:"_247s",onClick:this.props.onThirdPartyClick},i.createElement(h,{spacing:"large"},i.createElement(g,{src:o}),i.createElement("div",null,i.createElement(j,{weight:"bold",shade:"medium",size:"medium"},"Import from MailChimp"),i.createElement("div",{className:"_3-8x"},"Import a customer list from a third-party email service.")))));},render:function(){return (i.createElement("div",{className:"_247t"},i.createElement("ul",null,this._renderUploadFileItem(),this._renderCopyPasteItem(),this._renderThirdPartyItem())));}});e.exports=p;},null);
__d("AudienceManagerCustomerListDialogContent.react",["React","CustomerListTypeSelector.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=g.createClass({displayName:"AudienceManagerCustomerListDialogContent",propTypes:{onBack:g.PropTypes.func.isRequired,onUploadFileClick:g.PropTypes.func.isRequired,onCopyPasteClick:g.PropTypes.func.isRequired,onThirdPartyClick:g.PropTypes.func.isRequired},render:function(){return (g.createElement("div",null,g.createElement(i,null,g.createElement("div",{className:"_50_z"},g.createElement(l,{weight:"bold",shade:"medium",size:"medium"},"How do you want to add customers to this audience?"),g.createElement("div",{className:"_3-98 _3-8y"},"Information you provide will be matched with people on Facebook to create an audience. Your contacts won't be notified that you've added them to an audience, and we'll never contact them without your permission."),g.createElement(h,{onUploadFileClick:this.props.onUploadFileClick,onCopyPasteClick:this.props.onCopyPasteClick,onThirdPartyClick:this.props.onThirdPartyClick}))),g.createElement(k,null,g.createElement(j,{onClick:this.props.onBack,label:"Back"}))));}});e.exports=o;},null);
__d("AudienceManagerErrorContextualDialog.react",["HasLayerContextMixin","React","ReactLayer","ContextualDialog","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.createClass({displayName:"AudienceManagerErrorContextualDialogLayer",propTypes:{shown:h.PropTypes.bool,context:h.PropTypes.object.isRequired,offsetY:h.PropTypes.number},getDefaultProps:function(){return {shown:true};},createLayer:function(n){var o=new j({theme:{wrapperClassName:"_1tpb",arrowDimensions:{offset:12,length:16},position:'right',offsetY:this.props.offsetY}},n);o.shouldSetARIAProperties(false);this._setProps(this.props,o);return o;},receiveProps:function(n){this._setProps(n,this.layer);},_setProps:function(n,o){o.setContext(n.context);o.conditionShow(n.shown);}}),m=h.createClass({displayName:"AudienceManagerErrorContextualDialog",mixins:[g],propTypes:{contextRef:h.PropTypes.string.isRequired,shown:h.PropTypes.bool,offsetY:h.PropTypes.number},render:function(){var n=this.props.children,o=(h.createElement(l,{shown:this.props.shown,context:this.getContextNode(),offsetY:this.props.offsetY},h.createElement("div",{className:"_1tp9"},h.createElement("div",{className:"_1tpa"}),h.createElement("div",{className:"_1tp8"},h.createElement("div",null,n)))));return o;}});e.exports=m;},null);
__d("FBDragDropBox.react",["DragDropTarget","FileInput.react","Image.react","InlineBlock.react","React","XUIButton.react","fbt","cx","glyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';var p="/images/icons/groups/files/file-plain-32.png",q=k.createClass({displayName:"FBDragDropBox",propTypes:{onFilesSelection:k.PropTypes.func.isRequired,onFileChange:k.PropTypes.func.isRequired,onFileRemove:k.PropTypes.func.isRequired,selectedFile:k.PropTypes.object,hasError:k.PropTypes.bool,allowedFileTypes:k.PropTypes.array},getDefaultProps:function(){return {allowedFileTypes:['text/plain','text/csv']};},_handleFilesSelection:function(r){this.props.onFilesSelection(r);},_handleFileChange:function(r){this.props.onFileChange(r);},componentDidMount:function(){new g(this.getDOMNode()).setOnFilesDropCallback(this._handleFileChange).enable();},_renderDragAndDropBox:function(){var r;if(this.props.selectedFile&&this.props.selectedFile.name){var s=(this.props.selectedFile.name);r=(k.createElement("div",{className:"_82m"},k.createElement(i,{src:p,className:"_82n"}),s,k.createElement(i,{className:"_82o",onClick:this.props.onFileRemove,src:o('remove')})));}else r=(k.createElement("div",null,"Drag and drop your file here or",' ',k.createElement(h,{accept:this.props.allowedFileTypes.join(', '),onChange:this._handleFilesSelection},k.createElement(l,{href:{url:'#'},label:"Upload File"}))));return (k.createElement(j,{alignv:"middle",height:76,fullWidth:true},r));},render:function(){return (k.createElement("div",{className:(("_82p")+(this.props.selectedFile&&this.props.selectedFile.name?' '+"_82q":'')+(this.props.hasError?' '+"_82r":''))},this._renderDragAndDropBox()));}});e.exports=q;},null);
__d("AudienceManagerFileImportInit.react",["AdInterfacesUiLogger","AudienceManagerAppIDInput.react","AudienceManagerDataTypeSelector.react","AudienceManagerErrorContextualDialog.react","AudienceManagerFBCustomAudienceTerm.react","AudienceManagerLoggingEvents","AudienceManagerViewFormatingExampleLink.react","FBDragDropBox.react","ImageBlock.react","Image.react","InlineBlock.react","ReactLayeredComponentMixin","React","XUIGrayText.react","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){'use strict';var x='/images/ads/audience_manager/ca_file.png',y=44,z=['csv','txt'],aa=s.createClass({displayName:"AudienceManagerFileImportInit",mixins:[r],propTypes:{accountID:s.PropTypes.string.isRequired,selectedDataType:s.PropTypes.string,appIDEntries:s.PropTypes.array,termsAccepted:s.PropTypes.bool,onFileUpdated:s.PropTypes.func.isRequired,onAppEntriesUpdated:s.PropTypes.func,onDataTypeChanged:s.PropTypes.func.isRequired,onTermsCheckboxChanged:s.PropTypes.func.isRequired},getDefaultProps:function(){return {selectedDataType:w.UPLOAD_TYPE_EMAIL,appIDEntries:[]};},getInitialState:function(){return {selectedFile:null,fileError:null};},renderLayers:function(){return {contextualDialog:s.createElement(j,{contextRef:"dragdropbox",shown:this._getShouldShowErrorDialog(),offsetY:17},this.state.fileError)};},render:function(){return (s.createElement("div",null,s.createElement(o,{spacing:"large"},s.createElement(p,{src:x}),s.createElement(q,{alignv:"middle",height:y},s.createElement(t,{weight:"bold",shade:"medium",size:"medium"},"Choose a file to upload"))),s.createElement("div",{className:"_3-8-"},s.createElement("p",null,"You can upload files in .csv or .txt format."),s.createElement("p",null,"Text files (.txt and .csv) can include records on separate lines or in a list separated by commas.",' ',s.createElement(m,null)),s.createElement("div",{className:"_3-98 _3-8z"},s.createElement(i,{defaultValue:this.props.selectedDataType,onTypeChange:this._onDataTypeChanged})),this._renderAppIDInput(),s.createElement("div",{className:"_3-98 _3-8z"},s.createElement(n,{ref:"dragdropbox",onFileRemove:this._onFileRemove,onFilesSelection:this._onFilesSelection,onFileChange:this._onFileChange,selectedFile:this.state.selectedFile,hasError:this._getShouldShowErrorDialog()})),s.createElement("div",{className:"_3-8w"},s.createElement(k,{accountID:this.props.accountID,termsAccepted:this.props.termsAccepted,onTermsCheckboxChanged:this.props.onTermsCheckboxChanged})))));},_renderAppIDInput:function(){if(this.state.selectedDataType===w.UPLOAD_TYPE_UID&&this.props.onAppEntriesUpdated)return s.createElement(h,{accountID:this.props.accountID,onAppEntriesUpdated:this.props.onAppEntriesUpdated});return null;},_getShouldShowErrorDialog:function(){return !!this.state.fileError;},_onDataTypeChanged:function(ba){this.setState({selectedDataType:ba.value},function(){return this.props.onDataTypeChanged(ba);}.bind(this));},_onFileRemove:function(){this.setState({fileError:null,selectedFile:null},function(){return this.props.onFileUpdated(null);}.bind(this));},_onFilesSelection:function(ba){this._onFileChange(ba.target.files);},_onFileChange:function(ba){var ca=ba[0];if(ca){g.log(l.AM_CA_CREATE_UPLOAD_FILE,{file_name:ca.name});if(!ca.size){this.setState({selectedFile:ca,fileError:"File appears to be empty."},function(){return this.props.onFileUpdated(null);}.bind(this));g.log(l.AM_CA_CREATE_UPLOAD_FILE_ERROR,{error:this.state.fileError,file_name:ca.name});return;}var da='';if(ca.name.indexOf('.')>=0)da=ca.name.split('.').pop();var ea=z.indexOf(da.toLowerCase())!=-1;if(!ea){this.setState({selectedFile:ca,fileError:"File must be .csv or .txt format."},function(){return this.props.onFileUpdated(null);}.bind(this));g.log(l.AM_CA_CREATE_UPLOAD_FILE_ERROR,{error:this.state.fileError,file_name:ca.name});return;}this.setState({selectedFile:ca,fileError:null},function(){return this.props.onFileUpdated(ca);}.bind(this));}}});e.exports=aa;},null);
__d("AudienceManagerCreateAudienceFileImportInitDialogContent.react",["AudienceManagerFileImportInit.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=h.createClass({displayName:"AudienceManagerCreateAudienceFileImportInitDialogContent",propTypes:{accountID:h.PropTypes.string.isRequired,onBack:h.PropTypes.func.isRequired,onCreateAudienceClick:h.PropTypes.func.isRequired},getInitialState:function(){return {audienceName:'',selectedFile:null,selectedDataType:n.UPLOAD_TYPE_EMAIL,termsAccepted:true,appIDEntries:[]};},render:function(){return (h.createElement("div",null,h.createElement(i,null,h.createElement("div",{className:"_50_z"},h.createElement(g,{accountID:this.props.accountID,selectedDataType:this.state.selectedDataType,appIDEntries:this.state.appIDEntries,termsAccepted:this.state.termsAccepted,onFileUpdated:this._onFileUpdated,onAppEntriesUpdated:this._onAppEntriesUpdated,onDataTypeChanged:this._onDataTypeChanged,onTermsCheckboxChanged:this._onTermsCheckboxChanged}))),h.createElement(k,null,h.createElement("div",null,h.createElement(j,{onClick:this.props.onBack,label:"Back"}),h.createElement(j,{use:"confirm",disabled:!this._getShouldEnableCreateAudienceButton(),onClick:this._onCreateAudienceButtonClick,label:"Create Audience"})))));},_getShouldEnableCreateAudienceButton:function(){var p=true;if(this.state.selectedDataType===n.UPLOAD_TYPE_UID){var q=this.state.appIDEntries.some(function(r){return r.getAuxiliaryData().invalid;});p=this.state.appIDEntries.length>0&&!q;}return !!this.state.termsAccepted&&!!this.state.selectedFile&&p;},_onTermsCheckboxChanged:function(p){this.setState({termsAccepted:p.target.checked});},_onDataTypeChanged:function(p){this.setState({selectedDataType:p.value,appIDEntries:[]});},_onAppEntriesUpdated:function(p){this.setState({appIDEntries:p});},_onFileUpdated:function(p){var q=p?p.name.substr(0,p.name.lastIndexOf('.')):'';this.setState({selectedFile:p,audienceName:q});},_onCreateAudienceButtonClick:function(){this.props.onCreateAudienceClick(this.state.selectedDataType,this.state.appIDEntries,this.state.selectedFile,this.state.audienceName);}});e.exports=o;},null);
__d("AudienceManagerErrorDialogContent.react",["Image.react","React","XUIDialogBody.react","XUIButton.react","cx","ix","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n=l('/images/ads/audience_manager/error.png'),o=h.createClass({displayName:"AudienceManagerErrorDialogContent",propTypes:{errorMessage:h.PropTypes.string.isRequired,onOkClick:h.PropTypes.func.isRequired},render:function(){return (h.createElement(i,null,h.createElement("div",{className:"_50_z _5wby"},this._renderErrorMessage(),this._renderButtons())));},_renderErrorMessage:function(){return (h.createElement("div",null,h.createElement(g,{src:n,className:"_2pii"}),h.createElement("span",{className:"_5wb_ _1ols"},this.props.errorMessage)));},_renderButtons:function(){return (h.createElement("div",{className:"_3-8x"},h.createElement(j,{onClick:this.props.onOkClick,label:"Okay"})));}});e.exports=o;},null);
__d("AudienceManagerMailChimpInitDialogContent.react",["Image.react","ImageBlock.react","InlineBlock.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q='/images/ads/audience_manager/ca_import.png',r=44,s=j.createClass({displayName:"AudienceManagerMailChimpInitDialogContent",propTypes:{onBack:j.PropTypes.func.isRequired,onLogInToMailChimpClick:j.PropTypes.func.isRequired},render:function(){return (j.createElement("div",null,j.createElement(k,null,j.createElement("div",{className:"_50_z"},j.createElement(h,{spacing:"large"},j.createElement(g,{src:q}),j.createElement(i,{alignv:"middle",height:r},j.createElement(n,{weight:"bold",shade:"medium",size:"medium"},"Import from MailChimp"))),j.createElement("div",{className:"_3-8-"},j.createElement("p",null,"Email addresses from your MailChimp list will be matched with people on Facebook to create an audience."),j.createElement("p",null,"Your contacts won't be notified that you've added them to an audience and we'll never contact them without your permission."),j.createElement("p",null,"Facebook doesn't store your username or password.")))),j.createElement(m,null,j.createElement("div",null,j.createElement(l,{onClick:this.props.onBack,label:"Back"}),j.createElement(l,{use:"confirm",onClick:this.props.onLogInToMailChimpClick,label:"Log in to MailChimp"})))));}});e.exports=s;},null);
__d("AudienceThirdPartyContactsList.react",["React","ReactPropTypes","XUISortableDataTable.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){var l=18,m=g.createClass({displayName:"AudienceThirdPartyContactsList",propTypes:{contactsLists:h.array.isRequired,selectedLists:h.object.isRequired,onListSelectionChange:h.func.isRequired,onSelectAllLists:h.func.isRequired,onDeselectAllLists:h.func.isRequired},_onToggleSelectAll:function(n){if(n){this.props.onDeselectAllLists();}else this.props.onSelectAllLists();},render:function(){var n=[{id:'selected',width:l,headerRenderer:function(p){var q=true,r=this.props.selectedLists;for(var s=0;s<this.props.contactsLists.length;s++){var t=this.props.contactsLists[s].list_id;if(!r[t]){q=false;break;}}return (g.createElement("input",{type:"checkbox",checked:q,onChange:this._onToggleSelectAll.bind(this,q)}));}.bind(this),cellRenderer:function(p){var q=function(){this.props.onListSelectionChange(p.list_id);}.bind(this);return (g.createElement("input",{type:"checkbox",value:p.list_id,checked:!!this.props.selectedLists[p.list_id],onChange:q}));}.bind(this)},{id:'name',label:"Name",comparator:function(p,q){return (p.name.toLowerCase()>q.name.toLowerCase()?1:-1);},cellRenderer:function(p){return g.createElement("span",null,p);},sortable:true}],o=this.props.contactsLists.map(function(p){var q={selected:p,name:p.name};return q;},this);if(!o.length)return (g.createElement("div",{className:"_5n5n"},"We are not able to get any contacts from this account."));return (g.createElement(i,{rows:o,columns:n,outerBorder:true,columnToSortBy:"name"}));}});e.exports=m;},null);
__d("AudienceManagerMailChimpSelectListDialogContent.react",["AudienceManagerFBCustomAudienceTerm.react","AudienceThirdPartyContactsList.react","Image.react","LeftRight.react","React","XUIButton.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIPagerButtons.react","cx","ix","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';var t=k.createClass({displayName:"AudienceManagerMailChimpSelectListDialogContent",propTypes:{accountID:k.PropTypes.string.isRequired,contactsLists:k.PropTypes.array.isRequired,totalPage:k.PropTypes.number.isRequired,currentPage:k.PropTypes.number.isRequired,onLoadContactsLists:k.PropTypes.func.isRequired,onCreateAudienceClick:k.PropTypes.func.isRequired},getInitialState:function(){return {termsAccepted:true,selectedListIDs:{}};},render:function(){return (k.createElement("div",null,k.createElement(m,null,k.createElement("div",{className:"_5rkr"},k.createElement("div",{className:"_5q_x"},"Select one or more lists. A new audience will be created for each email list."),k.createElement(h,{selectedLists:this.state.selectedListIDs,contactsLists:this.props.contactsLists,onListSelectionChange:this._onListSelectionChange,onSelectAllLists:this._onSelectAllLists,onDeselectAllLists:this._onDeselectAllLists}),k.createElement(j,null,k.createElement("div",{className:((this.props.totalPage===0?"hidden_elem":'')+(' '+"mtm"))},this._getSelectedListsSentence()),k.createElement("div",{className:((this.props.totalPage<=1?"hidden_elem":'')+(' '+"mtm"))},k.createElement("span",{className:"prs"},this.props.currentPage+" / "+this.props.totalPage),k.createElement(p,null,k.createElement(l,{href:{url:'#'},image:k.createElement(i,{src:r('/images/ui/x/pager/left.png')}),size:"small",onClick:this._loadPreviousPage,disabled:this.props.currentPage===1}),k.createElement(l,{href:{url:'#'},image:k.createElement(i,{src:r('/images/ui/x/pager/right.png')}),size:"small",onClick:this._loadNextPage,disabled:this.props.currentPage===this.props.totalPage})))),k.createElement("div",{className:"mtm"},k.createElement(g,{accountID:this.props.accountID,termsAccepted:this.state.termsAccepted,onTermsCheckboxChanged:this._onTermsCheckboxChanged})))),k.createElement(o,null,k.createElement(n,{use:"confirm",onClick:this._onCreateAudienceButtonClick,disabled:this._getShouldDiableCreateButton(),label:"Create Audience"}))));},_getShouldDiableCreateButton:function(){var u=this._getSelectedListIDs();return !this.state.termsAccepted||u.length===0;},_onTermsCheckboxChanged:function(u){this.setState({termsAccepted:u.target.checked});},_loadPreviousPage:function(){this.props.onLoadContactsLists(this.props.currentPage-1);},_loadNextPage:function(){this.props.onLoadContactsLists(this.props.currentPage+1);},_getSelectedListsSentence:function(){var u=this._getSelectedListIDs().length;if(u===0){return ("No list selected");}else if(u===1){return ("1 list selected");}else return (s._("{numSelectedLists} lists selected",[s.param("numSelectedLists",u)]));},_getSelectedListIDs:function(){return Object.keys(this.state.selectedListIDs).filter(function(u){return this.state.selectedListIDs[u];}.bind(this));},_onListSelectionChange:function(u){var v=this.state.selectedListIDs;v[u]=!v[u];this.setState({selectedListIDs:v});},_onSelectAllLists:function(){var u=this.state.selectedListIDs;(this.props.contactsLists||[]).forEach(function(v){u[v.list_id]=true;});this.setState({selectedListIDs:u});},_onDeselectAllLists:function(){var u=this.state.selectedListIDs;(this.props.contactsLists||[]).forEach(function(v){u[v.list_id]=false;});this.setState({selectedListIDs:u});},_onCreateAudienceButtonClick:function(){this.props.onCreateAudienceClick(this.state.selectedListIDs);}});e.exports=t;},null);
__d("AudienceManagerDownloadReportLink.react",["AdInterfacesUiLogger","AudienceManagerLoggingEvents","DOM","Link.react","React","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n=(a.Blob||a.BlobBuilder||a.WebKitBlobBuilder)&&(a.URL||a.webkitURL);function o(r){var s=r.join("\n"),t=a.Blob;if(t)return new t([s],{type:'text/plain'});var u=a.BlobBuilder||a.WebKitBlobBuilder;if(u){var v=new u();v.append(s);return v.getBlob('text/plain');}return null;}function p(r){var s=o(r);if(!s)return;var t=a.URL||a.webkitURL;m(t.createObjectURL);var u=t.createObjectURL(s),v=i.create('a',{href:u,download:'export.csv'});v.click();}var q=k.createClass({displayName:"AudienceManagerDownloadReportLink",propTypes:{errorTokenLists:k.PropTypes.array},render:function(){if(this.props.errorTokenLists&&this.props.errorTokenLists.length>0&&n){var r=function(){g.log(h.AM_CA_CREATE_VIEW_ERROR_REPORT);p(this.props.errorTokenLists);}.bind(this);return (k.createElement(j,{target:"#",onClick:r},"View error report"));}return null;}});e.exports=q;},null);
__d("AudienceManagerCompleteUploadMessage.react",["AudienceManagerDownloadReportLink.react","ImageBlock.react","Image.react","InlineBlock.react","React","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o='/images/ads/audience_manager/ca_done.png',p=44,q=k.createClass({displayName:"AudienceManagerCompleteUploadMessage",propTypes:{message:k.PropTypes.string.isRequired,numberOfValidRecords:k.PropTypes.number,numberOfTotalRecords:k.PropTypes.number,errorTokenLists:k.PropTypes.array},render:function(){return (k.createElement("div",{className:"_3-97"},k.createElement(h,{spacing:"large"},k.createElement(i,{src:o}),k.createElement(j,{alignv:"middle",height:p},k.createElement(l,{weight:"bold",size:"medium",display:"block"},this.props.message),k.createElement("div",null,this._renderRecordMessage(),' ',k.createElement(g,{errorTokenLists:this.props.errorTokenLists}))))));},_renderRecordMessage:function(){if(this.props.numberOfValidRecords&&this.props.numberOfTotalRecords)return (k.createElement(l,{size:"small"},n._("{number of successfully-uploaded records} records uploaded.",[n.param("number of successfully-uploaded records",this.props.numberOfValidRecords)])));return null;}});e.exports=q;},null);
__d("AudienceManagerCompleteUploadNotice.react",["React","XUINotice.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l=g.createClass({displayName:"AudienceManagerCompleteUploadNotice",render:function(){return (g.createElement("div",{className:"_3-8z _3-97"},g.createElement(h,null,g.createElement(i,{size:"small",display:"block"},"It will take up to 30 minutes for your audience to be ready for use. We'll notify you when your audience is ready. You can also check status in Audience Manager."))));}});e.exports=l;},null);
__d("AdsClearableTextInput.react",["XUITextInput.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","XUICloseButton.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n=l.createClass({displayName:"AdsClearableTextInput",propTypes:{id:l.PropTypes.string,height:l.PropTypes.string,onChange:l.PropTypes.func.isRequired,placeholder:l.PropTypes.string,value:l.PropTypes.string},getInitialState:function(){return {inputValue:this.props.value};},render:function(){return (l.createElement("div",{id:"clearableInput"},this._renderClearableInput()));},_renderClearableInput:function(){return (l.createElement("div",null,l.createElement(i,null,l.createElement(h,null,l.createElement(g,{className:"_14e8",placeholder:this.props.placeholder,value:this.state.inputValue,height:this.props.height,onChange:this._onChange})),l.createElement(j,{horizontal:"right",vertical:"top"},l.createElement(k,{onClick:this._onClearInput,className:"_2kaq"})))));},_onClearInput:function(o){var p='';this.setState({inputValue:p});this.props.onChange(p);},_onChange:function(o){this.setState({inputValue:o.target.value});this.props.onChange(o.target.value);}});e.exports=n;},null);
__d("FBReplaceLink.react",["Link.react","React","fbt"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:"FBReplaceLink",propTypes:{label:h.PropTypes.string},getDefaultProps:function(){var k="Show";return {label:k};},getInitialState:function(){return {isReplaced:false};},_replace:function(){this.setState({isReplaced:true});},render:function(){if(this.state.isReplaced)return h.createElement("div",null,this.props.children);return (h.createElement("div",null,h.createElement(g,{onClick:this._replace},this.props.label)));}});e.exports=j;},null);
__d("AudienceNameAndDescriptionInput.react",["AdsClearableTextInput.react","FBReplaceLink.react","React","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.createClass({displayName:"AudienceNameAndDescriptionInput",propTypes:{audienceName:i.PropTypes.string.isRequired,description:i.PropTypes.string,onAudienceNameChange:i.PropTypes.func.isRequired,onDescriptionChange:i.PropTypes.func.isRequired},render:function(){return (i.createElement("div",null,i.createElement("div",{className:"_3-8z _3-97"},i.createElement(j,{weight:"bold",display:"block",shade:"medium",className:"_3-95"},"Audience Name"),i.createElement(g,{placeholder:"Name your audience",height:"tall",value:this.props.audienceName,onChange:this.props.onAudienceNameChange})),this._renderDescription()));},_renderDescription:function(){if(this.props.description){return this._renderClearableDescription();}else return (i.createElement(h,{label:"Add a description"},this._renderClearableDescription()));},_renderClearableDescription:function(){return (i.createElement("div",{className:"_3-8z _3-97"},i.createElement(j,{weight:"bold",shade:"medium",display:"block",className:"_3-95"},"Description"),i.createElement(g,{placeholder:"Add a description",height:"tall",value:this.props.description||'',onChange:this.props.onDescriptionChange})));}});e.exports=m;},null);
__d("AudienceManagerUploadCompleteDialogContent.react",["AudienceManagerCompleteUploadMessage.react","AudienceManagerCompleteUploadNotice.react","AudienceNameAndDescriptionInput.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';var p=j.createClass({displayName:"AudienceManagerUploadCompleteDialogContent",propTypes:{numberOfValidRecords:j.PropTypes.number,numberOfTotalRecords:j.PropTypes.number,audiences:j.PropTypes.object.isRequired,errorTokenLists:j.PropTypes.array,allowNextStep:j.PropTypes.bool.isRequired,onNextClick:j.PropTypes.func.isRequired,onCompleteClick:j.PropTypes.func.isRequired},getInitialState:function(){return {updatedAudiences:{}};},render:function(){var q="Thanks for creating a Custom Audience";return (j.createElement("div",null,j.createElement(k,null,j.createElement("div",{className:"_50_z"},j.createElement(g,{message:q,numberOfValidRecords:this.props.numberOfValidRecords,numberOfTotalRecords:this.props.numberOfTotalRecords,errorTokenLists:this.props.errorTokenLists}),j.createElement("hr",null),this._renderUploadCompleteInput(),j.createElement(h,null))),j.createElement(m,null,this._renderButton())));},_renderButton:function(){if(this.props.allowNextStep)return (j.createElement(l,{use:"confirm",onClick:this._onNextClick,label:"Next"}));return (j.createElement(l,{onClick:this._onCompleteClick,label:"Done"}));},_renderUploadCompleteInput:function(){var q=[];for(var r in this.props.audiences)q.push(this._renderUpdateAudienceInput(this.props.audiences[r].name,r));return q;},_renderUpdateAudienceInput:function(q,r){var s=function(u){this._onAudienceNameInputChange(u,r);}.bind(this),t=function(u){this._onDescriptionInputChange(u,r);}.bind(this);return (j.createElement(i,{key:r,audienceName:q,onAudienceNameChange:s,onDescriptionChange:t}));},_onAudienceNameInputChange:function(q,r){this._updateAudienceStateByField('name',q,r);},_onDescriptionInputChange:function(q,r){this._updateAudienceStateByField('description',q,r);},_updateAudienceStateByField:function(q,r,s){var t={};if(this.state.updatedAudiences[s]){t=this.state.updatedAudiences[s];}else Object.assign(t,this.props.audiences[s]);t[q]=r;var u=this.state.updatedAudiences;u[s]=t;this.setState({updatedAudiences:u});},_onCompleteClick:function(){this.props.onCompleteClick(this.state.updatedAudiences);},_onNextClick:function(){this.props.onNextClick(this.state.updatedAudiences);}});e.exports=p;},null);
__d("AudienceManagerUploadDialogContent.react",["AdsXUIProgressBar.react","React","XUIDialogBody.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=h.createClass({displayName:"AudienceManagerUploadDialogContent",propTypes:{progress:h.PropTypes.number.isRequired},render:function(){return (h.createElement(i,null,h.createElement(g,{className:"_5go",animated:true,value:this.props.progress}),h.createElement("div",{className:"_5gp"},h.createElement(j,{weight:"bold",size:"small"},"UPLOADING"))));}});e.exports=m;},null);
__d("AudienceManagerUploadErrorDialogContent.react",["AudienceManagerDownloadReportLink.react","Image.react","React","XUIDialogBody.react","XUIButton.react","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o='/images/ads/audience_manager/error.png',p=i.createClass({displayName:"AudienceManagerUploadErrorDialogContent",propTypes:{numLines:i.PropTypes.number,numErrors:i.PropTypes.number.isRequired,errorTokenLists:i.PropTypes.array,onUploadAnotherFileClick:i.PropTypes.func.isRequired,onContinueCreateAudience:i.PropTypes.func.isRequired},getDefaultProps:function(){return {numLines:1};},render:function(){return (i.createElement(j,null,i.createElement("div",{className:"_50_z _5wby"},this._renderErrorMessage(),this._renderErrorSampleMessage(),i.createElement(g,{errorTokenLists:this.props.errorTokenLists}),i.createElement("div",null,"You can choose a new file or continue uploading file."),this._renderButtons())));},_renderErrorMessage:function(){var q;if(this.props.numLines<n.CLUSTER_API_MAX_SIZE){q=m._("We found {numErrors} errors in your file",[m.param("numErrors",this.props.numErrors)]);}else q=m._("We found {numErrors} errors in the first 10,000 records of your file",[m.param("numErrors",this.props.numErrors)]);return (i.createElement("div",null,i.createElement(h,{src:o,className:"_2pii"}),i.createElement("span",{className:"_5wb_ _1ols"},q)));},_renderErrorSampleMessage:function(){var q=(this.props.errorTokenLists||[]).slice(0,2),r=q.join("; ");return (i.createElement("div",null,m._("E.g. {errorTokens}",[m.param("errorTokens",r)])));},_renderButtons:function(){return (i.createElement("div",{className:"_3-8x"},i.createElement(k,{onClick:this.props.onUploadAnotherFileClick,label:"Choose a New File"}),i.createElement("span",{className:"_2pis _2pii"},"OR"),i.createElement(k,{onClick:this.props.onContinueCreateAudience,label:"Continue Uploading File"})));}});e.exports=p;},null);
__d("AudienceManagerUploadFileErrorDialogContent.react",["Image.react","React","XUIDialogBody.react","XUIButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m='/images/ads/audience_manager/error.png',n=h.createClass({displayName:"AudienceManagerUploadFileErrorDialogContent",propTypes:{errorDetails:h.PropTypes.string.isRequired,onUploadAnotherFileClick:h.PropTypes.func.isRequired},render:function(){return (h.createElement(i,null,h.createElement("div",{className:"_50_z _5wby"},this._renderErrorMessage(),this._renderErrorDetailsMessage(),this._renderButtons())));},_renderErrorMessage:function(){var o="We are not able to upload your file.";return (h.createElement("div",null,h.createElement(g,{src:m,className:"_2pii"}),h.createElement("span",{className:"_5wb_ _1ols"},o)));},_renderErrorDetailsMessage:function(){return (h.createElement("div",null,l._("Error: {error details}",[l.param("error details",this.props.errorDetails)])));},_renderButtons:function(){return (h.createElement("div",{className:"_3-8x"},h.createElement(j,{onClick:this.props.onUploadAnotherFileClick,href:{url:'#'},label:"Choose a New File"})));}});e.exports=n;},null);
__d("AudienceManagerCreateAudienceDialog.react",["AdInterfacesUiLogger","AdsAMCreateAudienceServerActions","AdsAMCreateAudienceStore","AdsAMCreateAudienceViewActions","AdsAMViewActions","AdsCreateMobileRemarketingAudienceDialog.react","AudienceManagerNextStepDialogContent.react","AudienceManagerLookalikeDialog.react","AudienceManagerCopyPasteInitDialogContent.react","AudienceManagerCreateAudienceInitDialogContent.react","AudienceManagerCustomerListDialogContent.react","AudienceManagerCreateAudienceFileImportInitDialogContent.react","AudienceManagerErrorDialogContent.react","AudienceManagerLoggingEvents","AudienceManagerMailChimpInitDialogContent.react","AudienceManagerMailChimpSelectListDialogContent.react","AudienceManagerUIConstants","AudienceManagerUploadCompleteDialogContent.react","AudienceManagerUploadDialogContent.react","AudienceManagerUploadErrorDialogContent.react","AudienceManagerUploadFileErrorDialogContent.react","AudienceManagerWorkflowTypes","CreateCADialogTypes","CreateCAStages","LayerHideOnEscape","PopupWindow","React","StoreBasedStateMixin","URI","XUIDialog.react","XUIDialogTitle.react","XUISpinner.react","XUIText.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa){'use strict';var qa=new ia('/ads/manage/mailchimp_auth_init/'),ra="",sa=ga.createClass({displayName:"AudienceManagerCreateAudienceDialog",mixins:[ha(i)],propTypes:{onAudienceAdded:ga.PropTypes.func.isRequired,accountID:ga.PropTypes.string.isRequired,tosAccepted:ga.PropTypes.object.isRequired,tosRequirementsForAccount:ga.PropTypes.object.isRequired,onCancel:ga.PropTypes.func.isRequired,defaultMobileApp:ga.PropTypes.object,autoLaunch:ga.PropTypes.object,allowNextStep:ga.PropTypes.bool},getDefaultProps:function(){return {allowNextStep:false};},calculateState:function(){return {viewDialogType:i.getViewDialogType(),viewStage:i.getViewStage(),numberOfRecords:i.getNumberOfRecords(),audiences:i.getAudiences(),currentPage:i.getCurrentPage(),totalPage:i.getTotalPage(),progress:i.getProgress(),contactsLists:i.getContactsLists(),selectableContactsLists:i.getSelectableContactsLists(),errorTokenLists:i.getErrorTokenLists(),errorDetailsForLimitReach:i.getErrorDetailsForLimitReach(),errorMessage:i.getErrorMessage()};},componentDidMount:function(){this.refs.dialog.layer.updatePosition=oa;g.log(t.AM_CA_CREATE_DIALOG_LOAD,{auto_launch:this.props.autoLaunch});if(this.props.autoLaunch)switch(this.props.autoLaunch.workflow_id){case ba.DATA_FILE:setTimeout(function(){return j.setViewStage(da.FILE_IMPORT_INIT);});break;case ba.MAIL_CHIMP:setTimeout(function(){return j.setViewStage(da.MAIL_CHIMP_INIT);});break;case ba.COPY_PASTE:setTimeout(function(){return j.setViewStage(da.COPY_PASTE_INIT);});break;case ba.MACA:setTimeout(function(){return j.setViewDialogType(ca.MACA);});break;case ba.CUSTOM_LIST:setTimeout(function(){return j.setViewStage(da.CUSTOMER_LIST);});break;}},render:function(){switch(this.state.viewDialogType){case ca.MACA:var ta=this.props.autoLaunch?this.props.autoLaunch.workflow_config:null;return (ga.createElement(l,{dao:this.props.dao,onAudienceAdded:this.props.onAudienceAdded,onCancel:this._onCancel,accountID:this.props.accountID,tosAccepted:this.props.tosAccepted,tosRequirementsForAccount:this.props.tosRequirementsForAccount,defaultMobileApp:this.props.defaultMobileApp,config:ta}));case ca.LOOKALIKE:var ua=this.state.audiences[Object.keys(this.state.audiences)[0]];return (ga.createElement(n,{dao:this.props.dao,accountID:this.props.accountID,audience:ua,onAudienceAdded:this.props.onAudienceAdded,onClose:this._onFinishCreation}));case ca.CUSTOMER_LIST:return (ga.createElement(ja,{layerHideOnBlur:false,shown:true,behaviors:{LayerHideOnEscape:ea},ref:"dialog",width:w.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},ga.createElement(ka,null,ga.createElement(ma,{weight:"bold",size:"medium"},"Create a Custom Audience")),this._renderDialogContentForStage()));}},_renderDialogContentForStage:function(){switch(this.state.viewStage){case da.CREATE_AUDIENCE_INIT:return (ga.createElement(p,{onCancel:this._onCancel,onCustomerListClick:this._onCustomerListClick,onWebsiteTrafficClick:this._onWebsiteTrafficClick,onMobileAppClick:this._onMobileAppClick}));case da.CUSTOMER_LIST:return (ga.createElement(q,{onBack:this._onCustomerListBack,onUploadFileClick:this._onUploadFileClick,onCopyPasteClick:this._onCopyPasteClick,onThirdPartyClick:this._onThirdPartyClick}));case da.FILE_IMPORT_INIT:return (ga.createElement(r,{accountID:this.props.accountID,onBack:this._onInitBackToCustomerList,onCreateAudienceClick:this._onFileImportCreateAudienceClick}));case da.COPY_PASTE_INIT:return (ga.createElement(o,{accountID:this.props.accountID,onBack:this._onInitBackToCustomerList,onCreateAudienceClick:this._onCopyPasteCreateAudienceClick}));case da.MAIL_CHIMP_INIT:return (ga.createElement(u,{onBack:this._onInitBackToCustomerList,onLogInToMailChimpClick:this._onLogInToMailChimpClick}));case da.MAIL_CHIMP_AUTHENTICATE:case da.FILE_IMPORT_CHECK_FILE:return (ga.createElement("div",{className:"_3773"},ga.createElement(la,{background:"light",size:"large"})));case da.MAIL_CHIMP_FETCH_COMPLETE:return (ga.createElement(v,{accountID:this.props.accountID,contactsLists:this.state.contactsLists,totalPage:this.state.totalPage,currentPage:this.state.currentPage,onLoadContactsLists:this._onLoadContactsLists,onCreateAudienceClick:this._onMailChimpCreateAudienceClick}));case da.MAIL_CHIMP_UPLOAD:case da.COPY_PASTE_UPLOAD:case da.FILE_IMPORT_UPLOAD:return (ga.createElement(y,{progress:this.state.progress}));case da.FILE_IMPORT_UPLOAD_CONVERT_ERROR:case da.FILE_IMPORT_NO_VALID_ENTRY:return (ga.createElement(aa,{errorDetails:this.state.errorMessage,onUploadAnotherFileClick:this._onFileImportAnotherFileClick}));case da.MAIL_CHIMP_UPLOAD_COMPLETE:case da.COPY_PASTE_UPLOAD_COMPLETE:case da.FILE_IMPORT_UPLOAD_COMPLETE:return (ga.createElement(x,{numberOfValidRecords:this.state.numberOfRecords.validRecord,numberOfTotalRecords:this.state.numberOfRecords.totalRecord,errorTokenLists:this.state.errorTokenLists,audiences:this.state.audiences,onCompleteClick:this._onUploadCompleteClick,onNextClick:this._onUploadCompleteNextClick,allowNextStep:this.props.allowNextStep}));case da.FILE_IMPORT_UPLOAD_ERROR:return (ga.createElement(z,{numLines:this.state.errorDetailsForLimitReach.numLines,numErrors:this.state.errorDetailsForLimitReach.numErrors,errorTokenLists:this.state.errorTokenLists,onUploadAnotherFileClick:this._onFileImportAnotherFileClick,onContinueCreateAudience:this._onFileImportContinueCreateAudienceClick}));case da.CREATION_COMPLETE_NEXT_STEP:return (ga.createElement(m,{onFinish:this._onFinishCreation,onCreateAdClick:this._onCreateAdClick,onCreateLookalikeClick:this._onCreateLookalikeClick}));case da.FATAL_ERROR:return (ga.createElement(s,{errorMessage:this.state.errorMessage,onOkClick:this._onFinishCreation}));}},_onCustomerListClick:function(){g.log(t.AM_CA_CREATE_CUSTOMER_LIST_CLICK);j.setViewStage(da.CUSTOMER_LIST);},_onWebsiteTrafficClick:function(){g.log(t.AM_CA_CREATE_WCA_CLICK);k.showWCADialog(null);this.props.onCancel();},_onMobileAppClick:function(){g.log(t.AM_CA_CREATE_MACA_CLICK);j.showMobileAppDialog();},_onCustomerListBack:function(){g.log(t.AM_CA_CREATE_CUSTOMER_LIST_BACK_CLICK);j.setViewStage(da.CREATE_AUDIENCE_INIT);},_onUploadFileClick:function(){g.log(t.AM_CA_CREATE_FILE_IMPORT_CLICK);j.setViewStage(da.FILE_IMPORT_INIT);},_onCopyPasteClick:function(){g.log(t.AM_CA_CREATE_COPY_PASTE_CLICK);j.setViewStage(da.COPY_PASTE_INIT);},_onThirdPartyClick:function(){g.log(t.AM_CA_CREATE_MAIL_CHIMP_CLICK);j.setViewStage(da.MAIL_CHIMP_INIT);},_onInitBackToCustomerList:function(){g.log(t.AM_CA_CREATE_BACK_TO_CUSTOMER_LIST_CLICK,{from_view:this.state.viewStage});j.setViewStage(da.CUSTOMER_LIST);},_onFileImportCreateAudienceClick:function(ta,ua,va,wa){g.log(t.AM_CA_CREATE_FILE_IMPORT_CREATE_AUDIENCE_CLICK);j.startFileImport(this.props.accountID,ta,ua,va,this.props.tosRequirementsForAccount.custom_audience,wa);},_onFileImportContinueCreateAudienceClick:function(){g.log(t.AM_CA_CREATE_FILE_IMPORT_CONTINUE_CREATE_AUDIENCE_CLICK);h.continueUploadSelectedFileToServer();},_onFileImportAnotherFileClick:function(){g.log(t.AM_CA_CREATE_FILE_IMPORT_CHOOSE_ANOTHER_FILE_CLICK);j.setViewStage(da.FILE_IMPORT_INIT);},_onCopyPasteCreateAudienceClick:function(ta,ua,va,wa){g.log(t.AM_CA_CREATE_COPY_PASTE_CREATE_AUDIENCE_CLICK);j.startCopyPasteUpload(this.props.accountID,ta,ua,va,this.props.tosRequirementsForAccount.custom_audience,wa);},_getAudiencesNeedUpdate:function(ta){var ua=[];for(var va in ta){var wa=ta[va].name,xa=ta[va].description;if(wa!==this.state.audiences[va].name||!!xa)ua.push(ta[va]);}return ua;},_onUploadCompleteClick:function(ta){var ua=this._getAudiencesNeedUpdate(ta);g.log(t.AM_CA_CREATE_UPLOAD_COMPLETE_CLICK,{audiences_need_update:ua,from_view:this.state.viewStage,audiences:this.state.audiences});j.updateAudiencesNameDescription(this.props.accountID,ua,this._onFinishCreation);},_onUploadCompleteNextClick:function(ta){var ua=this._getAudiencesNeedUpdate(ta);g.log(t.AM_CA_CREATE_UPLOAD_COMPLETE_CLICK,{audiences_need_update:ua,from_view:this.state.viewStage,audiences:this.state.audiences});var va=function(){j.setViewStage(da.CREATION_COMPLETE_NEXT_STEP);};j.updateAudiencesNameDescription(this.props.accountID,ua,va);},_onCreateAdClick:function(){g.log(t.AM_CA_CREATE_CREATE_AD_CLICK,{audiences:this.state.audiences});h.batchCreateAd(this.props.accountID,this.state.audiences);this._onFinishCreation();},_onCreateLookalikeClick:function(){g.log(t.AM_CA_CREATE_CREATE_LAL_CLICK,{audiences:this.state.audiences});j.setViewDialogType(ca.LOOKALIKE);},_onLogInToMailChimpClick:function(){g.log(t.AM_CA_CREATE_LOG_INTO_MAIL_CHIMP_CLICK);j.setViewStage(da.MAIL_CHIMP_AUTHENTICATE);window.handleMailChimpCredential=this._handleMailChimpCredential;fa.open(qa,w.MAILCHIMP_WINDOW_HEIGHT,w.MAILCHIMP_WINDOW_WIDTH);},_handleMailChimpCredential:function(ta){ra=ta;j.handleMailChimpLogin(this.props.accountID,ta);},_onLoadContactsLists:function(ta){j.loadContactsList(this.props.accountID,ra,ta);},_onMailChimpCreateAudienceClick:function(ta){var ua=this._getSelectedLists(ta);g.log(t.AM_CA_CREATE_MAIL_CHIMP_CREATE_AUDIENCE_CLICK,{selected_lists_num:ua.length});j.startMailChimpUpload(this.props.accountID,ua,this.props.tosRequirementsForAccount.custom_audience,ra);},_getSelectedLists:function(ta){var ua=[];Object.keys(ta).forEach(function(va){if(ta[va])ua.push(this.state.selectableContactsLists[va]);}.bind(this));return ua;},_onFinishCreation:function(){Object.keys(this.state.audiences).forEach(function(ta){this.props.onAudienceAdded(ta);}.bind(this));g.log(t.AM_CA_CREATE_FINISH_CREATION_SUCCESS,{audiences:this.state.audiences});this._onCancel();},_onToggle:function(ta){if(!ta){g.log(t.AM_CA_CREATE_CLOSE_DIALOG);this._onCancel();}},_onCancel:function(){this.props.onCancel();j.reset();}});e.exports=sa;},null);
__d("AudienceManagerSavedTargetSpecUtils",["AdsAPIObjectives"],function(a,b,c,d,e,f,g){var h=['AudienceEditor','LocationEditor','AgeEditor','GenderEditor','LanguagesEditor','AdvancedDemographicsDropdownEditor','SectionDivider','InterestsEditor','SectionDivider','BehaviorsEditor','SectionDivider','CategoriesEditor','ConnectionsEditor'],i=['AudienceEditor','LocationEditor','AgeEditor','GenderEditor','LanguagesEditor','AdvancedDemographicsDropdownEditor','SectionDivider','InterestsEditor','SectionDivider','BehaviorsEditor','SectionDivider','CategoriesEditor','ConnectionsEditor'],j=['TargetingSentences'],k={getDetailsViewConfiguration:function(){var l=h.map(function(m){return {component:m};});return l;},getDialogLeftSideConfiguration:function(){var l=i.map(function(m){return {component:m};});return l;},getDialogRightSideConfiguration:function(){var l=j.map(function(m){return {component:m};});return l;},getExtraData:function(l,m){return {accountID:l,dao:m,objectiveData:{shouldDisableInclusion:true,isObjectiveAppStoreMedia:true,objective:g.MOBILE_APP_INSTALLS},destinationData:{}};},validateSpec:function(l){var m=l.geo_locations||l.custom_audiences;return !!m;}};e.exports=k;},null);
__d("AudienceManagerSavedTargetSpecDialog.react",["AdsCommonTargetingViewController.react","AudienceManagerSavedTargetSpecUtils","AudienceManagerTextInput","AudienceManagerUIConstants","Grid.react","InfoTable.react","InfoTableRow.react","InfoTableSection.react","LayerHideOnEscape","React","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";var y=k.GridItem,z=p.createClass({displayName:"AudienceManagerSavedTargetSpecDialog",propTypes:{accountID:p.PropTypes.string.isRequired,dao:p.PropTypes.object.isRequired,onClose:p.PropTypes.func,title:p.PropTypes.string.isRequired,saveButtonLabel:p.PropTypes.string.isRequired,savedTargetSpec:p.PropTypes.object,onTargetSpecChanged:p.PropTypes.func,onTargetSpecCreated:p.PropTypes.func},getInitialState:function(){return {name:this.props.savedTargetSpec?this.props.savedTargetSpec.audience_name:''};},componentWillMount:function(){this._controller=new g();this._controller.setConfiguration(h.getDialogLeftSideConfiguration());this._controller.setExtraData(h.getExtraData(this.props.accountID,this.props.dao));this._rightSideController=new g();this._rightSideController.setConfiguration(h.getDialogRightSideConfiguration());this._rightSideController.setExtraData(h.getExtraData(this.props.accountID,this.props.dao));if(this.props.savedTargetSpec){this._controller.setApiSpec(this.props.savedTargetSpec.target_spec);this._rightSideController.setApiSpec(this.props.savedTargetSpec.target_spec);}this._controller.subscribeApiChange(this._handleSpecChanged);},render:function(){return (p.createElement(q,{width:j.STS_DIALOG_WIDTH,fixedTopPosition:j.DEFAULT_DIALOG_TOP_POS,onToggle:this._handleToggle,behaviors:{LayerHideOnEscape:o},shown:true},this._renderDialogTitle(),this._renderDialogBody(),this._renderDialogFooter()));},componentWillUnmount:function(){this._controller.destroy();this._controller.clearAllState();this._rightSideController.destroy();this._rightSideController.clearAllState();},_renderDialogTitle:function(){return (p.createElement(v,null,this.props.title));},_renderDialogBody:function(){var aa=p.createElement(k,{cols:2},p.createElement(y,{className:"_3gzt"},p.createElement(l,{className:"_5rkp"},p.createElement(n,null,p.createElement(m,{label:"Name",className:"_5oup"},p.createElement(i,{value:this.state.name,onChange:this._handleNameChanged,className:"_5nsb"})))),p.createElement("div",null,this._controller.render())),p.createElement(y,{className:"_3gzu"},this._rightSideController.render()));return (p.createElement(r,null,aa));},_handleNameChanged:function(aa){this.setState({name:aa});},_renderDialogFooter:function(){return (p.createElement(t,{leftContent:this._renderLeftFooter()},p.createElement(s,{use:"default",onClick:this._handleClose}),p.createElement(u,{use:"confirm",action:"confirm",onClick:this._handleSaveClicked,disabled:this._shouldDisableSave(),label:this.props.saveButtonLabel})));},_renderLeftFooter:function(){return p.createElement("div",null,j.STS_FORM_INSTRUCTION);},_handleSpecChanged:function(aa){this.forceUpdate();},_shouldDisableSave:function(){return !this.state.name||!this.state.name.trim()||!h.validateSpec(this._controller.getApiSpec());},_handleSaveClicked:function(){if(!this.props.savedTargetSpec){this.props.onTargetSpecCreated(this.state.name,this._controller.getApiSpec());}else{var aa={name:this.state.name,targetSpec:this._controller.getApiSpec()};this.props.onTargetSpecChanged(this.props.savedTargetSpec,aa);}this._handleClose();},_handleToggle:function(){this._handleClose();},_handleClose:function(){this.props.onClose&&this.props.onClose();}});e.exports=z;},null);
__d("AudienceManagerBlankState.react",["AdInterfacesUiLogger","AdsManagerEmptyStateInfo.react","AsyncRequest","AudienceManagerCreateAudienceDialog.react","AudienceManagerSavedTargetSpecDialog.react","AudienceManagerLoggingEvents","AudienceManagerLookalikeDialog.react","Link.react","React","URI","XUIButton.react","XUIText.react","adsGKCheck","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=o.createClass({displayName:"AudienceManagerBlankState",propTypes:{dao:o.PropTypes.object.isRequired,onAudienceAdded:o.PropTypes.func.isRequired,onSavedTargetSpecCreated:o.PropTypes.func,onSavedTargetSpecChanged:o.PropTypes.func,accountId:o.PropTypes.string.isRequired,tosAccepted:o.PropTypes.object.isRequired,tosRequirementsForAccount:o.PropTypes.object.isRequired,autoLaunch:o.PropTypes.object,canWrite:o.PropTypes.bool},getInitialState:function(){return {showCreateAudienceDialog:false,showCreateLookalikeAudienceDialog:false,showCreateSavedTargetGroupDialog:false,ignoreLinkClicks:false};},render:function(){var w="Reach the People Who Matter to You";return (o.createElement("div",{className:"_3yh5"},o.createElement(h,{message:w},this._renderBodyAndHelpLink(),this._renderCreateCustomAudiences(),this._renderCreateLookalikeAudiences(),this._renderCreateSavedTargetGroup(),this._renderCustomAudienceDialog(),this._renderLookalikeDialog(),this._renderSavedTargetGroupDialog())));},_renderBodyAndHelpLink:function(){return (o.createElement("div",{className:"_2b16"},"Create and save audiences to reach the people who matter to your business.",o.createElement(n,{href:p('/help/459892990722543'),target:"_blank",className:"mls"},"Learn More")));},_renderScheduleCall:function(){if(!s('smb_custom_audiences_support_unit'))return;return (o.createElement(r,{size:"small",className:"_3-9b"},o.createElement(n,{onClick:this._onHelpClicked},"Get Free Support")));},_renderCreateCustomAudiences:function(){return (o.createElement("div",{className:"_2b17"},o.createElement(r,{display:"block",className:"fcb"},o.createElement(r,{display:"block",weight:"bold"},"Custom Audiences"),o.createElement(r,{size:"small"},"Connect with the people who have already shown an interest in your business or product with Custom Audiences. You can create an audience from your customer contacts, website traffic or mobile app.")),o.createElement(q,{use:"confirm",size:"medium",label:"Create a Custom Audience",onClick:this._onCreateAudienceButtonClick,className:"_2b18"}),this._renderScheduleCall()));},_renderCreateLookalikeAudiences:function(){return (o.createElement("div",{className:"_2b17"},o.createElement(r,{display:"block",className:"fcb"},o.createElement(r,{display:"block",weight:"bold"},"Lookalike Audiences"),o.createElement(r,{size:"small"},"Reach new people who are similar to audiences you already care about. You can create a lookalike audience based on people who like your Page, conversion pixels or any of your existing Custom Audiences.")),o.createElement(q,{use:"confirm",size:"medium",label:"Create a Lookalike Audience",onClick:this._onCreateLookalikeButtonClick,className:"_2b18"}),this._renderScheduleCall()));},_renderCreateSavedTargetGroup:function(){if(this.props.onSavedTargetSpecChanged&&this.props.onSavedTargetSpecCreated)return (o.createElement("div",{className:"_2b17"},o.createElement(r,{display:"block",className:"fcb"},o.createElement(r,{display:"block",weight:"bold"},"Saved Target Group"),o.createElement(r,{size:"small"},"Save your commonly used targeting options for easy reuse. Choose your audiences, demographics, interests and behaviors, then save them to reuse in future ads.")),o.createElement(q,{use:"confirm",size:"medium",label:"Create a Saved Target Group",onClick:this._onCreateSaveTargetGroupButtonClick,className:"_2b18"}),this._renderScheduleCall()));},_renderCustomAudienceDialog:function(){if(this.state.showCreateAudienceDialog)return (o.createElement(j,{dao:this.props.dao,onAudienceAdded:this.props.onAudienceAdded,accountID:this.props.accountId,tosAccepted:this.props.tosAccepted,tosRequirementsForAccount:this.props.tosRequirementsForAccount,onCancel:this._onCreateAudienceDialogCancel,allowNextStep:true}));return null;},_renderLookalikeDialog:function(){if(this.state.showCreateLookalikeAudienceDialog)return (o.createElement(m,{accountID:this.props.accountId,audience:null,dao:this.props.dao,onAudienceAdded:this.props.onAudienceAdded,onClose:this._onCreateLookalikAudienceClose}));},_renderSavedTargetGroupDialog:function(){if(this.state.showCreateSavedTargetGroupDialog&&this.props.onSavedTargetSpecCreated&&this.props.onSavedTargetSpecChanged){var w="Create Saved Target Group",x="Create Audience";return (o.createElement(k,{accountID:this.props.accountId,dao:this.props.dao,title:w,saveButtonLabel:x,savedTargetSpec:null,onTargetSpecChanged:this.props.onSavedTargetSpecChanged,onTargetSpecCreated:this.props.onSavedTargetSpecCreated,onClose:this._onCreateSavedTargetGroupClose}));}},_onCreateAudienceDialogCancel:function(){this.setState({showCreateAudienceDialog:false});},_onCreateLookalikAudienceClose:function(){this.setState({showCreateLookalikeAudienceDialog:false});},_onCreateSavedTargetGroupClose:function(){this.setState({showCreateSavedTargetGroupDialog:false});},_onCreateLookalikeButtonClick:function(){g.log(l.AM_LAL_NUX_CREATE_AUDIENCE);this.setState({showCreateLookalikeAudienceDialog:true});},_onCreateAudienceButtonClick:function(){g.log(l.AM_CA_NUX_CREATE_AUDIENCE);this.setState({showCreateAudienceDialog:true});},_onCreateSaveTargetGroupButtonClick:function(){this.setState({showCreateSavedTargetGroupDialog:true});},_onHelpClicked:function(){if(this.state.ignoreLinkClicks)return;this.setState({ignoreLinkClicks:true});new i().setURI('/ajax/help/contact/676632195760106').setHandler(function(){return this.setState({ignoreLinkClicks:false});}.bind(this)).send();}});e.exports=v;},null);
__d("AudienceManagerBulkDeleteDialog.react",["AudienceManagerUIConstants","React","XUISortableDataTable.react","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUISpinner.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=h.createClass({displayName:"AudienceManagerBulkDeleteDialog",propTypes:{selectedAudiences:h.PropTypes.array.isRequired,controller:h.PropTypes.object.isRequired,onBulkDelete:h.PropTypes.func.isRequired,onClose:h.PropTypes.func.isRequired},getInitialState:function(){return {adgroupData:null,isDeleting:false};},componentWillMount:function(){this.props.controller.loadAudienceAdgroups(this.props.selectedAudiences,function(t){this.setState({adgroupData:t,hasError:false});}.bind(this),function(t){this.setState({adgroupData:t,hasError:true});}.bind(this));},render:function(){return (h.createElement(j,{shown:true,width:g.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},h.createElement(o,null,h.createElement("span",null,r._("Delete {total_audiences} audiences?",[r.param("total_audiences",this.props.selectedAudiences.length)]))),this._renderDialogContent()));},_onToggle:function(t){if(!t)this.props.onClose();},_onDeleteClick:function(){this.setState({isDeleting:true});this.props.onBulkDelete(this.props.selectedAudiences);},_renderDialogContent:function(){if(this.state.isDeleting){return (h.createElement(k,null,h.createElement("div",{className:"_5rkr"},h.createElement("div",{className:"_5saq"},h.createElement("p",null,"Please wait while we delete these audiences..."),h.createElement(p,{size:"large"})))));}else{var t=this.state.adgroupData?this._renderAudienceAdgroups():this._renderLoadingAdgroup();return (h.createElement("div",null,h.createElement(k,null,h.createElement("div",{className:"_5rkr"},t)),h.createElement(m,null,h.createElement(l,{use:"default",action:"close",onClick:this.props.onClose}),h.createElement(n,{use:"confirm",action:"confirm",onClick:this._onDeleteClick,enabled:this.state.adgroupData,label:"Delete All"}))));}},_renderLoadingAdgroup:function(){return (h.createElement("div",{className:"_5saq"},h.createElement("p",null,"Please wait while we find the ads which use these audiences..."),h.createElement(p,{size:"large"})));},_renderAudienceAdgroups:function(){var t=true;if(this.state.hasError){t=false;}else this.state.adgroupData.forEach(function(v){if(v.data.length>0)t=false;});if(t)return ("There are currently no active ads using these audiences. You can safely delete these audiences.");var u=this.state.hasError?"We can't load ads for some audiences.":null;return (h.createElement("div",null,u,"Here are your active ads currently using these audiences.",h.createElement("div",{className:"_38yq"},this._renderAudienceAdgroupsBody()),"If you delete these audiences, all these ads will stop delivering. Are you sure you want to delete these audiences?"));},_renderAudienceAdgroupsBody:function(){var t=this.state.adgroupData.map(function(u,v){var w=this.props.selectedAudiences[v];if(!u.data)return (h.createElement("div",null,r._("Cannot load ads using {audience_name}",[r.param("audience_name",h.createElement("b",null,w.name))])));if(u.data.length>0){var x=[{id:'name',label:"Name"}],y=u.data.map(function(z){return {name:z.name};});return (h.createElement("div",null,r._("Ads using {audience_name}",[r.param("audience_name",h.createElement("b",null,w.name))]),h.createElement("div",{className:"_38yr"},h.createElement(i,{rows:y,columns:x,outerBorder:true}))));}return null;}.bind(this));return t;}});e.exports=s;},null);
__d("AudienceManagerBulkDeleteSTSDialog.react",["AudienceManagerUIConstants","React","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react","cx","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";var r=h.createClass({displayName:"AudienceManagerBulkDeleteSTSDialog",propTypes:{selectedAudiences:h.PropTypes.array.isRequired,onBulkDelete:h.PropTypes.func.isRequired,onClose:h.PropTypes.func.isRequired},render:function(){return (h.createElement(i,{shown:true,width:g.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},h.createElement(n,null,this._renderDialogTitle()),h.createElement(j,null,this._renderDialogBody()),h.createElement(m,null,h.createElement(l,{use:"default",action:"close",onClick:this.props.onClose}),h.createElement(k,{use:"confirm",action:"confirm",onClick:this._onDeleteClick,label:this._renderDeleteButtonLabel()}))));},_renderDialogTitle:function(){var s;q(this.props.selectedAudiences.length>0);if(this.props.selectedAudiences.length===1){s="Delete 1 audience?";}else s=p._("Delete {total_audiences} audiences?",[p.param("total_audiences",this.props.selectedAudiences.length)]);return h.createElement("span",null,s);},_renderDialogBody:function(){var s;if(this.props.selectedAudiences.length===1){s="Are you sure you want to delete this saved audience?";}else s="Are you sure you want to delete these saved audiences?";return (h.createElement("div",{className:"_5rkr"},s));},_renderDeleteButtonLabel:function(){if(this.props.selectedAudiences.length===1)return ("Delete");return ("Delete All");},_onToggle:function(s){if(!s)this.props.onClose();},_onDeleteClick:function(){this.props.onBulkDelete(this.props.selectedAudiences);}});e.exports=r;},null);
__d("AudienceManagerPopoverButton.react",["ContextualLayer.react","LayerHideOnBlur","React","ReactLayeredComponentMixin","XUIButton.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.createClass({displayName:"AudienceManagerPopoverButton",mixins:[j],propTypes:{label:i.PropTypes.string.isRequired},getInitialState:function(){return {showLayer:false};},render:function(){return (i.createElement(k,{use:this.props.use,ref:"layerButton",onClick:this._showLayer,label:this.props.label}));},_showLayer:function(){if(!this.state.showLayer)this.setState({showLayer:true});},_hideLayer:function(){if(this.state.showLayer)this.setState({showLayer:false});},renderLayers:function(){if(!this.state.showLayer)return null;return {layer:i.createElement(g,{alignment:this.props.alignment,key:"layerContent",behaviors:{LayerHideOnBlur:h},contextRef:"layerButton",position:"below",onToggle:this._handleLayerToggle,shown:true},i.createElement("div",{className:"_50dm"},this.props.children))};},_handleLayerToggle:function(n){if(!n)setTimeout(this._hideLayer,20);}});e.exports=m;},null);
__d("AudienceManagerColumnSelector.react",["AudienceManagerPopoverButton.react","AudienceManagerUIConstants","CurrentUser","InputLabel.react","React","XUICheckboxInput.react","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=h.COLUMNS,q='\u25BE',r=k.createClass({displayName:"AudienceManagerColumnSelector",propTypes:{columnsShown:k.PropTypes.object.isRequired,onSelectorChange:k.PropTypes.func.isRequired},render:function(){var s=o._("Customize Columns {downTriangle}",[o.param("downTriangle",' '+q)]),t=this._getColumnsSettings().map(function(u){return this._renderColumnCheckbox(u.value,u.label,u.shown,u.description);}.bind(this));return (k.createElement(g,{label:s},k.createElement("div",{className:"_r-r"},t)));},_renderColumnCheckbox:function(s,t,u,v){return (k.createElement("div",{className:"_r-s",key:s},k.createElement(j,null,k.createElement(l,{name:"columns",value:s,defaultChecked:u,onChange:this.props.onSelectorChange}),k.createElement("label",{className:"_r-t"},t)),k.createElement(m,{display:"block",shade:"light",className:"_r-u"},v)));},_getColumnsSettings:function(){var s=this.props.columnsShown,t=[{value:'type',label:p.TYPE.label,shown:s.type,description:p.TYPE.description},{value:'source',label:p.SOURCE.label,shown:s.source,description:p.SOURCE.description},{value:'size',label:p.SIZE.label,shown:s.size,description:p.SIZE.description},{value:'status',label:p.STATUS.label,shown:s.status,description:p.STATUS.description},{value:'dateCreated',label:p.DATE_CREATED.label,shown:s.dateCreated,description:p.DATE_CREATED.description},{value:'audienceID',label:p.AUDIENCE_ID.label,shown:s.audienceID,description:p.AUDIENCE_ID.description},{value:'sharing',label:p.SHARING.label,shown:s.sharing,description:p.SHARING.description}];if(i.isEmployee())t.push({value:'debug',label:"Debug (FB only)",shown:s.debug,description:"Showing API data of the audience"});return t;}});e.exports=r;},null);
__d("AdsAudienceDeliveryStatusUtils",["fbt","CustomAudienceDeliveryStatus"],function(a,b,c,d,e,f,g,h){var i={};i[h.ACTIVE]="Ready";i[h.INACTIVE]="Not Ready";var j=function(n){return i[n]?i[n]:"Error";},k=function(n){return n!==h.ACTIVE&&n!==h.INACTIVE;},l=function(n){return n===h.ACTIVE;},m=function(n){return n===h.INACTIVE;};e.exports={textByStatus:j,isError:k,isActive:l,isInactive:m};},null);
__d("AudienceManagerBulkActionUtils",["AdsAudienceDeliveryStatusUtils"],function(a,b,c,d,e,f,g){var h={canDelete:function(i,j){return this._ownAllAudiences(i,j);},canCreateAd:function(i,j){if(i.length===0)return false;return this._areAllAudiencesActive(i);},_ownAllAudiences:function(i,j){for(var k=0;k<i.length;k++)if(i[k].account_id!=j)return false;return true;},_areAllAudiencesActive:function(i){for(var j=0;j<i.length;j++){var k=g.isActive(i[j].delivery_status.code);if(!k)return false;}return true;},_allAudienceIDsSelected:function(i,j){for(var k=0;k<j.length;k++)if(!this._isAudienceIDSelected(i,j[k]))return false;return true;},_isAudienceIDSelected:function(i,j){for(var k=0;k<i.length;k++)if(i[k].id===j)return true;return false;}};e.exports=h;},null);
__d("AudienceManagerCreateAdButton.react",["AdInterfacesUiLogger","AdsAMAudienceUtils","AudienceManagerBulkActionUtils","AudienceManagerLoggingEvents","AudienceManagerUIConstants","React","XUIButton.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=l.createClass({displayName:"AudienceManagerCreateAdButton",propTypes:{accountID:l.PropTypes.string.isRequired,audiences:l.PropTypes.array.isRequired,label:l.PropTypes.string.isRequired,controller:l.PropTypes.object.isRequired,onAdCreate:l.PropTypes.func},render:function(){return (l.createElement(m,{label:this.props.label,onClick:this._handleCreateAdClicked,disabled:!this._canCreateAd()}));},_canCreateAd:function(){var o=this.props.audiences.some(function(q){return h.isSavedTargetSpec(q);});if(o){if(this.props.audiences.length===1){this._createAdUsingSavedTargetSpec=true;return true;}return false;}var p=i.canCreateAd(this.props.audiences,this.props.accountID);if(p){this._createAdUsingSavedTargetSpec=false;return true;}return false;},_handleCreateAdClicked:function(){var o=this._createAdUsingSavedTargetSpec?k.AUDIENCE_TYPE.SAVED_TARGET_SPEC:k.AUDIENCE_TYPE.CUSTOM_AUDIENCE;g.log(j.AM_TABLE_ACTION_CREATE_AD_CLICKED,{num_audiences:this.props.audiences.length,audience_type:o});if(this._createAdUsingSavedTargetSpec){this._createAdFromSavedTargetSpec();return;}this._createAdFromSelectedCAs();},_createAdFromSelectedCAs:function(){if(this.props.onAdCreate){var o=this.props.audiences.map(function(q){return {id:q.id,name:q.name};}),p={custom_audiences:o};this.props.onAdCreate(p);return;}this.props.controller.bulkCreateAd&&this.props.controller.bulkCreateAd(this.props.audiences);},_createAdFromSavedTargetSpec:function(){if(this.props.onAdCreate){this.props.onAdCreate(this.props.audiences[0].target_spec);return;}this.props.controller.createAdFromSavedTargetSpec(this.props.audiences[0]);}});e.exports=n;},null);
__d("AudienceManagerDeleteDialog.react",["AdsAMViewActions","AudienceManagerUIConstants","React","XUISortableDataTable.react","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUISpinner.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=i.createClass({displayName:"AudienceManagerDeleteDialog",propTypes:{audience:i.PropTypes.object.isRequired,dao:i.PropTypes.object.isRequired,onAudienceDeleted:i.PropTypes.func.isRequired},getInitialState:function(){return {name:this.props.audience.name,adGroups:null,lookalikes:null};},_loadLookalikes:function(u){this.props.dao.fetch.anyIDs.one(function(v){this.setState({lookalikes:v});this._loadAdGroups(Object.keys(v).concat(this.props.audience.id));}.bind(this),{ids:u});},_loadAdGroups:function(u){var v={},w=u.map(function(x){return {parameters:{audienceId:x},callback:function(y){y.forEach(function(z){var aa=z.id;if(v[aa]){v[aa].audiences.push(x);}else{z.audiences=[x];v[aa]=z;}});}};});this.props.dao.fetch.adGroupsForCustomaudiences.multi(function(){return this.setState({adGroups:v});}.bind(this),{requests:w});},componentWillMount:function(){var u=this.props.audience.id;this.props.dao.fetch.anyIDs.one(function(v){var w=v&&v[u]&&v[u].lookalike_audience_ids;if(w&&w.length>0){this._loadLookalikes(w);}else{this.setState({lookalikes:{}});this._loadAdGroups([u]);}}.bind(this),{ids:u});},render:function(){var u=this.state.lookalikes&&Object.keys(this.state.lookalikes).length>0;return (i.createElement(k,{shown:true,width:h.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},i.createElement(p,null,i.createElement("span",null,s._("Delete audience {audience name}?",[s.param("audience name",this.state.name)]))),i.createElement(l,null,i.createElement("div",{className:"_5rkr"},this._renderDialogBody())),i.createElement(n,null,i.createElement(m,{use:"default",action:"close",onClick:this._onCancelClick}),i.createElement(o,{use:"confirm",action:"confirm",onClick:this._onDeleteClick,enabled:this._dataLoaded(),label:u?("Delete Audiences"):("Delete Audience")}))));},_dataLoaded:function(){var u=this.state;return u.adGroups!==null&&u.lookalikes!==null;},_renderDialogBody:function(){if(!this._dataLoaded()){return (i.createElement("div",{className:"_5saq"},i.createElement("p",null,"Please wait while we find the ads which use this audience..."),i.createElement(q,{size:"large"})));}else return this._renderConfirmMessage();},_renderConfirmMessage:function(){var u=this.state.adGroups,v=this.state.lookalikes,w=this.state.name;if(Object.keys(u).length===0)if(Object.keys(v).length===0){return (s._("Deleting \"{name}\" will permanently remove it from your account. You won't be able to restart any ads that used this audience in the past.",[s.param("name",w)]));}else return (i.createElement("div",null,i.createElement("p",null,s._("\"{name}\" was used to create one or more lookalike audiences.",[s.param("name",w)])),i.createElement("p",null,"Deleting this audience will permanently remove it from your account along with the associated lookalike audiences. You won't be able restart any ads that have used these audiences in the past.")));var x=[{id:'adGroup',label:"Ad"},{id:'audiences',label:"Audiences"}],y=Object.keys(u).map(function(aa){var ba=u[aa];return {adGroup:ba.name,audiences:ba.audiences.map(function(ca){if(ca===this.props.audience.id){return w;}else return v[ca].name;}.bind(this)).map(function(ca){return i.createElement("span",null,ca,i.createElement("br",null));})};}.bind(this)),z=(i.createElement("div",{className:"_256f"},i.createElement(j,{rows:y,columns:x,columnToSortBy:"adGroup",outerBorder:true})));if(Object.keys(v).length>0){return (i.createElement("div",null,i.createElement("p",null,s._("\"{name}\" was used to create one or more lookalike audiences. These audiences are also currently being used in active ads.",[s.param("name",w)])),i.createElement("p",null,"Deleting these audiences will permanently remove them from your account and automatically stop the following ads. You won't be able to restart any ads that have used these audiences in the past."),z));}else return (i.createElement("div",null,i.createElement("p",null,s._("\"{name}\" is currently being used in active ads.",[s.param("name",w)])),i.createElement("p",null,"Deleting this audience will permanently remove it from your account and automatically stop the following ads. You won't be able restart any ads that used this audience in the past."),z));},_onCancelClick:function(){g.closeDeleteAudienceDialog();},_onDeleteClick:function(){this.props.onAudienceDeleted(this.props.audience);g.closeDeleteAudienceDialog();},_onToggle:function(){g.closeDeleteAudienceDialog();}});e.exports=t;},null);
__d("AudienceManagerEditAudienceCompleteDialogContent.react",["AudienceManagerCompleteUploadMessage.react","AudienceManagerCompleteUploadNotice.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=i.createClass({displayName:"AudienceManagerEditAudienceCompleteDialogContent",propTypes:{numberOfValidRecords:i.PropTypes.number,numberOfTotalRecords:i.PropTypes.number,errorTokenLists:i.PropTypes.array,onCompleteClick:i.PropTypes.func.isRequired},render:function(){var p="Thanks for editing a Custom Audience";return (i.createElement("div",null,i.createElement(j,null,i.createElement("div",{className:"_5rkr"},i.createElement(g,{message:p,numberOfValidRecords:this.props.numberOfValidRecords,numberOfTotalRecords:this.props.numberOfTotalRecords,errorTokenLists:this.props.errorTokenLists}),i.createElement("hr",null),i.createElement(h,null))),i.createElement(l,null,i.createElement(k,{onClick:this.props.onCompleteClick,label:"Done"}))));}});e.exports=o;},null);
__d("AudienceManagerEditAudienceInitDialogContent.react",["AbstractTextArea.react","AudienceManagerAppIDInput.react","AudienceManagerDataTypeSelector.react","AudienceManagerErrorContextualDialog.react","AudienceManagerFBCustomAudienceTerm.react","AudienceManagerViewFormatingExampleLink.react","AudienceNameAndDescriptionInput.react","CustomAudienceUploadErrorBox.react","FBDragDropBox.react","RadioList.react","React","ReactLayeredComponentMixin","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIGrayText.react","isEmail","isInternationalPhoneNumber","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){'use strict';var ba=p.LabeledItem,ca={ADD:'add',REMOVE:'remove'},da={COPY_PASTE:'copy_paste',FILE_IMPORT:'file'},ea=/^\d+$/,fa=20,ga=17,ha=['csv','txt'],ia=/\r\n|\n|\r|;|,/,ja=q.createClass({displayName:"AudienceManagerEditAudienceInitDialogContent",mixins:[r],propTypes:{accountID:q.PropTypes.string.isRequired,audienceName:q.PropTypes.string.isRequired,description:q.PropTypes.string,onEditMetaData:q.PropTypes.func.isRequired,onUploadFileAdd:q.PropTypes.func.isRequired,onUploadFileRemove:q.PropTypes.func.isRequired,onCopyPasteAdd:q.PropTypes.func.isRequired,onCopyPasteRemove:q.PropTypes.func.isRequired,onNoUpload:q.PropTypes.func.isRequired},getInitialState:function(){return {audienceName:this.props.audienceName,description:this.props.description,fileError:null,selectedFile:null,pasteBin:'',selectedDataType:aa.UPLOAD_TYPE_EMAIL,addRemoveMode:ca.ADD,uploadMethod:da.FILE_IMPORT,termsAccepted:true,appIDEntries:[]};},renderLayers:function(){if(this.state.uploadMethod===da.FILE_IMPORT)return {contextualDialog:q.createElement(j,{contextRef:"dragdropbox",shown:this._getShouldShowErrorDialog(),offsetY:ga},this.state.fileError)};return null;},render:function(){return (q.createElement("div",null,q.createElement(s,null,q.createElement("div",{className:"_50_z"},q.createElement(m,{audienceName:this.props.audienceName,description:this.props.description,onAudienceNameChange:this._onAudienceNameChange,onDescriptionChange:this._onDescriptionChange}),q.createElement("div",{className:"_3-97 _3-8z"},q.createElement(i,{defaultValue:this.state.selectedDataType,canUploadAppUserID:this.props.canUploadAppUserID,onTypeChange:this._onDataTypeChange})),this._renderAppIDInput(),this._renderAddRemoveModeSection(),this._renderEditSection(),q.createElement("div",null,q.createElement(k,{accountID:this.props.accountID,termsAccepted:this.state.termsAccepted,onTermsCheckboxChanged:this._onTermsCheckboxChanged})))),q.createElement(u,null,q.createElement(t,{use:"confirm",disabled:!this._getShouldEnableSaveButton(),onClick:this._onSaveAudienceButtonClick,label:"Save"}))));},_renderAddRemoveModeSection:function(){return (q.createElement("div",{className:"_3-8z _3-97"},q.createElement(v,{weight:"bold",display:"block",shade:"medium",className:"_3-95"},"Update Audience"),q.createElement("div",null,q.createElement(p,{selectedValue:this.state.addRemoveMode,onValueChange:this._onAddRemoveModeChange},q.createElement(ba,{value:ca.ADD,className:"_iv3 _3-8w _3-94"},"Add People"),q.createElement(ba,{value:ca.REMOVE,className:"_iv3 _3-8w _3-94"},"Remove People")))));},_renderEditSection:function(){var ka=null;if(this.state.uploadMethod===da.COPY_PASTE){ka=this._renderCopyPasteSection();}else if(this.state.uploadMethod===da.FILE_IMPORT)ka=this._renderFileUploadSection();return (q.createElement("div",{className:"_3-8z _3-97"},q.createElement(v,{weight:"bold",display:"block",shade:"medium",className:"_3-95"},"How do you want to add customers?"),q.createElement("div",null,q.createElement(p,{selectedValue:this.state.uploadMethod,onValueChange:this._onUploadMethodChange},q.createElement(ba,{value:da.FILE_IMPORT,className:"_iv3 _3-8w _3-94"},"Upload a File"),q.createElement(ba,{value:da.COPY_PASTE,className:"_iv3 _3-8w _3-94"},"Copy and Paste"))),ka));},_renderCopyPasteSection:function(){var ka=null;if(!!this.state.error)ka=q.createElement(n,{message:this.state.error});return (q.createElement("div",null,q.createElement("div",{className:"_3-8- _3-98"},q.createElement(g,{className:"_5ukc",value:this.state.pasteBin,onChange:this._onPasteBinChange,placeholder:"Paste your customer list here."}),ka),q.createElement("div",null,"You can copy columns from a spreadsheet with one record per row or a list of records separated by a comma.",' ',q.createElement(l,null))));},_renderFileUploadSection:function(){return (q.createElement("div",null,q.createElement("div",{className:"_3-8- _3-98"},q.createElement(o,{ref:"dragdropbox",onFilesSelection:this._onFilesSelection,onFileRemove:this._onFileRemove,onFileChange:this._onFileChange,selectedFile:this.state.selectedFile,hasError:this._getShouldShowErrorDialog()})),q.createElement("div",null,"You can upload files in .csv or .txt format.",' ',q.createElement(l,null))));},_renderAppIDInput:function(){if(this.state.selectedDataType===aa.UPLOAD_TYPE_UID)return (q.createElement(h,{accountID:this.props.accountID,onAppEntriesUpdated:this._onAppEntriesUpdated}));return null;},_getShouldShowErrorDialog:function(){return !!this.state.fileError;},_getShouldEnableSaveButton:function(){if((this.state.audienceName!==this.props.audienceName||this.state.description!==this.props.description)&&this.state.termsAccepted&&!this.state.fileError&&!this.state.error)return true;if(this.state.selectedDataType===aa.UPLOAD_TYPE_UID){var ka=this.state.appIDEntries.some(function(la){return la.getAuxiliaryData().invalid;});if(this.state.appIDEntries.length<=0||!!ka)return false;}if(this.state.uploadMethod===da.FILE_IMPORT){return !!this.state.audienceName&&!!this.state.selectedFile&&!!this.state.termsAccepted&&!this.state.fileError;}else if(this.state.uploadMethod===da.COPY_PASTE)return !!this.state.audienceName&&!!this.state.pasteBin&&!!this.state.termsAccepted;},_onAudienceNameChange:function(ka){this.setState({audienceName:ka});},_onDescriptionChange:function(ka){this.setState({description:ka});},_onAddRemoveModeChange:function(ka){this.setState({addRemoveMode:ka});},_onUploadMethodChange:function(ka){this.setState({uploadMethod:ka,selectedFile:null,pasteBin:'',error:null,fileError:null});},_onTermsCheckboxChanged:function(ka){this.setState({termsAccepted:ka.target.checked});},_onDataTypeChange:function(ka){this.setState({selectedDataType:ka.value});},_onAppEntriesUpdated:function(ka){this.setState({appIDEntries:ka});},_onFileRemove:function(){this.setState({fileError:null,selectedFile:null});},_onFilesSelection:function(ka){this._onFileChange(ka.target.files);},_onFileChange:function(ka){var la=ka[0];if(la){if(!la.size){this.setState({selectedFile:la,fileError:"File appears to be empty."});return;}var ma='',na='';if(la.name.indexOf('.')>=0){ma=la.name.split('.').pop();na=la.name.substr(0,la.name.lastIndexOf('.'));}var oa=ha.indexOf(ma.toLowerCase())!=-1;if(!oa){this.setState({selectedFile:la,fileError:"File must be .csv or .txt format."});return;}this.setState({selectedFile:la,fileError:null});}},_onPasteBinChange:function(ka){this.setState({pasteBin:ka.target.value});},_onSaveAudienceButtonClick:function(){if(this.state.audienceName!==this.props.audienceName||this.state.description!==this.props.description)this.props.onEditMetaData(this.state.audienceName,this.state.description);if(this.state.uploadMethod===da.FILE_IMPORT&&!!this.state.selectedFile){if(this.state.addRemoveMode===ca.ADD){this.props.onUploadFileAdd(this.state.selectedDataType,this.state.appIDEntries,this.state.selectedFile);}else this.props.onUploadFileRemove(this.state.selectedDataType,this.state.appIDEntries,this.state.selectedFile);}else if(this.state.uploadMethod===da.COPY_PASTE&&!!this.state.pasteBin){var ka=this.state.pasteBin.trim().split(ia).map(function(ma){return ma.trim();});ka=ka.filter(function(ma){return !!ma;});if(ka.length>aa.CLUSTER_API_MAX_SIZE){this.setState({error:z._("You can upload at most {max number of entries} entries using copy and paste. Try uploading a file instead.",[z.param("max number of entries",aa.CLUSTER_API_MAX_SIZE)])});return;}var la=this._onCheckError(ka);if(!la){if(this.state.addRemoveMode===ca.ADD){this.props.onCopyPasteAdd(this.state.selectedDataType,this.state.appIDEntries,ka);}else this.props.onCopyPasteRemove(this.state.selectedDataType,this.state.appIDEntries,ka);}else this.setState({error:z._("You need to add at least {mininum number of entries} valid entries to continue.",[z.param("mininum number of entries",fa)])});}else this.props.onNoUpload();},_onCheckError:function(ka){var la=ka;if(this.state.selectedDataType===aa.UPLOAD_TYPE_EMAIL){la=ka.filter(function(ma){ma=ma.toLowerCase();return w(ma);});}else if(this.state.selectedDataType===aa.UPLOAD_TYPE_PHONE){la=ka.filter(function(ma){return x(ma);});}else if(this.state.selectedDataType===aa.UID)la=ka.filter(function(ma){return ea(ma);});if(la.length<fa)return true;return false;}});e.exports=ja;},null);
__d("AudienceManagerEditAudienceNameDescriptionInitDialogContent.react",["AudienceManagerFBCustomAudienceTerm.react","AudienceNameAndDescriptionInput.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=i.createClass({displayName:"AudienceManagerEditAudienceNameDescriptionInitDialogContent",propTypes:{accountID:i.PropTypes.string.isRequired,audienceName:i.PropTypes.string.isRequired,description:i.PropTypes.string,onEditMetaData:i.PropTypes.func.isRequired},getInitialState:function(){return {audienceName:this.props.audienceName,description:this.props.description,termsAccepted:true};},render:function(){return (i.createElement("div",null,i.createElement(j,null,i.createElement("div",{className:"_50_z"},i.createElement(h,{audienceName:this.props.audienceName,description:this.props.description,onAudienceNameChange:this._onAudienceNameChange,onDescriptionChange:this._onDescriptionChange}),i.createElement("div",{className:"_3-8z"},i.createElement(g,{accountID:this.props.accountID,termsAccepted:this.state.termsAccepted,onTermsCheckboxChanged:this._onTermsCheckboxChanged})))),i.createElement(l,null,i.createElement(k,{use:"confirm",disabled:!this._getShouldEnableSaveButton(),onClick:this._onSaveAudienceButtonClick,label:"Save"}))));},_getShouldEnableSaveButton:function(){return (this.state.audienceName!==this.props.audienceName||this.state.description!==this.props.description)&&this.state.termsAccepted;},_onAudienceNameChange:function(p){this.setState({audienceName:p});},_onDescriptionChange:function(p){this.setState({description:p});},_onTermsCheckboxChanged:function(p){this.setState({termsAccepted:p.target.checked});},_onSaveAudienceButtonClick:function(){this.props.onEditMetaData(this.state.audienceName,this.state.description);}});e.exports=o;},null);
__d("AudienceManagerEditAudienceDialog.react",["AdInterfacesUiLogger","AdsAMCreateAudienceServerActions","AdsAudienceDataSourceUtils","AdsAMCreateAudienceStore","AdsAMCreateAudienceViewActions","AdsCustomAudienceType","AudienceManagerEditAudienceCompleteDialogContent.react","AudienceManagerEditAudienceInitDialogContent.react","AudienceManagerEditAudienceNameDescriptionInitDialogContent.react","AudienceManagerLoggingEvents","AudienceManagerUIConstants","AudienceManagerUploadDialogContent.react","AudienceManagerUploadErrorDialogContent.react","AudienceManagerUploadFileErrorDialogContent.react","CreateCAStages","React","StoreBasedStateMixin","XUIDialog.react","XUIDialogTitle.react","XUISpinner.react","XUIText.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){var ea=l.SUBTYPES,fa=v.createClass({displayName:"AudienceManagerEditAudienceDialog",mixins:[w(j)],propTypes:{accountID:v.PropTypes.string.isRequired,audience:v.PropTypes.object.isRequired,onAudienceChanged:v.PropTypes.func.isRequired,onClose:v.PropTypes.func.isRequired},calculateState:function(){return {viewStage:j.getViewStage(),progress:j.getProgress(),numberOfRecords:j.getNumberOfRecords(),errorTokenLists:j.getErrorTokenLists(),errorDetailsForLimitReach:j.getErrorDetailsForLimitReach(),errorMessage:j.getErrorMessage()};},componentDidMount:function(){this.refs.dialog.layer.updatePosition=ca;k.setViewStage(u.EDIT_AUDIENCE_INIT);},render:function(){return (v.createElement(x,{layerHideOnBlur:false,shown:true,ref:"dialog",width:q.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},v.createElement(y,null,v.createElement(aa,{weight:"bold",size:"medium"},"Edit a Custom Audience")),this._renderDialogContentForStage()));},_renderDialogContentForStage:function(){switch(this.state.viewStage){case u.EDIT_AUDIENCE_INIT:if(this._isCreatedFromFile())return (v.createElement(n,{accountID:this.props.accountID,audienceName:this.props.audience.name,description:this.props.audience.description,onEditMetaData:this._onEditMetaData,onUploadFileAdd:this._onUploadFileAddUsers,onUploadFileRemove:this._onUploadFileRemoveUsers,onCopyPasteAdd:this._onCopyPasteAddUsers,onCopyPasteRemove:this._onCopyPasteRemoveUsers,onNoUpload:this._onClose}));return (v.createElement(o,{accountID:this.props.accountID,audienceName:this.props.audience.name,description:this.props.audience.description,onEditMetaData:this._onEditMetaDataOnly}));case u.FILE_IMPORT_CHECK_FILE:return (v.createElement("div",{className:"_3773"},v.createElement(z,{background:"light",size:"large"})));case u.COPY_PASTE_UPLOAD:case u.FILE_IMPORT_UPLOAD:return (v.createElement(r,{progress:this.state.progress}));case u.FILE_IMPORT_UPLOAD_CONVERT_ERROR:return (v.createElement(t,{errorDetails:this.state.errorMessage,onUploadAnotherFileClick:this._onFileImportAnotherFileClick}));case u.COPY_PASTE_UPLOAD_COMPLETE:case u.FILE_IMPORT_UPLOAD_COMPLETE:return (v.createElement(m,{numberOfValidRecords:this.state.numberOfRecords.validRecord,numberOfTotalRecords:this.state.numberOfRecords.totalRecord,errorTokenLists:this.state.errorTokenLists,onCompleteClick:this._onEditCompleteClick}));case u.FILE_IMPORT_UPLOAD_ERROR:return (v.createElement(s,{numLines:this.state.errorDetailsForLimitReach.numLines,numErrors:this.state.errorDetailsForLimitReach.numErrors,errorTokenLists:this.state.errorTokenLists,onUploadAnotherFileClick:this._onFileImportAnotherFileClick,onContinueCreateAudience:this._onFileImportContinueCreateAudienceClick}));}},_isCreatedFromFile:function(){if(!this.props.audience.data_source||this.props.audience.subtype!==ea.REGULAR)return false;var ga=this.props.audience.data_source.type;if(ga===i.TYPES.FILE_IMPORTED||ga===i.TYPES.UNKNOWN)return true;return false;},_onEditMetaData:function(ga,ha){g.log(p.AM_CA_EDIT_UPDATE_META_DATA,{audience_id:this.props.audience.id});this.props.onAudienceChanged(this.props.audience,{name:ga,description:ha});},_onEditMetaDataOnly:function(ga,ha){g.log(p.AM_CA_EDIT_UPDATE_META_DATA_ONLY,{audience_id:this.props.audience.id});this.props.onAudienceChanged(this.props.audience,{name:ga,description:ha});this._onClose();},_onUploadFileAddUsers:function(ga,ha,ia){g.log(p.AM_CA_EDIT_FILE_IMPORT_ADD_USERS,{audience_id:this.props.audience.id});k.setViewStage(u.FILE_IMPORT_CHECK_FILE);h.uploadFileAddUsers(this.props.accountID,this.props.audience.id,ga,ha,ia);},_onUploadFileRemoveUsers:function(ga,ha,ia){g.log(p.AM_CA_EDIT_FILE_IMPORT_REMOVE_USERS,{audience_id:this.props.audience.id});k.setViewStage(u.FILE_IMPORT_CHECK_FILE);h.uploadFileRemoveUsers(this.props.accountID,this.props.audience.id,ga,ha,ia);},_onCopyPasteAddUsers:function(ga,ha,ia){g.log(p.AM_CA_EDIT_COPY_PASTE_ADD_USERS,{audience_id:this.props.audience.id});h.copyPasteAddUsers(this.props.accountID,this.props.audience.id,ga,ha,ia);},_onCopyPasteRemoveUsers:function(ga,ha,ia){g.log(p.AM_CA_EDIT_COPY_PASTE_REMOVE_USERS,{audience_id:this.props.audience.id});h.copyPasteRemoveUsers(this.props.accountID,this.props.audience.id,ga,ha,ia);},_onFileImportAnotherFileClick:function(){g.log(p.AM_CA_EDIT_FILE_IMPORT_CHOOSE_ANOTHER_FILE_CLICK,{audience_id:this.props.audience.id});k.setViewStage(u.EDIT_AUDIENCE_INIT);},_onFileImportContinueCreateAudienceClick:function(){g.log(p.AM_CA_EDIT_FILE_IMPORT_CONTINUE_EDIT_AUDIENCE_CLICK,{audience_id:this.props.audience.id});h.continueUploadSelectedFileToServer();},_onEditCompleteClick:function(){g.log(p.AM_CA_EDIT_FINISH_SUCCESS,{audience_id:this.props.audience.id});this._onClose();},_onToggle:function(ga){if(!ga){g.log(p.AM_CA_EDIT_CLOSE_DIALOG,{audience_id:this.props.audience_id});this._onClose();}},_onClose:function(){this.props.onClose();k.reset();}});e.exports=fa;},null);
__d("AudienceManagerInlineCAActionSelector.react",["AdsActionSelector.react","AdsAudienceDataSourceUtils","AudienceManagerBulkActionUtils","AdsAMAudienceUtils","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.Option,n=g.Separator,o=k.createClass({displayName:"AudienceManagerInlineActionSelector",propTypes:{accountID:k.PropTypes.string.isRequired,selectedAudiences:k.PropTypes.array.isRequired,canOptOut:k.PropTypes.bool,onBulkAction:k.PropTypes.func.isRequired,onCAAction:k.PropTypes.func.isRequired,onSTGAction:k.PropTypes.func.isRequired},getDefaultProps:function(){return {canOptOut:false};},render:function(){var p=("Actions"),q=false,r=false,s=false,t=false,u=false,v=false,w=false,x,y=[h.SUBTYPES.WEB_PIXEL_HITS,h.SUBTYPES.WEB_PIXEL_COMBINATION_EVENTS,h.SUBTYPES.USER_PROPERTIES];if(this.props.selectedAudiences.length===0){x=this.props.onCAAction;w=true;}else if(this.props.selectedAudiences.length===1){var z=this.props.selectedAudiences[0];if(j.isSavedTargetSpec(z)){x=this.props.onSTGAction;q=true;u=true;}else{x=this.props.onCAAction;q=z.permission_for_actions.can_edit;r=z.permission_for_actions.subtype_supports_lookalike;s=z.permission_for_actions.can_share;t=y.indexOf(z.data_source.sub_type)!==-1&&this.props.accountID==z.account_id;u=q;v=z.data_source.type===h.TYPES.FILE_IMPORTED||z.data_source.type===h.TYPES.THIRD_PARTY_IMPORTED;}}else{var aa=false,ba=false;for(var ca=0;ca<this.props.selectedAudiences.length;ca++){z=this.props.selectedAudiences[ca];if(j.isSavedTargetSpec(z)){ba=true;}else aa=true;if(aa&&ba)break;}var da=aa&&ba;if(!da)u=aa?i.canDelete(this.props.selectedAudiences,this.props.accountID):true;x=this.props.onBulkAction;}var ea=[k.createElement(m,{value:"lookalike",disabled:!r},"Create Lookalike"),k.createElement(m,{value:"share",disabled:!s},"Share"),k.createElement(m,{value:"pixel",disabled:!t},"View Pixel")];if(this.props.canOptOut)ea.push(k.createElement(m,{value:"optout",disabled:!v},"Update Opt Out Link"));var fa=[k.createElement(m,{value:"edit",disabled:!q},"Edit"),k.createElement(m,{value:"delete",disabled:!u},"Delete")];return (k.createElement(g,{onAction:x,label:p,disabled:w},ea,k.createElement(n,null),fa));}});e.exports=o;},null);
__d("AudienceManagerOptOutDialog.react",["AdsTextInput.react","AudienceManagerUIConstants","React","URI","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialog.react","XUIDialogTitle.react","XUIError.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';var s=i.createClass({displayName:"AudienceManagerOptOutDialog",propTypes:{audience:i.PropTypes.object.isRequired,onClose:i.PropTypes.func.isRequired,onConfirmClick:i.PropTypes.func.isRequired},getInitialState:function(){return {optOutLink:this.props.audience.opt_out_link?this.props.audience.opt_out_link:"",error:null};},render:function(){return (i.createElement(n,{shown:true,width:h.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},i.createElement(o,null,r._("Edit Opt Out Link for {audience name}",[r.param("audience name",this.props.audience.name)])),i.createElement(k,null,i.createElement("div",{className:"_50_z"},i.createElement("div",{className:"_3-98 _3-8y"},"Add a link that will take people to your privacy policies or advertising opt-out.",i.createElement("br",null),"When you enter the link to the privacy or opt-out page on your website, people will be able to visit it when they click \"x\" on your ad on Facebook. You are responsible for making sure that your custom audiences don't include people who have opted out of seeing your ads."),i.createElement(p,{xuiError:this.state.error},i.createElement(g,{label:"Privacy\/Opt-Out Link",placeholder:"URL",onChange:this._onTextChange,value:this.state.optOutLink})))),i.createElement(m,null,i.createElement(l,{onClick:this.props.onClose,label:"Cancel"}),i.createElement(l,{use:"confirm",onClick:this._onConfirmClick,label:"Confirm"}))));},_onTextChange:function(t){this.setState({optOutLink:t});},_validateLink:function(){var t=new j(this.state.optOutLink);return !!(t.getProtocol()&&t.getDomain());},_onToggle:function(t){if(!t)this.props.onClose();},_onConfirmClick:function(){if(!this._validateLink()){this.setState({error:"Invalid URL entered."});}else{this.setState({error:null});this.props.onConfirmClick(this.props.audience,{opt_out_link:this.state.optOutLink});}}});e.exports=s;},null);
__d("AudienceManagerOptOutUserFileImportInitDialogContent.react",["AudienceManagerFileImportInit.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","cx","fbt","ads-cluster-constants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';var o=h.createClass({displayName:"AudienceManagerOptOutUserFileImportInitDialogContent",propTypes:{accountID:h.PropTypes.string.isRequired,onRemoveClick:h.PropTypes.func.isRequired},getInitialState:function(){return {selectedFile:null,selectedDataType:n.UPLOAD_TYPE_EMAIL,termsAccepted:true};},render:function(){return (h.createElement("div",null,h.createElement(i,null,h.createElement("div",{className:"_50_z"},h.createElement(g,{accountID:this.props.accountID,selectedDataType:this.state.selectedDataType,termsAccepted:this.state.termsAccepted,onFileUpdated:this._onFileUpdated,onDataTypeChanged:this._onDataTypeChanged,onTermsCheckboxChanged:this._onTermsCheckboxChanged}))),h.createElement(k,null,h.createElement(j,{use:"confirm",disabled:!this._getShouldEnableRemoveButton(),onClick:this._onRemoveButtonClick,label:"Remove"}))));},_getShouldEnableRemoveButton:function(){return !!this.state.termsAccepted&&!!this.state.selectedFile;},_onTermsCheckboxChanged:function(p){this.setState({termsAccepted:p.target.checked});},_onDataTypeChanged:function(p){this.setState({selectedDataType:p.value});},_onFileUpdated:function(p){this.setState({selectedFile:p});},_onRemoveButtonClick:function(){this.props.onRemoveClick(this.state.selectedDataType,this.state.selectedFile);}});e.exports=o;},null);
__d("AudienceManagerOptOutUserDialog.react",["AdInterfacesUiLogger","AdsAMCreateAudienceServerActions","AdsAMCreateAudienceStore","AdsAMCreateAudienceViewActions","AudienceManagerEditAudienceCompleteDialogContent.react","AudienceManagerLoggingEvents","AudienceManagerOptOutUserFileImportInitDialogContent.react","AudienceManagerUIConstants","AudienceManagerUploadErrorDialogContent.react","AudienceManagerUploadFileErrorDialogContent.react","CreateCAStages","React","PureStoreBasedStateMixin","XUIDialog.react","XUIDialogTitle.react","XUISpinner.react","XUIText.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){'use strict';var aa=r.createClass({displayName:"AudienceManagerOptOutUserDialog",mixins:[s(i)],propTypes:{accountID:r.PropTypes.string.isRequired,onClose:r.PropTypes.func.isRequired},statics:{calculateState:function(){return {viewStage:i.getViewStage(),progress:i.getProgress(),numberOfRecords:i.getNumberOfRecords(),errorTokenLists:i.getErrorTokenLists(),errorDetailsForLimitReach:i.getErrorDetailsForLimitReach(),errorMessage:i.getErrorMessage()};}},componentDidMount:function(){this.refs.dialog.layer.updatePosition=y;j.setViewStage(q.OPT_OUT_USER_FILE_IMPORT_INIT);},render:function(){return (r.createElement(t,{layerHideOnBlur:false,shown:true,ref:"dialog",width:n.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},r.createElement(u,null,r.createElement(w,{weight:"bold",size:"medium"},"Remove users from all your Custom Audiences")),this._renderDialogContentForStage()));},_renderDialogContentForStage:function(){switch(this.state.viewStage){case q.OPT_OUT_USER_FILE_IMPORT_INIT:return (r.createElement(m,{accountID:this.props.accountID,onRemoveClick:this._onRemoveUsersFromAllCustomAudiences}));case q.FILE_IMPORT_CHECK_FILE:case q.FILE_IMPORT_UPLOAD:return (r.createElement("div",{className:"_3773"},r.createElement(v,{background:"light",size:"large"})));case q.FILE_IMPORT_UPLOAD_CONVERT_ERROR:case q.FILE_IMPORT_NO_VALID_ENTRY:return (r.createElement(p,{errorDetails:this.state.errorMessage,onUploadAnotherFileClick:this._onFileImportAnotherFileClick}));case q.FILE_IMPORT_UPLOAD_COMPLETE:return (r.createElement(k,{numberOfValidRecords:this.state.numberOfRecords.validRecord,numberOfTotalRecords:this.state.numberOfRecords.totalRecord,errorTokenLists:this.state.errorTokenLists,onCompleteClick:this._onEditCompleteClick}));case q.FILE_IMPORT_UPLOAD_ERROR:return (r.createElement(o,{numLines:this.state.errorDetailsForLimitReach.numLines,numErrors:this.state.errorDetailsForLimitReach.numErrors,errorTokenLists:this.state.errorTokenLists,onUploadAnotherFileClick:this._onFileImportAnotherFileClick,onContinueCreateAudience:this._onFileImportContinueRemoveAudienceClick}));}},_onRemoveUsersFromAllCustomAudiences:function(ba,ca){j.setViewStage(q.FILE_IMPORT_CHECK_FILE);h.removeUsersFromAllCustomAudiences(this.props.accountID,ba,ca);},_onFileImportAnotherFileClick:function(){g.log(l.AM_CA_OPT_OUT_USER_CHOOSE_ANOTHER_FILE_CLICK);j.setViewStage(q.OPT_OUT_USER_FILE_IMPORT_INIT);},_onFileImportContinueRemoveAudienceClick:function(){g.log(l.AM_CA_OPT_OUT_USER_CONTINUE_EDIT_AUDIENCE_CLICK);h.continueUploadSelectedFileToServer();},_onEditCompleteClick:function(){g.log(l.AM_CA_OPT_OUT_USER_FINISH_SUCCESS);this._onClose();},_onToggle:function(ba){if(!ba){g.log(l.AM_CA_OPT_OUT_USER_CLOSE_DIALOG);this._onClose();}},_onClose:function(){this.props.onClose();j.reset();}});e.exports=aa;},null);
__d("AudienceManagerPETopNavigation.react",["AdsCreateAudienceActionSelector.react","LeftRight.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){'use strict';var l=i.createClass({displayName:"AudienceManagerPETopNavigation",propTypes:{accountID:i.PropTypes.string.isRequired,onAction:i.PropTypes.func.isRequired,canWrite:i.PropTypes.bool.isRequired,isBlankState:i.PropTypes.bool.isRequired},render:function(){var m=this.props.isBlankState?i.createElement("div",null):i.createElement(g,{onAction:this.props.onAction,disabled:!this.props.canWrite,supportSavedTargetSpec:true});return (i.createElement("div",{className:"_2pi3 _2pia"},i.createElement(h,null,i.createElement("div",{className:"_3dke"},"Audience Home"),m)));}});e.exports=l;},null);
__d("AudienceManagerPlacement",["keyMirror"],function(a,b,c,d,e,f,g){var h=g({NEW_ADS_MANAGER:null,POWER_EDITOR:null,STAND_ALONE:null});e.exports=h;},null);
__d("AudienceManagerSearchBar.react",["Keys","Link.react","React","XUITextInput.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.createClass({displayName:"AudienceManagerSearchBar",propTypes:{onKeywordsChanged:i.PropTypes.func.isRequired,onKeywordsComplete:i.PropTypes.func.isRequired},render:function(){return (i.createElement("div",{className:"_1q48"},i.createElement(j,{className:"_1q49",placeholder:"Search by name",onKeyUp:this._handleKeyUp}),i.createElement(h,{className:"_1q4a",onClick:this.props.onKeywordsComplete})));},_handleKeyUp:function(event){if(event.keyCode!==g.RETURN){this.props.onKeywordsChanged(event);return;}event.preventDefault();this.props.onKeywordsComplete(event);}});e.exports=m;},null);
__d("AdsSelection",["LegacyImmutableObject","StrSet"],function(a,b,c,d,e,f,g,h){var i={};for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(m,n){"use strict";i.selectedIDs=new h(m);i.inversed=!!n;g.call(this,i);}l.isSelected=function(m,n){"use strict";var o=m.selectedIDs.contains(n);return m.inversed?!o:o;};e.exports=l;},null);
__d("AdsSelectableFixedDataTable.react",["AdsSelection","cx","React","XUICheckboxInput.react","FixedDataTable.react","FixedDataTableColumn.react"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=i.Children,n=42,o=i.createClass({displayName:"AdsSelectableFixedDataTable",propTypes:{rowKeyID:i.PropTypes.oneOfType([i.PropTypes.string,i.PropTypes.number]),rowIDGetter:i.PropTypes.func,selection:i.PropTypes.instanceOf(g).isRequired,showCheckBox:i.PropTypes.bool,onSelect:i.PropTypes.func,onSelectAll:i.PropTypes.func},getDefaultProps:function(){return {showCheckBox:true};},getInitialState:function(){return this._calculateState(this.props);},componentWillReceiveProps:function(p){this.setState(this._calculateState(p));},_calculateState:function(p){if(!p.showCheckBox)return {columns:p.children};var q=!!p.onSelectAll,r=[];r.push(i.createElement(l,{align:"center",dataKey:this.props.rowKeyID,headerRenderer:q?this._renderSelectAllRowCheckbox:null,cellRenderer:this._renderSelectRowCheckbox,fixed:true,width:n,cellDataGetter:this._cellDataGetter}));m.forEach(p.children,function(s){r.push(s);});return {columns:r};},render:function(){return (i.createElement("div",{className:"_pl6"},i.createElement(k,i.__spread({},this.props,{onRowMouseDown:this._onRowMouseDown}),this.state.columns)));},_cellDataGetter:function(p,q){var r=this.props.rowIDGetter?this.props.rowIDGetter(p,q):q[p];return g.isSelected(this.props.selection,r);},_renderSelectRowCheckbox:function(p,q,r){var s=r[q];return (i.createElement(j,{inline:true,checked:p,value:s,onChange:this.props.onSelect,className:"_2ljb"}));},_renderSelectAllRowCheckbox:function(){return (i.createElement(j,{checked:this.props.selection.inversed,onChange:this.props.onSelectAll}));},_onRowMouseDown:function(p,q,r){if(this.props.showCheckBox)return;if(this.props.onSelect)this.props.onSelect(p,q,r);}});e.exports=o;},null);
__d("AdsTableSelectionInteractionBase",["AdsSelection","StrSet"],function(a,b,c,d,e,f,g,h){function i(j,k,l,m){"use strict";this.$AdsTableSelectionInteractionBase0=j;this.$AdsTableSelectionInteractionBase1=k;this.$AdsTableSelectionInteractionBase2=l;this.$AdsTableSelectionInteractionBase3=m;this.onSelectAll=this.onSelectAll.bind(this);this.onSelect=this.onSelect.bind(this);this.$AdsTableSelectionInteractionBase4=null;this.$AdsTableSelectionInteractionBase5=[];}i.prototype.$AdsTableSelectionInteractionBase6=function(j){"use strict";return this.$AdsTableSelectionInteractionBase3(j)[this.$AdsTableSelectionInteractionBase0];};i.prototype.$AdsTableSelectionInteractionBase7=function(j,k){"use strict";if(!this.$AdsTableSelectionInteractionBase5.length)this.$AdsTableSelectionInteractionBase5=[this.$AdsTableSelectionInteractionBase3(0)[this.$AdsTableSelectionInteractionBase0]];var l=this.$AdsTableSelectionInteractionBase2(this.$AdsTableSelectionInteractionBase5[this.$AdsTableSelectionInteractionBase5.length-1]),m=this.$AdsTableSelectionInteractionBase2(k),n=Math.min(l,m),o=Math.max(l,m);if(this.$AdsTableSelectionInteractionBase4){var p=this.$AdsTableSelectionInteractionBase4[0],q=this.$AdsTableSelectionInteractionBase4[1];for(var r=p;r<q+1;r++){var s=this.$AdsTableSelectionInteractionBase6(r),t=this.$AdsTableSelectionInteractionBase5.indexOf(s);if(t>0&&(r<n||r>o))this.$AdsTableSelectionInteractionBase5.splice(t,1);j.remove(s);}}this.$AdsTableSelectionInteractionBase4=[n,o];for(var u=n;u<o+1;u++){var v=this.$AdsTableSelectionInteractionBase6(u);j.add(v);}};i.prototype.$AdsTableSelectionInteractionBase8=function(j,k,l){"use strict";j.add(k);if(!l){this.$AdsTableSelectionInteractionBase5.push(k);this.$AdsTableSelectionInteractionBase4=null;}};i.prototype.$AdsTableSelectionInteractionBase9=function(j,k){"use strict";var l=this.$AdsTableSelectionInteractionBase5.indexOf(k);if(l>0)this.$AdsTableSelectionInteractionBase5.splice(l,1);j.remove(k);};i.prototype.onSelectAll=function(j){"use strict";this.clear();this.$AdsTableSelectionInteractionBase1(new g(new h(),j));};i.prototype.onSelect=function(j,k,l,m){"use strict";var n=j.inversed,o=j.selectedIDs.clone();if(l){if(n){n=false;o=new h();}this.$AdsTableSelectionInteractionBase7(o,k);}else if(n&&!m||!n&&m){this.$AdsTableSelectionInteractionBase8(o,k,n);}else this.$AdsTableSelectionInteractionBase9(o,k);this.$AdsTableSelectionInteractionBase1(new g(o,n));};i.prototype.clear=function(){"use strict";this.$AdsTableSelectionInteractionBase5=[];this.$AdsTableSelectionInteractionBase4=null;};e.exports=i;},null);
__d("AdsTableSelectionController",["AdsTableSelectionInteractionBase"],function(a,b,c,d,e,f,g){function h(i,j,k,l,m){"use strict";this.$AdsTableSelectionController0=i;this.$AdsTableSelectionController1=k;this.$AdsTableSelectionController2=new g(j,this.$AdsTableSelectionController3.bind(this),l,m);this.onSelect=this.onSelect.bind(this);this.onSelectAll=this.onSelectAll.bind(this);}h.prototype.onSelectAll=function(i){"use strict";this.$AdsTableSelectionController2.onSelectAll(i);};h.prototype.onSelect=function(i,j,k){"use strict";this.$AdsTableSelectionController2.onSelect(this.$AdsTableSelectionController0,i,j,k);};h.prototype.$AdsTableSelectionController3=function(i){"use strict";this.$AdsTableSelectionController0=i;this.$AdsTableSelectionController1(this.$AdsTableSelectionController0);};h.prototype.setSelection=function(i){"use strict";this.$AdsTableSelectionController2.clear();this.$AdsTableSelectionController0=i;this.$AdsTableSelectionController1(i);};e.exports=h;},null);
__d("AdsCommonTargetingSentencesRenderer.react",["React","XUIGrayText.react","XUIText.react","cx","fbt","intlList"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=g.PropTypes,n=g.createClass({displayName:"AdsCommonTargetingSentencesRenderer",propTypes:{sentences:m.arrayOf(m.oneOfType([m.object,m.string])).isRequired},render:function(){var o=this.props.sentences.map(this._renderSentence);return (g.createElement("ul",null,o));},_renderSentence:function(o){if(!o.content)return g.createElement("li",{key:o},o);var p=o.children.reduce(function(q,r){return q+r;},o.content);return (g.createElement("li",{className:"_3v3m",key:p},g.createElement(i,{size:"small"},k._("{category name, ends with colon} {list of selected options}",[k.param("category name, ends with colon",g.createElement(h,null,o.content)),k.param("list of selected options",l(o.children,l.CONJUNCTIONS.NONE))]))));}});e.exports=n;},null);
__d("MobileAppCombinationRuleDescriptionView.react",["AudienceManagerAppRemarketingOperatorConfig","BonsaiText","LoadingIndicator.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=j.createClass({displayName:"MobileAppCombinationRuleDescriptionView",propTypes:{audience:j.PropTypes.object.isRequired,dao:j.PropTypes.object.isRequired},getInitialState:function(){return {dataReady:false,appInfo:null,appEventTypes:null};},componentDidMount:function(){this._updateAppInfo(this.props);},componentWillReceiveProps:function(n){this._updateAppInfo(n);},render:function(){if(!this.state.dataReady)return j.createElement(i,{size:"small",color:"blue"});var n=this.props.audience,o=[],p=[];if(n.included_custom_audiences){n.included_custom_audiences.forEach(function(q){o.push(this._renderSubAudience(q,true));}.bind(this));}else o.push(this._renderSubAudience(n,true));if(n.excluded_custom_audiences)n.excluded_custom_audiences.forEach(function(q){p.push(this._renderSubAudience(q,false));}.bind(this));return (j.createElement("div",null,j.createElement("div",null,l._("From application: {appName}",[l.param("appName",j.createElement("span",{className:"_5wb_"},this.state.appInfo.name))])),o,p));},_renderSubAudience:function(n,o){var p=n.retention_days,q=this._decodeRule(n.rule),r=this.state.appEventTypes||[],s=r.filter(function(event){return event.event_name===q._eventName;})[0],t=s.parameters||[],u=s.display_name||q._eventName,v=o?l._("Action taken: {action name}",[l.param("action name",j.createElement("span",{className:"_5wb_"},u))]):l._("Action not taken: {action name}",[l.param("action name",j.createElement("span",{className:"_5wb_"},u))]),w=[];this._extractParameters(w,q);var x='';if(!p){x='';}else if(p===1){x="Over the last 24 hours.";}else x=l._("Over the last {retention_days} days.",[l.param("retention_days",p)]);return (j.createElement("div",{className:"mtm",key:'subAudience_'+o},j.createElement("div",null,v),j.createElement("ul",{className:"_5o5f"},w.map(function(y){var z=t.filter(function(ba){return ba.parameter_name===y.key;})[0],aa=(z&&z.display_name)||y.key;return (j.createElement("li",{key:y.key},aa,' ',y.label,' ',y.value));})),this._getCumulativeRuleSentence(q),this._getClientFilters(q),j.createElement("div",null,x)));},_decodeRule:function(n){return JSON.parse(n.replace(/'/g,'"'));},_updateAppInfo:function(n){var o;if(n.audience.included_custom_audiences){o=n.audience.included_custom_audiences[0].rule;}else o=n.audience.rule;var p=this._decodeRule(o)._application;this.props.dao.fetch.objectByFBID.one(function(q){this.setState({appInfo:q,dataReady:(this.state.appEventTypes&&q)});}.bind(this),{fbid:p,fields:['name']});this.props.dao.fetch.appEventTypesForApp.one(function(q){this.setState({appEventTypes:q,dataReady:q&&this.state.appInfo});}.bind(this),{fbid:p});this.setState(this.getInitialState());},_extractParameters:function(n,o){if(Array.isArray(o)){o.forEach(this._extractParameters.bind(this,n));return;}Object.keys(o).forEach(function(p){if(p==='and'){n=n.concat(this._extractParameters(n,o[p]));return;}else if(p==='_cumulativeRule'){return;}else if(p==='_clientFilters')return;var q=o[p];if(typeof q!=='object')return;var r=Object.keys(q)[0],s=q[r];if(Array.isArray(s))s=s.join(', ');n.push({key:p,value:s,label:g.getLabelForOperator(r)});},this);},_getCumulativeRuleSentence:function(n){if(!n._cumulativeRule)return null;var o=null,p=100-n._cumulativeRule.technique.lower_bound;if(n._cumulativeRule.metric==='count'){o=l._("Top {percentage} by actions taken",[l.param("percentage",p+'%')]);}else if(n._eventName==='fb_mobile_purchase'){o=l._("Top {percentage} by money spent",[l.param("percentage",p+'%')]);}else o=l._("Top {percentage} by action value",[l.param("percentage",p+'%')]);return (j.createElement("div",null,o));},_getClientFilters:function(n){if(!n._clientFilters)return null;var o=n._clientFilters.map(function(p){return h.breakdown.client[p];});return (j.createElement("div",null,"Platforms:",' ',o.join(', ')));}});e.exports=m;},null);
__d("WebsiteCustomAudienceRuleSentence.react",["intlList","React","WebsiteCustomAudienceTrafficType","dotAccess","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=h.createClass({displayName:"WebsiteCustomAudienceRuleSentence",propTypes:{audience:h.PropTypes.object.isRequired},render:function(){var n=j(this.props.audience,'data_source.creation_params');if(!n)return h.createElement("div",null,"--");try{var p=JSON.parse(n),q=parseInt(p.traffic_type,10);switch(q){case i.ALL_WEBSITE_VISITORS:return this._renderAllWebsiteVisitors();case i.SPECIFIC_PAGE_VISITORS:return this._renderSpecificPageVisitors();case i.SPECIFIC_PAGE_VISITORS_WITH_EXCLUSION:return this._renderSpecificPageVisitorsWithExclusion();case i.CHURNED_VISITORS:return this._renderChurnedVistors();case i.CUSTOM:return this._renderCustomCombination();default:}}catch(o){}return h.createElement("div",null,"--");},_renderAllWebsiteVisitors:function(){var n=this.props.audience.retention_days,o="Anyone who visited your website";if(this.props.audience.rule){var p=JSON.parse(this.props.audience.rule),q=j(p,'and.0.or'),r=j(q,'0.url'),s=!!r.i_contains;if(s){var t=q.map(function(v){return j(v,'url.i_contains');}),u=g(t,g.CONJUNCTIONS.NONE);if(t.length>1){o=k._("Anyone who visited the domains: {a list of domains}",[k.param("a list of domains",u)]);}else o=k._("Anyone who visited the domain: {a list of domains}",[k.param("a list of domains",u)]);}}return (h.createElement("div",null,o,h.createElement("br",null),k._("In the last: {number of days} days.",[k.param("number of days",n)])));},_renderSpecificPageVisitors:function(){return (h.createElement("div",null,this._renderVisitText(this.props.audience.rule,this.props.audience.retention_days,true)));},_renderSpecificPageVisitorsWithExclusion:function(){var n=j(this.props.audience,'included_custom_audiences.0.rule'),o=j(this.props.audience,'included_custom_audiences.0.retention_days'),p=this._renderVisitText(n,o,true),q=j(this.props.audience,'excluded_custom_audiences.0.rule'),r=j(this.props.audience,'excluded_custom_audiences.0.retention_days'),s=this._renderVisitText(q,r,false);return (h.createElement("div",null,p,h.createElement("br",null),s));},_renderVisitText:function(n,o,p){try{var r=JSON.parse(n),s=j(r,'and.0.or'),t=j(s,'0.url'),u=!!t.i_contains,v=u?'i_contains':'eq',w=s.map(function(aa){return aa.url[v];}),x=g(w,g.CONJUNCTIONS.NONE),y=h.createElement("div",null,k._("People who visited: {websites}",[k.param("websites",x)]),h.createElement("br",null),k._("In the last {number of days} days.",[k.param("number of days",o)])),z=h.createElement("div",null,k._("But who did not visit: {websites}",[k.param("websites",x)]),h.createElement("br",null),k._("In the last {number of days} days.",[k.param("number of days",o)]));if(u){y=h.createElement("div",null,k._("People who visited URLs containing: {websites}",[k.param("websites",x)]),h.createElement("br",null),k._("In the last {number of days} days.",[k.param("number of days",o)]));z=h.createElement("div",null,k._("But did not visit URLs containing: {websites}",[k.param("websites",x)]),h.createElement("br",null),k._("In the last {number of days} days.",[k.param("number of days",o)]));}return (p?{includeRule:y}:{excludeRule:z});}catch(q){}return null;},_renderChurnedVistors:function(){var n=this.props.audience.excluded_custom_audiences[0].retention_days,o=this.props.audience.included_custom_audiences[0].retention_days;return (h.createElement("div",null,"People who visited your website",h.createElement("br",null),k._("In the last: {inDuration} days.",[k.param("inDuration",o)]),h.createElement("br",null),k._("But haven't returned in: {notDuration} days",[k.param("notDuration",n)])));},_getOperatorText:function(n){switch(n){case 'i_contains':return ("Contains (case insensitive)");case 'i_not_contains':return ("Does not contain (case insensitive)");case 'contains':return ("Contains (case sensitive)");case 'not_contains':return ("Does not contain (case sensitive)");case 'eq':return ("Equal to (case sensitive)");case 'neq':return ("Not equal to (case sensitive)");case 'lt':return ("Less than");case 'lte':return ("Less than or equal to");case 'gt':return ("Greater than");case 'gte':return ("Greater than or equal to");case 'regex_match':return ("Matches regular expression");default:l(true);}},_parseConditionEntry:function(n,o){var p,q,r=[];for(var s=0;s<n.length;s++){p=n[s].url;if(!q)q=Object.keys(p)[0];r.push(p[q]);}var t=g(r,g.CONJUNCTIONS.OR),u=this._getOperatorText(q),v=o?(h.createElement("div",null,k._("{a rule operator}: {a list of URL keywords}",[k.param("a rule operator",u),k.param("a list of URL keywords",t)]))):(h.createElement("div",null,k._("{a rule operator}: {a list of URL keywords} and",[k.param("a rule operator",u),k.param("a list of URL keywords",t)])));return v;},_parseCustomAudience:function(n,o){var p,q,r=[];for(var s=0;s<n.length;s++){p=JSON.parse(n[s].rule);q=p&&p.and;if(s===0){r.push(h.createElement("div",null,k._({"Include":"Include traffic that meets the following conditions","Exclude":"Exclude traffic that meets the following conditions"},[k['enum'](o?'Include':'Exclude',{Include:"Include",Exclude:"Exclude"})]),"URL"));}else r.push(h.createElement("div",null,"Or, traffic that meets the following conditions","URL"));for(var t=0;t<q.length;t++)if(t<q.length-1){r.push(this._parseConditionEntry(j(q[t],'or'),false));}else r.push(this._parseConditionEntry(j(q[t],'or'),true));r.push(h.createElement("br",null));}return r;},_renderCustomCombination:function(){var n=this.props.audience.retention_days,o=[];if(this.props.audience.included_custom_audiences)o.push(this._parseCustomAudience(this.props.audience.included_custom_audiences,true));if(this.props.audience.excluded_custom_audiences){o.push(h.createElement("br",null));o.push(this._parseCustomAudience(this.props.audience.included_custom_audiences,false));}return (h.createElement("div",null,h.createElement("div",null,o),h.createElement("div",null,k._("In the last {number of days} days.",[k.param("number of days",n)]))));}});e.exports=m;},null);
__d("AudienceManagerAudienceNameContextualHelpDialog.react",["AdsAMAudienceUtils","AdsAudienceDeliveryStatusUtils","AdsAudienceDataSourceUtils","AdsCommonTargetingSentencesRenderer.react","AudienceManagerUIConstants","MobileAppCombinationRuleDescriptionView.react","WebsiteCustomAudienceRuleSentence.react","XUIText.react","React","adsGKCheck","cx","dotAccess","fbt","ads-lib-formatters"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';var u=t.createIntlNumberFormatter(0),v=o.createClass({displayName:"AudienceManagerAudienceNameContextualHelpDialog",propTypes:{accountID:o.PropTypes.string.isRequired,audience:o.PropTypes.object.isRequired,dao:o.PropTypes.object.isRequired},render:function(){return (o.createElement("div",{className:"_5o5e"},this._renderSize(),this._renderDescription(),this._renderType(),this._renderSource(),this._renderSharingInfo(),this._renderIsFinancialServiceLookalike(),this._renderRule()));},_renderSize:function(){var w=this.props.audience.approximate_count||0,x='';if(!g.isSavedTargetSpec(this.props.audience)){x=h.isActive(this.props.audience.delivery_status.code)?u(w):'--';}else x=u(w);return (o.createElement("div",null,o.createElement(n,{weight:"bold",display:"block"},"Size"),x));},_renderDescription:function(){if(this.props.audience.description)return (o.createElement("div",{className:"mtm"},o.createElement(n,{weight:"bold",display:"block"},"Description"),this.props.audience.description));return null;},_renderType:function(){var w;if(g.isSavedTargetSpec(this.props.audience)){w=k.STS_DISPLAY_NAME;}else w=this.props.audience.data_source.type===i.TYPES.SEED_BASED?k.LAL_DISPLAY_NAME:k.CA_DISPLAY_NAME;return (o.createElement("div",{className:"mtm"},o.createElement(n,{weight:"bold",display:"block"},"Type"),w));},_renderSource:function(){var w=this.props.audience,x=null;if(g.isSavedTargetSpec(w)){x=o.createElement(j,{sentences:w.targeting_sentence_lines});}else{var y=w.data_source,z=y.sub_type;if(z!=i.SUBTYPES.MOBILE_APP_EVENTS)x=i.detailOfAudience(w);}if(x)return (o.createElement("div",{className:"mtm"},o.createElement(n,{weight:"bold",display:"block"},"Source"),x));return null;},_renderSharingInfo:function(){if(this.props.audience.account_id==this.props.accountID)return null;return (o.createElement("div",{className:"mtm"},o.createElement(n,{weight:"bold",display:"block"},"Shared by"),this.props.audience.account_id));},_renderIsFinancialServiceLookalike:function(){if(!p('financial_service_lookalike'))return null;if(g.isSavedTargetSpec(this.props.audience))return null;if(this.props.audience.data_source.type!==i.TYPES.SEED_BASED)return null;if(this.props.audience.lookalike_spec){var w=this.props.audience.lookalike_spec.is_financial_service?"True":"False";return (o.createElement("div",{className:"mtm"},o.createElement(n,{weight:"bold",display:"block"},"FCRA-compliant Lookalike"),w));}},_renderRule:function(){var w=r(this.props.audience,'data_source.sub_type'),x=null;if(w===i.SUBTYPES.MOBILE_APP_EVENTS||w===i.SUBTYPES.MOBILE_APP_COMBINATION_EVENTS){x=o.createElement(l,{audience:this.props.audience,dao:this.props.dao});}else if(w===i.SUBTYPES.WEB_PIXEL_HITS||w===i.SUBTYPES.WEB_PIXEL_COMBINATION_EVENTS)x=o.createElement(m,{audience:this.props.audience});if(x)return (o.createElement("div",{className:"mtm"},o.createElement(n,{weight:"bold",display:"block"},"Rule"),x));return null;}});e.exports=v;},null);
__d("AudienceManagerAudienceNameColumnCellRenderer",["AdInterfacesUiLogger","AudienceManagerAudienceNameContextualHelpDialog.react","AudienceManagerLoggingEvents","AudienceManagerUIConstants","AdsAMAudienceUtils","LayerHideOnBlur","Link.react","React","ReactLayeredComponentMixin","XUIContextualDialog.react","adsGKCheck","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=80,t=n.createClass({displayName:"AudienceManagerAudienceNameColumnCellRenderer",mixins:[o],propTypes:{audience:n.PropTypes.object.isRequired,accountID:n.PropTypes.string.isRequired,dao:n.PropTypes.object.isRequired},getInitialState:function(){return {showHelpDialog:false};},render:function(){var u=this.props.audience,v=u.description||'',w=v.substring(0,s)+(v.length>s?'...':''),x=k.isSavedTargetSpec(this.props.audience)?u.audience_name:u.name,y=this._shouldShowLink()?n.createElement("div",{className:"_4fqh"},n.createElement(m,{target:"_blank",href:k.getAudienceDetailsURI(u,this.props.accountID),onClick:this._logAudienceDetailsView},x)):n.createElement("div",{className:"_4fqk"},x);return (n.createElement("div",{className:"_ia5"},n.createElement("div",{ref:"nameAndSubtext",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,className:"_ia6"},y,n.createElement("div",{className:"_ia8"},w))));},_logAudienceDetailsView:function(){var u=k.isSavedTargetSpec(this.props.audience)?j.AUDIENCE_TYPE.SAVED_TARGET_SPEC:j.AUDIENCE_TYPE.CUSTOM_AUDIENCE;g.log(i.AM_DETAILS_AUDIENCE_VIEW,{audience_type:u});},_shouldShowLink:function(){return q('audience_manager_v3_in_progress');},renderLayers:function(){return {helpDialog:(n.createElement(p,{width:p.WIDTH.NORMAL,position:"right",alignment:"center",contextRef:"nameAndSubtext",shown:this.state.showHelpDialog,behaviors:{LayerHideOnBlur:l}},n.createElement("div",{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},n.createElement(h,{accountID:this.props.accountID,audience:this.props.audience,dao:this.props.dao}))))};},componentWillUnmount:function(){clearTimeout(this._lingerTimeout);},_onMouseEnter:function(){clearTimeout(this._lingerTimeout);this.setState({showHelpDialog:true});},_onMouseLeave:function(){clearTimeout(this._lingerTimeout);this._lingerTimeout=setTimeout(function(){return this.setState({showHelpDialog:false});}.bind(this),j.HELP_DIALOG_LINGER_TS);}});e.exports=t;},null);
__d("FixedDataTableAbstractSortableHeader.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){var j=g.PropTypes,k=g.createClass({displayName:"FixedDataTableAbstractSortableHeader",propTypes:{className:j.string,sorting:j.oneOf(['ASC','DESC']),onClick:j.func},_onClick:function(){var l=this.props.sorting==='ASC'?'DESC':'ASC';this.props.onClick(l);},render:function(){var l=(("_54_8")+(!!this.props.sorting?' '+"_54_9":'')+(this.props.sorting==='DESC'?' '+"_5y6x":''));if(this.props.className)l=i(l,this.props.className);return (g.createElement("div",g.__spread({},this.props,{onClick:this._onClick,className:i(this.props.className,l)}),this.props.children));}});e.exports=k;},null);
__d("FixedDataTableSortableHeader.react",["React","cx","FixedDataTableAbstractSortableHeader.react"],function(a,b,c,d,e,f,g,h,i){var j=g.PropTypes,k=g.createClass({displayName:"FixedDataTableSortableHeader",propTypes:{className:j.string,sorting:j.oneOf(['ASC','DESC']),onClick:j.func},render:function(){return (g.createElement(i,g.__spread({},this.props),g.createElement("div",{className:"_4s8q"},this.props.children)));}});e.exports=k;},null);
__d("AudienceManagerColumnHeaderRenderers",["AdsAMAudienceActions","AudienceManagerUIConstants","React","FixedDataTableSortableHeader.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j,i,k){var l=h.ALIGN,m=h.SORT_ORDER,n=function(p){var q=p.headerAlign;if(!q||q===l.CENTER)return null;return ((q===l.LEFT?"_3ohp":'')+(q===l.RIGHT?' '+"_3ohq":''));},o={renderHeader:function(p,q,r){p=p?i.createElement("div",{className:n(r)},p):null;return p;},renderSortableHeader:function(p,q,r){var s=(r.currentSortState.sortKey===q&&r.currentSortState.sortOrder)||null,t=function(){var u=(r.currentSortState.sortKey===q&&r.currentSortState.sortOrder===m.ASC)?m.DESC:m.ASC;g.sortAudience(u,q,r.compareFunction);};return (i.createElement(j,{className:n(r),sorting:s,onClick:t},p));}};e.exports=o;},null);
__d("AudienceManagerTypeColumnCellRenderer.react",["AdsAMAudienceUtils","AdsAudienceDataSourceUtils","AudienceManagerUIConstants","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=j.createClass({displayName:"AudienceManagerTypeColumnCellRenderer",propTypes:{audience:j.PropTypes.object.isRequired},render:function(){var m=this._getTypeText();return (j.createElement("div",{className:"_5no0"},m));},_getTypeText:function(){if(g.isSavedTargetSpec(this.props.audience))return i.STS_DISPLAY_NAME;var m=this.props.audience.data_source;return m.type===h.TYPES.SEED_BASED?i.LAL_DISPLAY_NAME:i.CA_DISPLAY_NAME;}});e.exports=l;},null);
__d("AudienceManagerSourceColumnCellRenderer.react",["AdsAMAudienceUtils","AdsAudienceDataSourceUtils","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){var l=30,m=i.createClass({displayName:"AudienceManagerSourceColumnCellRenderer",propTypes:{audience:i.PropTypes.object.isRequired},render:function(){return (i.createElement("div",{className:"_5no0"},i.createElement("div",{className:"_5no1"},this._getSourceText()),i.createElement("div",{className:"_5no2"},this._getSourceSubtext())));},_getSourceText:function(){if(g.isSavedTargetSpec(this.props.audience))return this._renderSentenceLinesText();var n=this.props.audience.data_source;return h.textByDataSource(n);},_getSourceSubtext:function(){if(g.isSavedTargetSpec(this.props.audience))return '';var n=h.detailOfAudience(this.props.audience);return this._getTextByMaxLength(n);},_renderSentenceLinesText:function(){var n=this.props.audience.targeting_sentence_lines,o=n[0].children.join(', ');if(o.length<l&&n.length>1)o=o.concat(', '+n[1].children.join(', '));var p=Math.max(0,n.length-2);if(p){if(o.length>l){o=this._getTextByMaxLength(o);}else o+='...';return (k._("{targeting sentences}{num additional} More",[k.param("targeting sentences",o),k.param("num additional",p+' ')]));}return this._getTextByMaxLength(o);},_getTextByMaxLength:function(n){var o=n.substring(0,l);return n.length>l?o+'...':o;}});e.exports=m;},null);
__d("AudienceManagerDebugAPIDataColumnCellRenderer.react",["AdsAMAudienceUtils","List.react","Link.react","React","ReactLayeredComponentMixin","URI","XUIDialog.react","XUIDialogBody.react","XUIDialogCloseButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(w,x){if(typeof w!=='object')return w+"\n";x=x||0;var y='';for(var z in w){if(!w.hasOwnProperty(z))continue;y+=(new Array(x+1).join('  '))+z+': ';if(typeof w[z]==='object')y+="\n";y+=u(w[z],x+1);}return y;}var v=j.createClass({displayName:"AudienceManagerDebugAPIDataColumnCellRenderer",mixins:[k],propTypes:{audience:j.PropTypes.object.isRequired},getInitialState:function(){return {dialogShown:false};},render:function(){var w="API Data";return (j.createElement(r,{label:w,use:"default",size:"small",onClick:this._onAPIDataClick}));},renderLayers:function(){if(!this.state.dialogShown)return null;var w=this.props.audience,x;if(g.isSavedTargetSpec(w)){x=j.createElement("span",null);}else{var y=l('/intern/ads/eagle/audience_history').addQueryData({cluster_id:w.id});x=j.createElement(i,{href:y,target:"_blank"},"History");}var z=l('/intern/id').addQueryData({id:w.id});return {dialog:j.createElement(m,{shown:this.state.dialogShown,width:500,onToggle:this._onCloseClick},j.createElement(q,null,"API Data"),j.createElement(n,{className:"_53sz"},j.createElement("pre",null,u(w)),j.createElement("div",null,j.createElement(h,{direction:"horizontal",border:"none",spacing:"large"},j.createElement("li",null,j.createElement(i,{href:z,target:"_blank"},"FBObj")),j.createElement("li",null,x)))),j.createElement(p,null,j.createElement(o,{use:"default",action:"close",onClick:this._onCloseClick})))};},_onAPIDataClick:function(){this.setState({dialogShown:true});},_onCloseClick:function(){this.setState({dialogShown:false});}});e.exports=v;},null);
__d("AudienceManagerSharingColumnCellRenderer.react",["AdsAMAudienceUtils","React","dotAccess","fbt"],function(a,b,c,d,e,f,g,h,i,j){'use strict';var k=h.createClass({displayName:"AudienceManagerSharingColumnCellRenderer",propTypes:{accountID:h.PropTypes.string.isRequired,audience:h.PropTypes.object.isRequired},render:function(){if(g.isSavedTargetSpec(this.props.audience))return h.createElement("div",null,"--");if(this.props.accountID!==this.props.audience.account_id)return (h.createElement("div",null,j._("Shared by {audience owner ID}",[j.param("audience owner ID",this.props.audience.account_id)])));var l='--',m=i(this.props.audience,'capabilities.data.0.capabilities')||{},n=Object.keys(m);if(n.length===1){l=j._("Shared with {account ID}",[j.param("account ID",n[0])]);}else if(n.length>1)l=j._("Shared with {number of accounts} accounts",[j.param("number of accounts",n.length)]);return h.createElement("div",null,l);}});e.exports=k;},null);
__d("AdsAudienceOperationStatusUtils",["fbt","CustomAudienceOperationStatus"],function(a,b,c,d,e,f,g,h){var i=function(n){return Math.floor(n/100)===Math.floor(h.ERROR/100);},j=function(n){return Math.floor(n/100)===Math.floor(h.WARNING/100);},k=function(n){return n===h.NORMAL||n===h.NO_STATUS;},l=function(n){return n===h.REFRESH_FAIL_SOURCE_DELETED;},m=function(n){switch(n){case h.WARNING:return ("Warning");case h.LOW_MATCH_RATE:return ("Low match rate");case h.HIGH_INVALID_RATE:case h.LOW_UID_VALID_RATE:return ("High invalidation rate");case h.ERROR:return ("Error");case h.PIXEL_UNVERIFIED:return ("Pixel not installed");case h.PIXEL_NOT_FIRING:return ("Pixel not active");case h.LEGACY_PIXEL:return ("Migration required");case h.BUILD_FAIL_SOURCE_DELETED:case h.BUILD_FAIL_UNKNOWN:return ("Audience not created");case h.BUILD_RETRYING:return ("Creating audience");default:return ("Unknown issues");}};e.exports={isNormal:k,isError:i,isWarning:j,useLastUpdateTime:l,getProblemShortDesc:m};},null);
__d("AudienceManagerStatusFlyoutDialog.react",["AdsAMViewActions","AdsAudienceDataSourceUtils","AdsAudienceDeliveryStatusUtils","AdsAudienceOperationStatusUtils","CustomAudienceOperationStatus","Link.react","React","AsyncRequest","adsGKCheck","arrayContains","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=[k.LOW_MATCH_RATE,k.HIGH_INVALID_RATE,k.PIXEL_UNVERIFIED,k.PIXEL_NOT_FIRING],t=m.createClass({displayName:"AudienceManagerStatusFlyoutDialog",propTypes:{accountID:m.PropTypes.string.isRequired,audience:m.PropTypes.object.isRequired},render:function(){return (m.createElement("div",{className:"_2f6l"},m.createElement("div",null,this._getIssueDescription()),this._getActionLink(),this._renderHelpLink()));},_getIssueDescription:function(){var u=this.props.audience.operation_status.code;if(i.isError(this.props.audience.delivery_status.code)||j.isNormal(u))return this.props.audience.delivery_status.description;return this.props.audience.operation_status.description;},_getActionLink:function(){var u=this.props.audience.data_source.sub_type;if(!this._hasActionForDataSourceSubtype(u))return;if(!this.props.audience.permission_for_actions.can_edit)return;if(p(s,this.props.audience.operation_status.code))return (m.createElement("div",{className:"mtm"},m.createElement(l,{onClick:this._onActionLinkClicked},this._getActionLinkText())));},_renderHelpLink:function(){if(!o('smb_custom_audiences_error_audience'))return;if(i.isInactive(this.props.audience.delivery_status.code))return (m.createElement("div",null,m.createElement("div",{className:"mtm"},"Need help with your audience? Get free one-on-one help from a Facebook Ads expert."),m.createElement("div",{className:"mtm"},m.createElement(l,{onClick:this._onHelpClicked},"Schedule a Call"))));},_hasActionForDataSourceSubtype:function(u){switch(u){case h.SUBTYPES.COPY_PASTE_EMAIL_HASHES:case h.SUBTYPES.MAIL_CHIMP_EMAIL_HASHES:return false;}return true;},_getActionLinkText:function(){switch(this.props.audience.operation_status.code){case k.PIXEL_UNVERIFIED:case k.PIXEL_NOT_FIRING:return ("View Pixel Details");case k.LOW_MATCH_RATE:case k.HIGH_INVALID_RATE:return ("Upload Data File");}},_onActionLinkClicked:function(){switch(this.props.audience.operation_status.code){case k.PIXEL_UNVERIFIED:case k.PIXEL_NOT_FIRING:g.showPixelDialog();break;case k.LOW_MATCH_RATE:case k.HIGH_INVALID_RATE:g.showRegularEditDialog(this.props.audience.id);break;}},_onHelpClicked:function(){new n().setURI('/ajax/help/contact/1467700436821724').send();}});e.exports=t;},null);
__d("AudienceManagerStatusColumnRenderer.react",["AdsAMAudienceUtils","AdsAudienceDeliveryStatusUtils","AdsAudienceOperationStatusUtils","AudienceManagerStatusFlyoutDialog.react","AudienceManagerUIConstants","CustomAudienceDeliveryStatus","CustomAudienceOperationStatus","Image.react","InlineBlock.react","LayerHideOnBlur","React","ReactLayeredComponentMixin","XUISpinner.react","XUIContextualDialog.react","cx","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x=q.PropTypes,y=q.createClass({displayName:"AudienceManagerStatusColumnRenderer",mixins:[r],propTypes:{accountID:q.PropTypes.string.isRequired,audience:q.PropTypes.object.isRequired,loading:x.bool},getInitialState:function(){return {showHelpDialog:false};},render:function(){if(this.props.loading)return (q.createElement("div",null,q.createElement(s,{background:"light",size:"small"})));if(g.isSavedTargetSpec(this.props.audience))return (q.createElement("div",null,q.createElement("div",null,h.textByStatus(l.ACTIVE)),q.createElement(o,null,q.createElement("div",{className:"_5cj1"},this._renderSavedTargetSpecTimeUpdated()))));return (q.createElement("div",null,q.createElement("div",null,this._getFormattedDeliveryStatus()),q.createElement(o,{ref:"statusAndSubtext",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},q.createElement("div",{className:"_5cj1"},this._getOperationStatusIcon(),this._getSubText()))));},renderLayers:function(){if(!this.state.showHelpDialog)return null;return {helpDialog:(q.createElement(t,{width:t.WIDTH.NORMAL,position:"left",alignment:"center",contextRef:"statusAndSubtext",shown:true,behaviors:{LayerHideOnBlur:p}},q.createElement("div",{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},q.createElement(j,{accountID:this.props.accountID,audience:this.props.audience}))))};},_renderSavedTargetSpecTimeUpdated:function(){var z=this.props.audience.time_updated_timestamp,aa=w(z,'m/d/Y');return (v._("Last updated {date}",[v.param("date",aa)]));},_getDeliveryStatusCode:function(){return this.props.audience.delivery_status.code;},_getOperationStatusCode:function(){return this.props.audience.operation_status.code;},_getFormattedDeliveryStatus:function(){return h.textByStatus(this._getDeliveryStatusCode());},_getOperationStatusIcon:function(){if(this._shouldShowWarningAndFlyout())return (q.createElement(n,{src:"/images/ads/audience_manager/error.png",className:"_55zn"}));return (q.createElement("span",null));},componentWillUnmount:function(){clearTimeout(this._lingerTimeout);},_onMouseEnter:function(){clearTimeout(this._lingerTimeout);if(this._shouldShowWarningAndFlyout())this.setState({showHelpDialog:true});},_onMouseLeave:function(){clearTimeout(this._lingerTimeout);this._lingerTimeout=setTimeout(this.setState.bind(this,{showHelpDialog:false}),k.HELP_DIALOG_LINGER_TS);},_shouldShowWarningAndFlyout:function(){return this._isAnomalousOperationStatus()||this._isAnomalousDeliveryStatus()||this._isAnomalousAudienceSize();},_getSubText:function(){if(this._isAnomalousDeliveryStatus())return ("Disabled");var z=this._getOperationStatusCode();if(this._isAnomalousOperationStatus()&&!i.useLastUpdateTime(z))return i.getProblemShortDesc(z);switch(z){case m.NO_STATUS:case m.NORMAL:if(this._isAnomalousAudienceSize())return ("Audience too small");return this._getLastUpdateTime();case m.UPDATING:return ("Updating audience");default:return this._getLastUpdateTime();}},_getLastUpdateTime:function(){if(!this.props.audience.time_content_updated)return;var z=new Date(this.props.audience.time_content_updated*1000),aa=w(z,'m/d/Y');return (v._("Last updated {date}",[v.param("date",aa)]));},_isAnomalousOperationStatus:function(){var z=this._getOperationStatusCode();return i.isWarning(z)||i.isError(z);},_isAnomalousDeliveryStatus:function(){return h.isError(this._getDeliveryStatusCode());},_isAnomalousAudienceSize:function(){return h.isInactive(this._getDeliveryStatusCode())&&i.isNormal(this._getOperationStatusCode());}});e.exports=y;},null);
__d("AudienceManagerTimeCreatedColumnRenderer.react",["React","cx","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j){var k=g.PropTypes,l=g.createClass({displayName:"AudienceManagerTimeCreatedColumnRenderer",propTypes:{timeCreated:k.number},render:function(){var m=this.props.timeCreated;if(!m)return (g.createElement("div",null,"Not Available"));var n=new Date(m*1000),o=j(n,'m/d/Y'),p=j(n,'g:ia');return (g.createElement("div",null,g.createElement("div",null,o),g.createElement("div",{className:"_3imx"},p)));}});e.exports=l;},null);
__d("AudienceManagerSelectableTable.react",["AdsAMAudienceUtils","AdsAudienceDeliveryStatusUtils","AdsCreateAudienceActionSelector.react","AdsSelectableFixedDataTable.react","AdsSelection","AdsTableSelectionController","AudienceManagerAudienceNameColumnCellRenderer","AudienceManagerColumnHeaderRenderers","AudienceManagerTypeColumnCellRenderer.react","AudienceManagerSourceColumnCellRenderer.react","AudienceManagerDebugAPIDataColumnCellRenderer.react","AudienceManagerSharingColumnCellRenderer.react","AudienceManagerStatusColumnRenderer.react","AudienceManagerTimeCreatedColumnRenderer.react","AudienceManagerUIConstants","AudiencePropertyConstants","CurrentUser","FixedDataTableSortFunctions","Image.react","React","StrSet","XAdsCreatorController","FixedDataTableColumn.react","XUIGrayText.react","XUISpinner.react","cx","fbt","ads-lib-formatters","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){var ja=ha.createIntlNumberFormatter(0),ka=u.ALIGN,la=u.COLUMNS,ma=100,na=80,oa=u.DEFAULT_ROW_HEIGHT,pa=z.createClass({displayName:"AudienceManagerSelectableTable",propTypes:{account:z.PropTypes.object.isRequired,audiences:z.PropTypes.array.isRequired,height:z.PropTypes.number.isRequired,width:z.PropTypes.number.isRequired,dao:z.PropTypes.object.isRequired,onAudienceSelected:z.PropTypes.func.isRequired,onCreateAudienceClicked:z.PropTypes.func.isRequired,tableController:z.PropTypes.object,sortState:z.PropTypes.object,onLastRowReached:z.PropTypes.func,columnsShown:z.PropTypes.object.isRequired,displayLoading:z.PropTypes.bool.isRequired,displayScrollLoading:z.PropTypes.bool.isRequired},getInitialState:function(){return {selection:new k(new aa(),false),idToIndexMap:this._getIDToIndexMap()};},componentWillMount:function(){var qa=new l(this.state.selection,'id',this._onSelectionCallback,this._idToIndex,this._rowGetter);this.setState({selectionController:qa});this.props.tableController.addClearSelectionCallback(this._clearSelection.bind(this));},componentDidReceiveProps:function(){this.setState({idToIndexMap:this._getIDToIndexMap()});},_getIDToIndexMap:function(){var qa={};this.props.audiences.forEach(function(ra,sa){qa[ra.id]=sa;});return qa;},_rowGetter:function(qa){if(this._isLastRow(qa))this.props.onLastRowReached&&setTimeout(this.props.onLastRowReached,1);return this.props.audiences[qa];},_isLastRow:function(qa){return qa===this.props.audiences.length-1;},_idToIndex:function(qa){return this.state.idToIndexMap[qa];},_onSelectionCallback:function(qa){var ra;if(qa.inversed){var sa=new aa();this.props.audiences.forEach(function(ta){sa.add(ta.id);});ra=qa.selectedIDs.difference(sa);}else ra=qa.selectedIDs;this.props.onAudienceSelected(ra);this.setState({selection:qa});},_clearSelection:function(){if(this.isMounted())this.state.selectionController.setSelection(new k(new aa(),false));},render:function(){var qa=!this.props.displayLoading&&this.props.audiences.length===0;return (z.createElement("div",{className:"_5pvk"},this._renderTable(),this.props.displayLoading?this._renderLoading():null,this.props.displayScrollLoading?this._renderScrollLoading():null,qa?this._renderEmpty():null));},_renderLoading:function(){return (z.createElement(ea,{className:"_2aah",size:"large"}));},_renderScrollLoading:function(){return (z.createElement("div",{className:"_2p7e"},z.createElement(ea,{size:"large"}),z.createElement("div",null,"Loading more audiences","...")));},_renderEmpty:function(){var qa="No Results Found",ra="Try searching again or using different filters.",sa=ia('/images/ads/audience_manager/no_results.png');return (z.createElement("div",{className:"_4udf",style:{width:this.props.width}},z.createElement(y,{width:ma,height:ma,src:sa}),z.createElement(da,{className:"_3-8n",display:"block",shade:"light",size:"large",weight:"bold"},qa),z.createElement(da,{display:"block",shade:"light",size:"medium"},ra),z.createElement(i,{className:"_3-8-",onAction:this.props.onCreateAudienceClicked,supportSavedTargetSpec:true,use:"default"})));},_renderTable:function(){var qa=this.props.displayLoading?0:this.props.audiences.length;return (z.createElement(j,{width:this.props.width,maxHeight:this.props.height,rowsCount:qa,rowHeight:oa,headerHeight:oa,rowGetter:this._rowGetter,rowKeyID:"id",selection:this.state.selection,onSelect:this._onSelect},this._getColumns()));},_getColumns:function(){var qa=[{dataKey:v.NAME,label:la.NAME.label,width:5*na,flexGrow:1,fixed:true,cellRenderer:this._renderNameColumn,sortable:true,compareFunction:x.compareString,headerAlign:ka.LEFT}];if(this.props.columnsShown.type)qa.push({dataKey:v.TYPE,label:la.TYPE.label,width:3*na,flexGrow:1,cellRenderer:this._renderTypeColumn,sortable:false,headerAlign:ka.LEFT});if(this.props.columnsShown.source)qa.push({dataKey:v.DATA_SOURCE,label:la.SOURCE.label,width:3*na,flexGrow:1,cellRenderer:this._renderSourceColumn,sortable:false,headerAlign:ka.LEFT});if(this.props.columnsShown.size)qa.push({dataKey:v.APPROXIMATE_COUNT,label:la.SIZE.label,width:2*na,flexGrow:1,cellRenderer:this._renderPeopleColumn,sortable:true,compareFunction:x.compareNumber,headerAlign:ka.RIGHT});if(this.props.columnsShown.status)qa.push({dataKey:v.STATUS,label:la.STATUS.label,width:2*na,flexGrow:1,cellRenderer:this._renderStatusColumn,sortable:false,headerAlign:ka.LEFT});if(this.props.columnsShown.dateCreated)qa.push({dataKey:v.TIME_CREATED,label:la.DATE_CREATED.label,width:2*na,flexGrow:1,cellRenderer:this._renderTimeCreatedColumn,sortable:true,compareFunction:x.compareNumber,headerAlign:ka.LEFT});if(this.props.columnsShown.audienceID)qa.push({dataKey:v.ID,label:la.AUDIENCE_ID.label,width:2*na,flexGrow:1,cellRenderer:this._renderAudienceIDColumn,sortable:true,compareFunction:x.compareNumber,headerAlign:ka.RIGHT});if(this.props.columnsShown.sharing)qa.push({dataKey:v.ID,label:la.SHARING.label,width:2*na,flexGrow:1,cellRenderer:this._renderSharingColumn,sortable:false,headerAlign:ka.LEFT});if(w.isEmployee()&&this.props.columnsShown.debug)qa.push({dataKey:"debug",label:"Debug (FB only)",width:2*na,flexGrow:1,cellRenderer:this._renderDebugColumn,sortable:false});return qa.map(function(ra){ra.headerRenderer=ra.sortable?n.renderSortableHeader:n.renderHeader;return (z.createElement(ca,z.__spread({},ra,{columnData:{currentSortState:this.props.sortState,compareFunction:ra.compareFunction,headerAlign:ra.headerAlign}})));}.bind(this));},_onSelect:function(qa){this.state.selectionController.onSelect(qa.target.value,qa.nativeEvent.shiftKey,qa.target.checked);},_renderNameColumn:function(qa,ra,sa,ta,ua){return (z.createElement("div",{className:"_ewc"},z.createElement(m,{accountID:this.props.account.account_id,audience:sa,dao:this.props.dao})));},_renderTypeColumn:function(qa,ra,sa,ta,ua){return (z.createElement("div",{className:"_ewc"},z.createElement(o,{audience:sa})));},_renderSourceColumn:function(qa,ra,sa,ta,ua){return (z.createElement("div",{className:"_ewc"},z.createElement(p,{audience:sa})));},_renderPeopleColumn:function(qa,ra,sa,ta,ua){var va,wa=sa.approximate_count||0;if(g.isSavedTargetSpec(sa)){va=ja(wa);}else va=h.isActive(sa.delivery_status.code)?ja(wa):'--';return (z.createElement("div",{className:"_ewd"},va));},_renderStatusColumn:function(qa,ra,sa,ta,ua){return (z.createElement("div",{className:"_ewc"},z.createElement(s,{accountID:this.props.account.account_id,audience:sa})));},_renderTimeCreatedColumn:function(qa,ra,sa,ta,ua){return (z.createElement("div",{className:"_ewc"},z.createElement(t,{timeCreated:sa.time_created})));},_renderAudienceIDColumn:function(qa,ra,sa,ta,ua){return (z.createElement("div",{className:"_ewc _ewd"},sa.id));},_renderSharingColumn:function(qa,ra,sa,ta,ua){return (z.createElement("div",{className:"_ewc"},z.createElement(r,{accountID:this.props.account.account_id,audience:sa})));},_renderDebugColumn:function(qa,ra,sa,ta,ua){return (z.createElement(q,{audience:sa}));},_onCreateAdClick:function(qa){var ra={custom_audiences:[{id:qa.id,name:qa.name}]},sa=ba.getURIBuilder().setInt('act',this.props.account.account_id).setString('targeting_spec',JSON.stringify(ra)).getURI().toString();window.open(sa,'_blank');}});e.exports=pa;},null);
__d("AudienceManagerSeparator.react",["React","ReactComponentWithPureRenderMixin","cx"],function(a,b,c,d,e,f,g,h,i){var j=g.createClass({displayName:"AudienceManagerSeparator",mixins:[h],propTypes:{marginTop:g.PropTypes.number,marginBottom:g.PropTypes.number},render:function(){var k=null;if(this.props.marginTop!==(void 0)){k=k||{};k.marginTop=this.props.marginTop;}if(this.props.marginBottom!==(void 0)){k=k||{};k.marginBottom=this.props.marginBottom;}return (g.createElement("div",{style:k,className:"_51y0"}));}});e.exports=j;},null);
__d("AdAccountIDSearchSource",["AbstractSearchSource","SearchableEntry"],function(a,b,c,d,e,f,g,h){var i=null;for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(m){"use strict";i;this.$AdAccountIDSearchSource0=m;}l.prototype.searchImpl=function(m,n,o){"use strict";var p=[];if(!m)return;if(!isNaN(m)){this.$AdAccountIDSearchSource0.fetch.validateAccountIDs.one(function(q){if(q[m].valid)p.push(new h({uniqueID:m,title:m}));n(p,m);},{adaccounts:[m]});return;}n(p,m);};l.getInstance=function(m){if(!i)i=new l(m);return i;};e.exports=l;},null);
__d("FreeTextTypeaheadPresenter",["List.react","React","ReactPropTypes","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:"ViewRenderer",propTypes:{entries:i.array.isRequired,highlightedEntry:i.object,onSelect:i.func.isRequired,onHighlight:i.func},render:function(){var o=this.props.excludedEntries||{},p=this.props.entries.filter(function(s){return !o[s.getUniqueID()];});if(!p.length)return h.createElement("span",null);var q=p.map(this._renderRow,this),r=k("_5tbq",this.props.className);return (h.createElement("div",{className:r},h.createElement(g,{border:"none",spacing:"none"},q)));},_renderRow:function(o){return (h.createElement(m,{key:o.getUniqueID(),entry:o,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,highlighted:o===this.props.highlightedEntry}));}}),m=h.createClass({displayName:"EntryRowView",propTypes:{entry:i.object.isRequired,onSelect:i.func.isRequired,onHighlight:i.func,highlighted:i.bool},render:function(){return (h.createElement("li",{className:(("_5tbr")+(this.props.highlighted?' '+"_5tbs":'')),onMouseDown:this._onMouseDown,onMouseEnter:this._onMouseEnter},this.props.entry.getTitle()));},_onMouseDown:function(o){this.props.onSelect(this.props.entry,o);},_onMouseEnter:function(){this.props.onHighlight&&this.props.onHighlight(this.props.entry);}}),n={ViewRenderer:l,useLayer:true};e.exports=n;},null);
__d("SharedAdAccountCapabilitySelector.react",["CustomAudienceSharingCapabilities","React","XUISelector.react","areEqual","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.USE_FOR_ADS,n=g.USE_FOR_INSIGHTS,o=i.Option,p={TARGETING:1,TARGETING_AND_INSIGHTS:2,UNSHARE:3},q=h.createClass({displayName:"SharedAdAccountCapabilitySelector",propTypes:{adAccountID:h.PropTypes.string.isRequired,capability:h.PropTypes.array.isRequired,description:h.PropTypes.string.isRequired,onUpdateCapability:h.PropTypes.func.isRequired,onRemoveAdAccount:h.PropTypes.func.isRequired},render:function(){var r=p.TARGETING_AND_INSIGHTS;if(j(this.props.capability,[m]))r=p.TARGETING;return (h.createElement("li",{className:"_5tbm"},this.props.description,h.createElement(i,{className:"_z9u",suppressed:true,size:"large",onChange:this._onChange,defaultValue:r},h.createElement(o,{value:p.TARGETING_AND_INSIGHTS},"Targeting and Insights"),h.createElement(o,{value:p.TARGETING},"Targeting Only"),h.createElement(o,{value:p.UNSHARE},"Stop Sharing"))));},_onChange:function(r){switch(r.value){case p.TARGETING:this.props.onUpdateCapability(this.props.adAccountID,[m]);break;case p.TARGETING_AND_INSIGHTS:this.props.onUpdateCapability(this.props.adAccountID,[m,n]);break;case p.UNSHARE:this.props.onRemoveAdAccount(this.props.adAccountID);break;}}});e.exports=q;},null);
__d("AudienceManagerCapabilityTokenizer.react",["AbstractTypeahead.react","AdAccountIDSearchSource","FreeTextTypeaheadPresenter","List.react","React","SharedAdAccountCapabilitySelector.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=k.createClass({displayName:"AudienceManagerCapabilityTokenizer",propTypes:{capabilities:k.PropTypes.object.isRequired,onUpdateAttempt:k.PropTypes.func.isRequired,onSelectAttempt:k.PropTypes.func.isRequired,onRemoveAttempt:k.PropTypes.func.isRequired,dao:k.PropTypes.object.isRequired},getInitialState:function(){return {queryString:''};},render:function(){var p=i,q={};for(var r in this.props.capabilities)q[r]=true;p.extraRendererProps={excludedEntries:q};return (k.createElement("div",null,this._renderSharedAdAccountsList(),k.createElement(g,{className:"_5tbo",selectedEntry:null,placeholder:"Enter an Account ID",presenter:p,searchSource:h.getInstance(this.props.dao),queryString:this.state.queryString,onChange:this._onInputChange,onSelectAttempt:this._onSelectAttempt,autoHighlight:true,selectOnBlur:true,ref:"typeahead"})));},_renderSharedAdAccountsList:function(){if(this.props.capabilities.length===0)return null;return (k.createElement(j,{border:"none",spacing:"none",className:"_5tbp"},this._renderSharedAdAccounts()));},_renderSharedAdAccounts:function(){return Object.keys(this.props.capabilities).map(function(p){var q=p;return (k.createElement(l,{key:p,adAccountID:p,capability:this.props.capabilities[p],description:q,onUpdateCapability:this.props.onUpdateAttempt,onRemoveAdAccount:this.props.onRemoveAttempt}));}.bind(this));},_onInputChange:function(event){this.setState({queryString:event.target.value});},_onSelectAttempt:function(p){if(p&&this.props.onSelectAttempt)this.props.onSelectAttempt(p.getUniqueID());this.setState({queryString:''});this.refs.typeahead.clearActiveEntries();}});e.exports=o;},null);
__d("AudienceManagerShareAudienceTokenizer.react",["AbstractTypeahead.react","AdAccountIDSearchSource","FreeTextTypeaheadPresenter","List.react","React","XUICloseButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=k.createClass({displayName:"SharedAdAccountItem",propTypes:{adAccountID:k.PropTypes.string.isRequired,onRemoveAdAccount:k.PropTypes.func.isRequired},render:function(){return (k.createElement("li",{className:"_5tbm"},k.createElement("div",{className:"_5tbn"},k.createElement(l,{size:"small",onClick:this._onRemoveAdAccount})),this.props.adAccountID));},_onRemoveAdAccount:function(){this.props.onRemoveAdAccount(this.props.adAccountID);}}),p=k.createClass({displayName:"AudienceManagerShareAudienceTokenizer",propTypes:{selectedAdAccounts:k.PropTypes.array.isRequired,onSelectAttempt:k.PropTypes.func.isRequired,onRemoveAttempt:k.PropTypes.func.isRequired,dao:k.PropTypes.object.isRequired},getInitialState:function(){return {queryString:''};},render:function(){var q=i,r={};this.props.selectedAdAccounts.forEach(function(s){r[s]=true;});q.extraRendererProps={excludedEntries:r};return (k.createElement("div",null,this._renderSharedAdAccountsList(),k.createElement(g,{className:"_5tbo",selectedEntry:null,placeholder:"Enter an Account ID",presenter:q,searchSource:h.getInstance(this.props.dao),queryString:this.state.queryString,onChange:this._onInputChange,onSelectAttempt:this._onSelectAttempt,autoHighlight:true,selectOnBlur:true,ref:"typeahead"})));},_renderSharedAdAccountsList:function(){if(!this.props.selectedAdAccounts.length)return k.createElement("span",null);return (k.createElement(j,{border:"none",spacing:"none",className:"_5tbp"},this._renderSharedAdAccounts()));},_renderSharedAdAccounts:function(){return this.props.selectedAdAccounts.map(function(q){var r=q+"";return (k.createElement(o,{key:r,adAccountID:r,onRemoveAdAccount:this.props.onRemoveAttempt}));},this);},_onInputChange:function(event){this.setState({queryString:event.target.value});},_onSelectAttempt:function(q){if(q&&this.props.onSelectAttempt)this.props.onSelectAttempt(q.getUniqueID());this.setState({queryString:''});this.refs.typeahead.clearActiveEntries();}});e.exports=p;},null);
__d("AudienceManagerShareDialog.react",["AdsAMViewActions","AudienceManagerCapabilityTokenizer.react","AudienceManagerShareAudienceTokenizer.react","AudienceManagerUIConstants","CustomAudienceSharingCapabilities","React","InfoTable.react","InfoTableRow.react","InfoTableSection.react","XUIDialog.react","XUIDialogBody.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogButton.react","XUIDialogTitle.react","XUISpinner.react","adsGKCheck","areEqual","copyProperties","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){var ba=k.USE_FOR_ADS,ca=k.USE_FOR_INSIGHTS,da=l.createClass({displayName:"AudienceManagerShareDialog",propTypes:{audience:l.PropTypes.object.isRequired,dao:l.PropTypes.object.isRequired,onUpdateAudienceCapabilities:l.PropTypes.func.isRequired},getInitialState:function(){return {newCapabilities:{},loading:true};},componentWillMount:function(){this.props.dao.fetch.capabilitiesForAudience.clearCache();this.props.dao.fetch.capabilitiesForAudience.one(function(ea){var fa=(ea[0]&&ea[0].capabilities)||[];if(fa.length===0)fa={};this.setState({originalCapabilities:fa,newCapabilities:y({},fa),loading:false});}.bind(this),{audienceId:this.props.audience.id});},render:function(){return (l.createElement(p,{shown:true,width:j.DEFAULT_DIALOG_WIDTH,onToggle:this._onToggle},l.createElement(u,null,l.createElement("span",null,aa._("Share {audience name}",[aa.param("audience name",this.props.audience.name)]))),l.createElement(q,null,l.createElement("div",{className:"_5rkr"},this._renderDialogBody())),l.createElement(s,null,l.createElement(r,{use:"default",action:"close",onClick:this._onCancelClick}),l.createElement(t,{disabled:this.state.loading,use:"confirm",action:"confirm",label:"Update",onClick:this._onUpdateButtonClick}))));},_renderDialogBody:function(){if(this.state.loading){return (l.createElement("div",{className:"_5saq"},l.createElement("p",null,"Please wait while we find the shared accounts..."),l.createElement(v,{size:"large"})));}else return (l.createElement("div",null,this._renderDescriptionByGK(),l.createElement(m,{className:"_4x0p"},l.createElement(o,null,l.createElement(n,{label:"Account IDs",type:"data"},this._renderTokenizer())))));},_renderDescriptionByGK:function(){if(!w('audience_insights_v1'))return (l.createElement("div",null,l.createElement("p",null,"Enter an ad account ID to give them permission to target ads for this audience. They will not be able to edit or share your audience.")));return (l.createElement("p",null,"Enter an ad account ID to give them permission to target ads and see insights for this audience. They will not be able to edit or share your audience."));},_renderTokenizer:function(){if(!w('audience_insights_v1')){var ea=Object.keys(this.state.newCapabilities);return (l.createElement("div",null,l.createElement(i,{selectedAdAccounts:ea,onSelectAttempt:this._onAddAdAccountAttempt,onRemoveAttempt:this._onRemoveAdAccountAttempt,dao:this.props.dao})));}return (l.createElement("div",null,l.createElement(h,{capabilities:this.state.newCapabilities,dao:this.props.dao,onRemoveAttempt:this._onRemoveAdAccountAttempt,onSelectAttempt:this._onAddAdAccountAttempt,onUpdateAttempt:this._onUpdateCapabilityAttempt})));},_onUpdateButtonClick:function(){var ea=this.state.originalCapabilities,fa=this.state.newCapabilities,ga={},ha=[];for(var ia in ea)if(!fa[ia]){ha.push(ia);}else if(!x(ea[ia],fa))ga[ia]=fa[ia];for(var ja in fa)if(!ea[ja])ga[ja]=fa[ja];this.props.onUpdateAudienceCapabilities(this.props.audience.id,ga,ha);g.closeShareAudienceDialog();},_onAddAdAccountAttempt:function(ea){var fa=this.state.newCapabilities;if(!w('audience_insights_v1')){fa[ea]=[ba];}else fa[ea]=[ba,ca];this.setState({newCapabilities:fa});},_onRemoveAdAccountAttempt:function(ea){var fa=this.state.newCapabilities;delete fa[ea];this.setState({newCapabilities:fa});},_onUpdateCapabilityAttempt:function(ea,fa){var ga=this.state.newCapabilities;ga[ea]=fa;this.setState({newCapabilities:ga});},_onToggle:function(){g.closeShareAudienceDialog();},_onCancelClick:function(){g.closeShareAudienceDialog();}});e.exports=da;},null);
__d("AudienceManagerStages",[],function(a,b,c,d,e,f){e.exports={IDLE:1,PROCESSING:2,ERROR:3};},null);
__d("AdsCMAccountID.react",["React","ReactComponentWithPureRenderMixin","fbt"],function(a,b,c,d,e,f,g,h,i){'use strict';var j=g.PropTypes,k=g.createClass({displayName:"AdsCMAccountID",mixins:[h],propTypes:{accountID:j.string.isRequired,currency:j.string.isRequired},render:function(){return (g.createElement("span",null,i._("Ad Account: {Ad account ID} ({Currency symbol e.g. USD})",[i.param("Ad account ID",this.props.accountID),i.param("Currency symbol e.g. USD",this.props.currency)])));}});e.exports=k;},null);
__d("AudienceManagerTableHeader.react",["AdsCMAccountID.react","Layout.react","React","XUIGrayText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){'use strict';var m=h.Column,n=h.FillColumn,o=i.createClass({displayName:"AudienceManagerTableHeader",propTypes:{account:i.PropTypes.object.isRequired},render:function(){return (i.createElement("div",{className:"_5w-k clearfix"},i.createElement(h,null,i.createElement(m,{className:"_431b"},i.createElement("div",{className:(("_43m")+('')+(' '+"_5f0v")+(' '+"_45ah"))})),i.createElement(n,null,i.createElement("div",{className:"_5w-l"},"Audiences"),i.createElement("div",{className:"_1_jg"},this._renderAccountID())))));},_renderAccountID:function(){if(!this.props.account.account_id||!this.props.account.currency)return null;return (i.createElement(j,{className:"_1_jj",key:"accountID"},i.createElement(g,{accountID:this.props.account.account_id,currency:this.props.account.currency})));}});e.exports=o;},null);
__d("AudienceManagerTopNavigation.react",["AdsCreateAudienceActionSelector.react","LeftRight.react","BusinessURI.brands","Link.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){'use strict';var n=k.createClass({displayName:"AudienceManagerTopNavigation",propTypes:{accountID:k.PropTypes.string.isRequired,onAction:k.PropTypes.func.isRequired,canWrite:k.PropTypes.bool.isRequired,isBlankState:k.PropTypes.bool.isRequired},render:function(){var o=this.props.isBlankState?k.createElement("div",null):k.createElement(g,{onAction:this.props.onAction,disabled:!this.props.canWrite,supportSavedTargetSpec:true}),p=i('/ads/manage/').addQueryData({act:this.props.accountID});return (k.createElement("div",{className:"_2pi3 _2pia"},k.createElement(h,null,k.createElement("div",{className:"_3p18"},k.createElement(j,{href:p},"Ads Manager"),k.createElement("span",{className:"_3jw5"},">"),k.createElement("span",{className:"_3jw6"},"Audiences")),o)));}});e.exports=n;},null);
__d("AudienceManagerTransactionDialog.react",["AudienceManagerStages","React","ReactLayeredComponentMixin","XUIDialog.react","XUIDialogBody.react","XUINotice.react","XUISpinner.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=h.PropTypes,p=h.createClass({displayName:"AudienceManagerTransactionDialog",mixins:[i],propTypes:{error:o.object,stage:o.number.isRequired,onCancelError:o.func.isRequired},render:function(){return h.createElement("span",null);},renderLayers:function(){var q=(this.props.stage===g.PROCESSING||this.props.stage===g.ERROR);return {dialog:h.createElement(j,{shown:q,width:600,onToggle:this._onToggle},h.createElement(k,null,this._renderDialogBody()))};},_renderDialogBody:function(){switch(this.props.stage){case g.PROCESSING:return (h.createElement("div",{className:"_5oe3"},h.createElement(m,{background:"light",size:"large"})));case g.ERROR:return (h.createElement("div",{className:"_5oe3"},h.createElement(l,{use:"warn",onDismiss:this._onToggle.bind(this,false)},this.props.error.message)));default:return h.createElement("span",null);}},_onToggle:function(q){if(!q)this.props.onCancelError&&this.props.onCancelError();}});e.exports=p;},null);
__d("AdsPixelCode.react",["AudienceManagerURLConstants","Link.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.createClass({displayName:"AdsPixelCode",propTypes:{pixel:i.PropTypes.object.isRequired,onSendEmailLinkClick:i.PropTypes.func.isRequired},render:function(){return (i.createElement("div",null,i.createElement("p",null,"Copy the code below and paste it between the \u003Chead> and \u003C\/head> in your website code. Then you can set up rules to track specific actions people take across your website."),i.createElement("p",null,i.createElement(h,{onClick:this.props.onSendEmailLinkClick},"Send the code to your website developer")),i.createElement("textarea",{readOnly:true,noresize:true,value:this.props.pixel.code,onClick:function(){return this.refs.pixelCodeTextArea.getDOMNode().select();}.bind(this),className:"_13d_",ref:"pixelCodeTextArea"}),i.createElement("p",null,k._("Learn more about how to verify your pixel installation in the {help-center-link}.",[k.param("help-center-link",i.createElement(h,{href:g.WCA_INSTALL_PIXEL_DOC,target:"_blank"},"Help Center"))]))));},_defaultEmailContent:function(m){return ("Hi Friendly Developer,"+'\n\n'+"Please copy the code below and paste into my website between \u003Chead> and \u003C\/head> so I can remarket to my customers on Facebook. Learn more in the Help Center."+'\n\n'+m);}});e.exports=l;},null);
__d("AdsPixelDetails.react",["AdsPixelCode.react","AdsPixelInsights.react","React","XUINotice.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.createClass({displayName:"AdsPixelDetails",propTypes:{pixel:i.PropTypes.object.isRequired,dao:i.PropTypes.object.isRequired,width:i.PropTypes.number.isRequired,height:i.PropTypes.number.isRequired,onSendEmailLinkClick:i.PropTypes.func.isRequired,message:i.PropTypes.string},render:function(){return (i.createElement("div",null,this._renderPixelInsights(),this._renderPixelCode()));},_renderPixelCode:function(){return (i.createElement("div",null,i.createElement("div",{className:"_5kka"},"Pixel Code"),i.createElement("div",{className:"_5kkb"},this._renderMessage(),i.createElement(g,{pixel:this.props.pixel,onSendEmailLinkClick:this.props.onSendEmailLinkClick,ref:"AdsPixelCode"}))));},_renderPixelInsights:function(){return (i.createElement("div",{className:"_5kkh"},i.createElement("div",{className:"_5kka"},"Pixel Events"),i.createElement("div",null,i.createElement(h,{pixelId:this.props.pixel.id,dao:this.props.dao,height:this.props.height,width:this.props.width}))));},_renderMessage:function(){if(!this.props.message)return;return (i.createElement(j,{use:"notify",className:"_13e0"},this.props.message));}});e.exports=m;},null);
__d("AudienceManagerViewPixelDialogViewStateEnum",[],function(a,b,c,d,e,f){var g={VIEW_PIXEL:'view_pixel',SEND_EMAIL:'send_email'};e.exports=g;},null);
__d("WebRemarketingDialogGear.react",["AudienceManagerURLConstants","ContextualDialogArrow","ContextualLayerAutoFlip","Image.react","PopoverMenu.react","React","XUIButton.react","ReactXUIMenu","XUIMenuSeparator.react","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';var r=n.Item,s="pixel",t=l.createClass({displayName:"WebRemarketingDialogGear",propTypes:{learnMoreURL:l.PropTypes.string,onViewPixelCode:l.PropTypes.func},render:function(){return (l.createElement(k,{menu:l.createElement(n,{onItemClick:this._handleItemClick},this._getMenuItems()),layerBehaviors:[i,h]},l.createElement(m,{image:l.createElement(j,{src:q('/images/ui/x/image/gear.png')})})));},_getMenuItems:function(){var u=[];if(this.props.onViewPixelCode)u.push(this._getViewPixelCodeMenuItem());if(this.props.learnMoreURL)u.push(this._getlearnMoreMenuItem());if(u.length)u.push(l.createElement(o,{key:"separator"}));u.push(this._getFeedbackMenuItem());return u;},_getViewPixelCodeMenuItem:function(){return (l.createElement(r,{value:s,key:s},"View Pixel Code"));},_getlearnMoreMenuItem:function(){return (l.createElement(r,{href:this.props.learnMoreURL,target:"_blank",key:"learnMore"},"Learn More"));},_getFeedbackMenuItem:function(){return (l.createElement(r,{href:g.WCA_FEEDBACK,target:"_blank",key:"feedback"},"Send Feedback"));},_handleItemClick:function(u,v){switch(v.item.getValue()){case s:this.props.onViewPixelCode();break;}}});e.exports=t;},null);
__d("WebsiteCustomAudienceLoadingDialog.react",["AudienceManagerURLConstants","React","WebRemarketingDialogGear.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUISpinner.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=h.createClass({displayName:"WebsiteCustomAudienceLoadingDialog",render:function(){return (h.createElement("div",null,h.createElement(l,null,"Loading account information"),h.createElement(j,null,h.createElement("div",{className:"_qtd"},h.createElement(m,{className:"_5swe",size:"small",background:"light"}))),h.createElement(k,{leftContent:h.createElement(i,{learnMoreURL:g.WCA_GETTING_STARTED})})));}});e.exports=p;},null);
__d("AdsPixelSnippet.react",["React","cx"],function(a,b,c,d,e,f,g,h){"use strict";var i=g.createClass({displayName:"AdsPixelSnippet",render:function(){var j=this.props.pixelCode.split('\n').map(function(k,l){return g.createElement("p",{key:l},k);});return (g.createElement("div",{className:"_4wah"},j));}});e.exports=i;},null);
__d("AdsPixelEmailInput.react",["CIWebmailValidator","React","Token.react","XUITextInput.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";var m=h.createClass({displayName:"AdsPixelEmailInput",propTypes:{onChange:h.PropTypes.func},getInitialState:function(){return {emails:[],textInProgress:''};},componentDidMount:function(){this.props.onChange&&this.props.onChange();},render:function(){return (h.createElement("div",{className:"_2_m clearfix",onClick:function(){this.refs.textInput.getDOMNode().focus();}.bind(this)},h.createElement("div",null,this._getEmailTokens()),h.createElement(j,{className:"_2_q",ref:"textInput",value:this.state.textInProgress,onChange:this._onChange,onBlur:this._onCommit,onBackspace:this._onBackspace,onEnter:this._onCommit,placeholder:this._getPlaceHolderText()})));},_showDialog:function(){this.refs.dialog.showDialog();},_getEmailTokens:function(){return this.state.emails.map(function(n,o){return h.createElement(i,{className:(("_2_r")+(!g.isValidEmail(n)?' '+"_2_s":'')),key:o,label:n,removable:true,onRemove:this._removeEmailByIndex.bind(this,o)});}.bind(this));},_getPlaceHolderText:function(){return ("Add a recipient");},_onCommit:function(event){this._onAdd(event.target.value);this.setState({textInProgress:''});},_onChange:function(event){var n=event.target.value,o=n.slice(-1);if([',',';',' '].indexOf(o)!==-1){this._onAdd(n.slice(0,n.length-1));this.setState({textInProgress:''});}else this.setState({textInProgress:n});this.props.onChange&&this.props.onChange();},_onAdd:function(n){if(n){var o=this.state.emails;o.push(n);this.setState({emails:o});this.props.onChange&&this.props.onChange();}},_onBackspace:function(event){var n=event.target.value;if(n.length===0&&this.state.emails.length>0)this._removeEmailByIndex(-1);},_removeEmailByIndex:function(n){var o=this.state.emails;o.splice(n,1);this.setState({emails:o});this.props.onChange&&this.props.onChange();},getEmailList:function(){return this.state.emails;},isInputValid:function(){if(this.state.textInProgress&&!g.isValidEmail(this.state.textInProgress))return false;if(this.state.emails.length===0&&!this.state.textInProgress)return false;return this.state.emails.every(function(n){return g.isValidEmail(n);});}});e.exports=m;},null);
__d("XAdsPixelCodeEmailController",["XController"],function(a,b,c,d,e,f){e.exports=b("XController").create("\/ads\/pixels\/sendcodebymail\/",{recipients:{type:"StringVector",required:true},personal_message:{type:"String"},pixel_id:{type:"Int",required:true}});},null);
__d("WebsiteCustomAudienceSendPixelByMailDialog.react",["AdInterfacesUiLogger","AdsPixelNotifFieldEnum","AdsPixelNotifParamsEnum","AdsPixelSnippet.react","AsyncRequest","AudienceManagerURLConstants","AdsPixelEmailInput.react","AdsPixelCodeEmailFormParams","XAdsPixelCodeEmailController","AudienceManagerLoggingEvents","React","WebRemarketingDialogGear.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=q.createClass({displayName:"WebsiteCustomAudienceSendPixelByMailDialog",propTypes:{pixel:q.PropTypes.object.isRequired,onSendComplete:q.PropTypes.func.isRequired,onCancel:q.PropTypes.func.isRequired},getInitialState:function(){return {enableSend:false};},render:function(){var aa=n[h.PERSONAL_MESSAGE_LABEL];return (q.createElement("div",null,q.createElement(v,null,"Send Custom Audience Pixel to Your Website Developer"),q.createElement(s,null,q.createElement("div",{className:"_qtd"},q.createElement(w,{weight:"bold",className:"_4az6 _4az7"},"To:"),q.createElement(m,{ref:"emailInput",onChange:function(){this.setState({enableSend:this.refs.emailInput.isInputValid()});}.bind(this)}),q.createElement("div",{className:"_4az8"},q.createElement("span",{className:"_4az6"},y._("{=Personal Message} (optional):",[y.param("=Personal Message",q.createElement(w,{weight:"bold"},aa))])),q.createElement("textarea",{className:"_4az9 _4azb",placeholder:"Add personal message",ref:"personalMessageInput"})),q.createElement("div",{className:"_4az8"},q.createElement(w,{weight:"bold",className:"_4az6"},"Pixel Information:"),q.createElement("div",{className:"_4az9 scrollable _4azc _4azd"},q.createElement(w,{weight:"bold"},n[h.INSTRUCTION_LABEL]),q.createElement("div",{className:"_4aze"},n[h.INSTRUCTION]),q.createElement("div",{className:"_4azf"},q.createElement(j,{pixelCode:this.props.pixel.code})))))),q.createElement(u,{leftContent:q.createElement(r,{learnMoreURL:l.WCA_INSTALL_PIXEL_DOC})},q.createElement(t,{onClick:this.props.onCancel,label:"Back"}),q.createElement(t,{use:"confirm",onClick:this._send,disabled:!this.state.enableSend,label:"Send Email"}))));},_send:function(){var aa=o.getURIBuilder().setString(i.PERSONAL_MESSAGE,this.refs.personalMessageInput.getDOMNode().value).setInt(i.PIXEL_ID,this.props.pixel.id).setStringVector(i.RECIPIENTS,this.refs.emailInput.getEmailList()).getURI(),ba=this.refs.emailInput.getEmailList();new k().setURI(aa).setHandler(function(ca){g.log(p.WCA_EMAIL_PIXEL_SUCCESS);this.props.onSendComplete(y._("Successfully sent the pixel code to {list of items}",[y.param("list of items",ba.join(', '))]),true);}.bind(this)).setErrorHandler(function(ca,da){g.log(p.WCA_EMAIL_PIXEL_FAILURE);this.props.onSendComplete(y._("Failed to send the pixel code to {list of items}",[y.param("list of items",ba.join(', '))]),false);}.bind(this)).send();}});e.exports=z;},null);
__d("AudienceManagerViewPixelDialog.react",["AdsAMViewActions","AdsPixelDetails.react","AudienceManagerUIConstants","React","AudienceManagerViewPixelDialogViewStateEnum","WebsiteCustomAudienceLoadingDialog.react","WebsiteCustomAudienceSendPixelByMailDialog.react","XUIDialog.react","XUIDialogBody.react","XUIDialogOkayButton.react","XUIDialogFooter.react","XUIDialogTitle.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=j.PropTypes,v=j.createClass({displayName:"AudienceManagerViewPixelDialog",propTypes:{accountID:u.string.isRequired,dao:u.object.isRequired},getInitialState:function(){return {pixel:null,viewState:k.VIEW_PIXEL,enableSendEmailButton:false,message:null};},componentWillMount:function(){this.props.dao.fetch.adsPixelsForAccount.one(function(w){if(w.length>0){var x=w[0];this.setState({pixel:x});}}.bind(this),{accountId:this.props.accountID});},render:function(){return (j.createElement(n,{onToggle:this._onToggle,shown:true,fixedTopPosition:i.DEFAULT_DIALOG_TOP_POS,width:i.DEFAULT_DIALOG_WIDTH},this._renderBody()));},_renderBody:function(){if(!this.state.pixel)return j.createElement(l,null);switch(this.state.viewState){case k.VIEW_PIXEL:return this._getPixelDetails();case k.SEND_EMAIL:return this._getSendEmailBody();}},_getPixelDetails:function(){return (j.createElement("div",null,j.createElement(r,null,"Pixel Details"),j.createElement(o,null,j.createElement("div",{className:"_5rkr"},j.createElement(h,{pixel:this.state.pixel,dao:this.props.dao,onSendEmailLinkClick:function(){this.setState({viewState:k.SEND_EMAIL});}.bind(this),height:200,width:500,message:this.state.message}))),j.createElement(q,null,j.createElement(p,{use:"confirm",action:"cancel"}))));},_getSendEmailBody:function(){return (j.createElement(m,{pixel:this.state.pixel,onCancel:function(){return this.setState({viewState:k.VIEW_PIXEL});}.bind(this),onSendComplete:function(w,x){this.setState({message:w,viewState:k.VIEW_PIXEL});}.bind(this)}));},_onToggle:function(){g.closePixelDialog();}});e.exports=v;},null);
__d("WebsiteCustomAudienceConfirmationDialog.react",["AudienceManagerURLConstants","React","WebRemarketingDialogGear.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=h.createClass({displayName:"WebsiteCustomAudienceConfirmationDialog",propTypes:{pixel:h.PropTypes.object.isRequired},render:function(){var q="Your audience is ready.";if(!this.props.pixel||!this.props.pixel.last_fired_time)q="Finish setting up your Custom Audience pixel code to start adding people to this audience.";return (h.createElement("div",null,h.createElement(m,null,"Website Custom Audience Created"),h.createElement(j,null,h.createElement("div",{className:"_qtd"},h.createElement("div",{className:"_5saq"},h.createElement("div",{className:"_5svr _5svs"},"Thank You for Creating a Custom Audience"),h.createElement("p",null,q)))),h.createElement(k,{leftContent:h.createElement(i,{learnMoreURL:g.WCA_GETTING_STARTED})},h.createElement(l,{use:"confirm",action:"cancel"}))));}});e.exports=p;},null);
__d("WebsiteCustomAudienceNUXDialog.react",["AdInterfacesUiLogger","AudienceManagerLoggingEvents","AudienceManagerURLConstants","Link.react","React","Image.react","WebRemarketingDialogGear.react","XRemarketingTOSController","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUISpinner.react","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){var x={DEFAULT:1,CREATING_PIXEL:2},y=k.createClass({displayName:"WebsiteCustomAudienceNUXDialog",propTypes:{accountID:k.PropTypes.string.isRequired,dao:k.PropTypes.object.isRequired,pixel:k.PropTypes.object,tosAccepted:k.PropTypes.object.isRequired,tosRequirementsForAccount:k.PropTypes.object.isRequired,onPixelCreated:k.PropTypes.func.isRequired,onGotoRuleBuilder:k.PropTypes.func.isRequired,onGotoViewPixelCode:k.PropTypes.func.isRequired},getInitialState:function(){return {tosCheckboxSelected:false,viewState:x.DEFAULT};},render:function(){return (k.createElement("div",null,k.createElement(s,null,"Create a Custom Audience from your Website"),k.createElement(o,null,k.createElement("div",{className:"_qtd"},k.createElement("p",null,"Show ads to people who visit your website."),k.createElement("p",null,"You can set up your audience to include everyone who visits your website, or even create separate audiences for people who visit specific pages on your website."),k.createElement("p",null,"Install the Custom Audience pixel on your website to start building your audience automatically. You can also send this code directly to the person who manages your website."),this._renderPixelStateInfo(),k.createElement("div",null,k.createElement("input",{type:"checkbox",checked:this._getIsTosAccepted()||this.state.tosCheckboxSelected,onChange:this._tosCheckboxChanged,disabled:this._getIsTosAccepted()},v._("I have read and accepted the {=Terms for Custom Audience from your Mobile App and Website}",[v.param("=Terms for Custom Audience from your Mobile App and Website",k.createElement(j,{target:"_blank",href:(n.getURIBuilder()).setInt('act',this.props.accountID).getURI()},"Terms for Custom Audience from your Mobile App and Website"))]))))),k.createElement(r,{leftContent:k.createElement(m,{learnMoreURL:i.WCA_GETTING_STARTED})},this._renderFooter())));},_renderFooter:function(){switch(this.state.viewState){case x.DEFAULT:if(!!this.props.pixel)return (k.createElement("div",null,k.createElement(q,null),k.createElement(p,{use:"confirm",onClick:function(){g.log(h.AM_WCA_NUX_CREATE_AUDIENCE);this._acceptTOSIfNeededAndProceed(this.props.onGotoRuleBuilder);}.bind(this),disabled:!this._getCanProceedFromNux(),label:"Create Audience"})));return (k.createElement("div",null,k.createElement(q,null),k.createElement(p,{use:"confirm",onClick:this._onCreatePixel,disabled:!this._getCanProceedFromNux(),label:"Create Web Remarketing Pixel"})));case x.CREATING_PIXEL:return (k.createElement("div",null,k.createElement(t,{className:"_5swe",size:"small",background:"light"}),k.createElement(q,{disabled:true}),k.createElement(p,{use:"confirm",disabled:true,label:"Create Custom Audience Pixel"})));}},_renderPixelStateInfo:function(){if(!this.props.pixel)return k.createElement("span",null);if(this.props.pixel.last_fired_time){return (k.createElement("p",null,k.createElement(j,{onClick:function(){return this._acceptTOSIfNeededAndProceed(this.props.onGotoViewPixelCode);}.bind(this)},"View your Custom Audience pixel code")));}else return (k.createElement("div",{className:"_5yhs"},k.createElement(l,{className:"_5svn _47aw",src:w('/images/ads/audience_manager/warning.png')}),k.createElement("div",{className:"_5svn _47ax"},k.createElement("div",{className:"_47av"},"You haven't finished setting up your Custom Audience pixel."),k.createElement(j,{onClick:function(){return this._acceptTOSIfNeededAndProceed(this.props.onGotoViewPixelCode);}.bind(this)},"View your Custom Audience pixel code")),k.createElement("div",{className:"_5svo"})));},_acceptTOSIfNeededAndProceed:function(z){if(!this._getIsTosAccepted())return this._acceptTos(z);z();},_onCreatePixel:function(){this.setState({viewState:x.CREATING_PIXEL});g.log(h.AM_WCA_NUX_CREATE_PIXEL);this._acceptTOSIfNeededAndProceed(this._createPixel);},_createPixel:function(){this.props.dao.add.createAdsPixel.one(function(z){g.log(h.AM_WCA_NUX_CREATE_PIXEL_SUCCESS);this.props.onPixelCreated();}.bind(this),{accountId:this.props.accountID});},_acceptTos:function(z){this.props.dao.add.acceptCustomAudiencesTos.one(function(){z&&z();g.log(h.AM_WCA_TOS_ACCEPT_SUCCESS);},{tos_id:this.props.tosRequirementsForAccount.website_custom_audience,accountId:this.props.accountID,handleError:function(aa,ba){g.log(h.AM_WCA_TOS_ACCEPT_FAILURE);this.setState({errorMessage:ba.error.message});}.bind(this)});},_getCanProceedFromNux:function(){return (this._getIsTosAccepted()||this.state.tosCheckboxSelected);},_getIsTosAccepted:function(){var z=this.props.tosRequirementsForAccount.website_custom_audience;return this.props.tosAccepted.hasOwnProperty(z)&&(this.props.tosAccepted[z]==1);},_tosCheckboxChanged:function(event){this.setState({tosCheckboxSelected:event.target.checked});}});e.exports=y;},null);
__d("WebsiteCustomAudienceOperators",["fbt"],function(a,b,c,d,e,f,g){var h={EQ:{value:'eq',label:"equals",isNumeric:false},NEQ:{value:'neq',label:"!=",isNumeric:false},LT:{value:'lt',label:"\u003C",isNumeric:true},GT:{value:'gt',label:">",isNumeric:true},GTE:{value:'gte',label:">=",isNumeric:true},LTE:{value:'lte',label:"\u003C=",isNumeric:true},CONTAINS:{value:'i_contains',label:"contains",isNumeric:false},NOT_CONTAINS:{value:'i_not_contains',label:"not cont.",isNumeric:false}},i={EQ:{value:'eq',label:"Equals",isNumeric:false},CONTAINS:{value:'i_contains',label:"Contains",isNumeric:false}},j={EQ:{value:'eq',label:"URL equals",isNumeric:false},CONTAINS:{value:'i_contains',label:"URL contains",isNumeric:false}};e.exports={GenericOperators:h,SimpleOperators:i,URLOperators:j};},null);
__d("WebsiteCustomAudienceModel",["isEmpty","WebsiteCustomAudienceTrafficType","WebsiteCustomAudienceOperators"],function(a,b,c,d,e,f,g,h,i){var j=i.GenericOperators,k=i.URLOperators,l=function(){this.id=null;this.name='';this.description='';this.inclusion_rules=[new o()];this.exclusion_rules=[new o()];this.duration=30;this.trafficType=h.ALL_WEBSITE_VISITORS;this.isRuleEditable=true;},m=0,n=function(){this.key=m++;this.filter=j.CONTAINS.value;this.tokens=[];this.customfield=null;},o=function(){this.id=null;this.key=m++;this.scope='url';this.clauses=[new n()];this.event=null;},p={getAllVisitors:function(){var r=new o();r.clauses[0].tokens.push("");return r;},getDeprecatedAllVisitors:function(){var r=new o();r.clauses[0].tokens.push("/");return r;},isDeprecatedAllVisitors:function(r){return r===q.serializeRule(p.getDeprecatedAllVisitors());},isAllVisitors:function(r){return p.isDeprecatedAllVisitors(r)||q.serializeRule(p.getAllVisitors())===r;}},q={isEventBasedRule:function(r){return r.scope==='event';},migrateAtomicRule:function(r){if(g(r))return null;var s=Object.keys(r)[0];if(s.toLowerCase()==='domain'||s.toLowerCase()==='path')if(Object.keys(r)[0]=='i_not_contains'){return null;}else{r.url=r[s];s='url';}if(s.toLowerCase()!='url')return null;var t=r[s],u=Object.keys(t)[0],v=t[u];if(!q._containsOperator(k,u))return null;return {scope:s,operator:u,token:v};},migrateRule:function(r){var s=new o(),t;if(q._isAtomic(r)){return this.migrateAtomicRule(r);}else if(r.and){for(var u=0;u<r.and.length;u++){var v=r.and[u];t=this.migrateRule(v);if(!t)return null;q._updateRuleClauseWithOrParse(t,s);}s.clauses=s.clauses.filter(function(aa){return q.validateRuleClauseWhenDeserialize(s,aa);});}else if(r.or){var w=[],x=null,y=null;for(var z=0;z<r.or.length;z++){if(!q._isAtomic(r.or[z]))return null;t=this.migrateAtomicRule(r.or[z]);if(!t)return null;if(!x){x=t.scope;}else if(x!==t.scope)return null;y=t.operator;w.push(t.token);}return {tokens:w,scope:x,filter:y};}if(q.isEventBasedRule(s)&&s.clauses.length===0)s.clauses=[new n()];return s;},validateRule:function(r){var s=r.clauses.filter(function(t){return q.validateRuleClause(r,t);});if(q.isEventBasedRule(r)){if(!r.event)return false;if(r.clauses.length)return (s.length>0);return true;}return (s.length>0);},validateRuleClause:function(r,s){return (s.tokens.length>0||(q.isEventBasedRule(r)&&!s.customfield));},validateRuleClauseWhenDeserialize:function(r,s){return s.tokens.length>0;},serializeRule:function(r){if(q.isEventBasedRule(r))return q._serializeCustomEventRule(r);var s=[];for(var t=0;t<r.clauses.length;t++){var u=r.clauses[t];s.push(q._serializeClause(u,r.scope));}s=s.filter(function(v){return !!v;});if(s.length)return JSON.stringify({and:s});},_serializeCustomEventRule:function(r){var s=r.clauses.map(function(t){return q._serializeClause(t,t.customfield);}).filter(function(t){return !!t;});s.push(q._serializeRuleUnit(r.scope,j.EQ.value,r.event));return JSON.stringify({and:s});},_serializeClause:function(r,s){var t=[];for(var u=0;u<r.tokens.length;u++){var v=r.tokens[u];t.push(q._serializeRuleUnit(s,r.filter,v));}if(t.length)return {or:t};},_serializeRuleUnit:function(r,s,t){var u={};u[s]=t;var v={};v[r]=u;return v;},deserializeRule:function(r){try{if(p.isDeprecatedAllVisitors(r))return p.getAllVisitors();var t,u=JSON.parse(r);if(u.and){t=q._deserializeClausesFromAnd(u);}else if(u.or){var v=q._deserializeTokensFromOr(u);if(v&&v.tokens.length){t=new o();q._updateRuleClauseWithOrParse(v,t);t.clauses=t.clauses.filter(function(w){return q.validateRuleClauseWhenDeserialize(t,w);});}}else if(u.url)t=this._deserializeClausesFromAnd({and:[u]});if(!t)return t;if(q.isEventBasedRule(t)&&t.clauses.length===0)t.clauses=[new n()];return t;}catch(s){}},_deserializeClausesFromAnd:function(r){var s=new o();for(var t=0;t<r.and.length;t++){var u=r.and[t];if(u.or){var v=this._deserializeTokensFromOr(u);if(!v)return;q._updateRuleClauseWithOrParse(v,s);}else if(q._isAtomic(u)){v=this._deserializeTokensFromOr({or:[u]});if(!v)return;q._updateRuleClauseWithOrParse(v,s);}}s.clauses=s.clauses.filter(function(w){return q.validateRuleClauseWhenDeserialize(s,w);});return s;},_deserializeTokensFromOr:function(r){var s=[],t=null,u=null;for(var v=0;v<r.or.length;v++){var w=r.or[v];if(!q._isAtomic(w))return;var x=q._deserializeAtomicRule(w);if(!x)return;if(!t){t=x.scope;}else if(t!==x.scope)return;u=x.operator;s.push(x.token);}return {tokens:s,scope:t,filter:u};},_updateRuleClauseWithOrParse:function(r,s){if(!r||!r.tokens.length)return;var t=new n();switch(r.scope){case 'event':s.event=r.tokens[0];s.scope='event';return;case 'url':s.scope=r.scope;break;default:t.customfield=r.scope;}t.tokens=r.tokens;t.filter=r.filter;s.clauses.push(t);},_deserializeAtomicRule:function(r){if(g(r))return;var s=Object.keys(r)[0];if(s.toLowerCase()==='domain'||s.toLowerCase()==='path')return;var t=r[s],u=Object.keys(t)[0],v=t[u];if(s.toLowerCase()==='url'&&!q._containsOperator(k,u))return;return {scope:s,operator:u,token:v};},_isAtomic:function(r){return !r.or&&!r.and;},findRule:function(r,s){var t=q._findRuleInArray(r.inclusion_rules,s);if(!t)t=q._findRuleInArray(r.exclusion_rules,s);return t;},_findRuleInArray:function(r,s){for(var t=0;t<r.length;t++)if(r[t].key==s)return r[t];return null;},findRuleClause:function(r,s){return q._findRuleClauseInArray(r.inclusion_rules,s)||q._findRuleClauseInArray(r.exclusion_rules,s);},_findRuleClauseInArray:function(r,s){for(var t=0;t<r.length;t++){var u=r[t];for(var v=0;v<u.clauses.length;v++){var w=u.clauses[v];if(w.key==s)return w;}}return null;},_containsOperator:function(r,s){return Object.keys(r).some(function(t){return r[t].value===s;});}};e.exports={Audience:l,Operations:q,Rule:o,RuleClause:n,RuleTemplates:p};},null);
__d("WebsiteCustomAudienceRetention.react",["AdsHelpLink.react","AudienceManagerUIConstants","InfoTable.react","InfoTableRow.react","InfoTableSection.react","InputLabel.react","React","XUICheckboxInput.react","XUITextInput.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=m.createClass({displayName:"WebsiteCustomAudienceRetention",propTypes:{duration:m.PropTypes.number.isRequired,prefill:m.PropTypes.bool.isRequired,onChangeDuration:m.PropTypes.func.isRequired,onChangePrefill:m.PropTypes.func},getInitialState:function(){return {duration:this.props.duration.toString()};},componentWillReceiveProps:function(s){if(this.state.duration!==s.duration.toString())this.setState({duration:s.duration.toString()});},render:function(){return (m.createElement(i,null,m.createElement(k,null,m.createElement(j,{label:"In the last",helpLink:m.createElement(g,{position:"above",width:h.HELP_LINK_WIDTH},"The number of days people will remain in your audience after they visit your website. People will be removed from your audience after the set time period unless they visit your website again.",m.createElement("br",null),m.createElement("br",null),"Maximum time: 180 days"),type:"data"},m.createElement("div",null,m.createElement("div",null,m.createElement(o,{className:"_56mh",value:this.state.duration,onChange:function(event){return this.setState({duration:event.target.value});}.bind(this),onBlur:this._updateDuration}),m.createElement("span",{className:"_5r3z"},"days")),this._renderPrefill())))));},_renderPrefill:function(){if(!this.props.onChangePrefill)return;return (m.createElement("div",{className:"_5ns4"},m.createElement(l,null,m.createElement(n,{defaultChecked:this.props.prefill,onChange:function(event){return this.props.onChangePrefill(event.target.checked);}.bind(this)}),m.createElement("label",null,"Include past website traffic"))));},_updateDuration:function(){var s=parseInt(this.state.duration,10);if(!isNaN(s)&&s>0&&s<=180){this.props.onChangeDuration(s);}else this.setState({duration:this.props.duration.toString()});}});e.exports=r;},null);
__d("WebsiteCustomAudienceTrafficSelector.react",["AdsHelpLink.react","AudienceManagerUIConstants","InfoTable.react","InfoTableRow.react","InfoTableSection.react","React","XUISelector.react","XUIMenuSeparator.react","WebsiteCustomAudienceTrafficType","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=m.Option,r=l.createClass({displayName:"WebsiteCustomAudienceTrafficSelector",propTypes:{trafficType:l.PropTypes.number.isRequired,onChangeTrafficType:l.PropTypes.func},render:function(){return (l.createElement(i,null,l.createElement(k,null,l.createElement(j,{label:"Website traffic",helpLink:l.createElement(g,{position:"above",width:h.HELP_LINK_WIDTH},"Choose how you want to add people to your audience. Include all of your website visitors, or create rules that only add people who visit specific parts of your website."),type:"data"},l.createElement("div",null,l.createElement(m,{disabled:!this.props.onChangeTrafficType,size:"large",onChange:this.props.onChangeTrafficType,value:this.props.trafficType,maxwidth:0},l.createElement(q,{value:o.ALL_WEBSITE_VISITORS},"Anyone who visits your website"),l.createElement(q,{value:o.SPECIFIC_PAGE_VISITORS},"People who visit specific web pages"),l.createElement(q,{value:o.SPECIFIC_PAGE_VISITORS_WITH_EXCLUSION},"People visiting specific web pages but not others"),l.createElement(q,{value:o.CHURNED_VISITORS},"People who haven't visited in a certain amount of time"),l.createElement(n,null),l.createElement(q,{value:o.CUSTOM},"Custom Combination")))))));}});e.exports=r;},null);
__d("WebsiteCustomAudienceMetaInfo.react",["AudienceManagerTextInput","InfoTable.react","InfoTableRow.react","InfoTableSection.react","Link.react","React","XUITextInput.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=l.createClass({displayName:"WebsiteCustomAudienceMetaInfo",getInitialState:function(){return {showDescription:this.props.audience.description.length>0};},propTypes:{audience:l.PropTypes.object.isRequired,onUpdateAudienceFields:l.PropTypes.func.isRequired,enableValidation:l.PropTypes.bool.isRequired},render:function(){return (l.createElement(h,null,l.createElement(j,null,l.createElement(i,{label:"Audience Name",type:"data"},l.createElement("div",null,l.createElement(m,{className:(("_4u_")+(this.props.enableValidation&&!this.props.audience.name.length?' '+"_4b5f":'')),placeholder:"Enter a name for your audience",title:"Enter a name to create audience",value:this.props.audience.name,onChange:function(event){this.props.onUpdateAudienceFields(this.props.audience,{name:event.target.value});}.bind(this)}),this._renderDescriptionLink())),this._renderDescription())));},_renderDescriptionLink:function(){if(this.state.showDescription)return;return (l.createElement(k,{onClick:this.setState.bind(this,{showDescription:true},null)},"Add a description"));},_renderDescription:function(){if(!this.state.showDescription)return;return (l.createElement(i,{label:"Description"},l.createElement("div",null,l.createElement(g,{isTextArea:true,className:"_5w16",value:this.props.audience.description,placeholder:"Add an optional description of your audience",onChange:function(q){this.props.onUpdateAudienceFields(this.props.audience,{description:q});}.bind(this)}))));}});e.exports=p;},null);
__d("AdsPixelHostDataSource",["AbstractSearchSource","SearchableEntry"],function(a,b,c,d,e,f,g,h){var i=.05;for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(m,n,o){"use strict";this.hosts=[];this.$AdsPixelHostDataSource0=o;m.fetch.pixelInsights.one(this.$AdsPixelHostDataSource1.bind(this),{pixelId:n,start_time:'-7 days',aggregation:'host'});}l.prototype.$AdsPixelHostDataSource1=function(m){"use strict";if(!m.length)return;var n={},o=0;for(var p=0,q=m.length;p<q;p++){if(!m[p].hasOwnProperty('data'))return;var r=m[p].data;for(var s=0;s<r.length;s++){var t=r[s];o+=t.count;if(n.hasOwnProperty(t.value)){n[t.value]+=t.count;}else n[t.value]=t.count;}}for(var u in n)if(n[u]>o*i)this.hosts.push(u);this.$AdsPixelHostDataSource0();};l.prototype.searchImpl=function(m,n,o){"use strict";var p=[];m=m.toLowerCase();this.hosts.forEach(function(q){q=q.toLowerCase();if(q.contains(m))p.push(new h({uniqueID:q,title:q}));});n(p,m);};l.prototype.getHostNumber=function(){"use strict";return this.hosts.length;};e.exports=l;},null);
__d("AdsSBTypeahead.react",["AbstractTypeahead.react","React","cx","joinClasses","ReactPropTypes"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:"AdsSBTypeahead",propTypes:{excludedEntries:k.object.isRequired,searchSource:k.object.isRequired,validationSource:k.object,onSelectAttempt:k.func,onInputChange:k.func,onMultiAddEntries:k.func,placeholder:k.string},getInitialState:function(){return {queryString:''};},render:function(){var m=this.props,n=m.size,o=(function(r,s){var t={},u=Object.prototype.hasOwnProperty;if(r==null)throw new TypeError();for(var v in r)if(u.call(r,v)&&!u.call(s,v))t[v]=r[v];return t;})(m,{size:1}),p=j((("_1y42")+(n==='large'?' '+"_2liv":'')+(n==='xlarge'?' '+"_2liw":'')),this.props.className),q=this.props.placeholder;return (h.createElement(g,h.__spread({},o,{ref:"typeahead",selectedEntry:null,placeholder:q,className:p,queryString:this.state.queryString,onSelectAttempt:this._onSelectAttempt,onChange:this._onInputChange,autoHighlight:true,onPaste:this._onPaste,hideViewWithEntries:false})));},_onSelectAttempt:function(m){if(m){this.props.onSelectAttempt&&this.props.onSelectAttempt(m);this.clearTypeahead();if(!m.numLeafCategories)setTimeout((function(){this.focusTypeahead();this.props.onClick&&this.props.onClick();}).bind(this));}},_onInputChange:function(event){this.props.onInputChange&&this.props.onInputChange(event);this.setState({queryString:event.target.value});},_onPaste:function(event){if(event&&event.clipboardData&&event.clipboardData.getData){var m=event.clipboardData.getData('text/plain'),n=m.split(',').map(function(p){return p.trim();});if(!m)return;var o=this.props.validationSource;if(o){o.getMetadata(n,this._onValidationCB);this.props.onClick&&this.props.onClick();}}return false;},_onValidationCB:function(m){this.props.onMultiAddEntries&&this.props.onMultiAddEntries(m);},focusTypeahead:function(){this.refs.typeahead.focusInput();},clearTypeahead:function(){this.setState({queryString:''});}});e.exports=l;},null);
__d("AdsSBTokenizerWhiteBoxLayer.react",["AdsSBTokenizerWhiteBox.react","ContextualLayer.react","React","ReactLayeredComponentMixin","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.PropTypes,m=-35,n=i.createClass({displayName:"AdsSBTokenizerWhiteBoxLayer",mixins:[j],propTypes:{info:l.object,openToPath:l.func,type:l.number,shown:l.bool,onMouseEnterBox:l.func,onMouseLeaveBox:l.func,yOffset:l.number,uniqueID:l.string.isRequired,reportedInterests:l.object,addReportedInterest:l.func,deleteReportedInterest:l.func},render:function(){return (i.createElement("div",null,this.props.children));},renderLayers:function(){var o=i.createElement(g,i.__spread({},this.props,{showArrow:true,uniqueID:this.props.uniqueID}),undefined),p=this.props.info,q=this.props.shown&&p&&(p.reach||p.description||p.source);return {layer:i.createElement(h,{context:this,position:"right",shown:q,offsetY:this.props.yOffset?this.props.yOffset:m},i.createElement("div",{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},i.createElement("div",{className:"_2455"},o)))};},_onMouseEnter:function(){this.props.onMouseEnterBox&&this.props.onMouseEnterBox();},_onMouseLeave:function(){this.props.onMouseLeaveBox&&this.props.onMouseLeaveBox();}});e.exports=n;},null);
__d("AdsSearchHostTokenizerListItem.react",["AdsSBTokenizerConstants","AdsSBTokenizerWhiteBoxLayer.react","React","XUICloseButton.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.createClass({displayName:"AdsSearchHostTokenizerListItem",propTypes:{entry:i.PropTypes.object.isRequired,onRemoveEntry:i.PropTypes.func.isRequired,uniqueID:i.PropTypes.string.isRequired},getInitialState:function(){return {highlighted:false};},render:function(){return (i.createElement(h,{info:this.props.entry,type:g.ACTIVE_STATES.BROWSE,shown:this.state.highlighted,onMouseEnterBox:this._onMouseEnterBox,onMouseLeaveBox:this._onMouseLeaveBox,uniqueID:this.props.uniqueID},i.createElement("li",{className:"_5w24 _5ahx",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,key:this.props.entry.getUniqueID()},this.props.entry.getTitle(),i.createElement(j,{size:"small",className:"_5w28 _5ah_",onClick:this.props.onRemoveEntry}))));},_onMouseEnter:function(){this.setState({highlighted:true});},_onMouseLeave:function(){this.setState({highlighted:false});},_onMouseEnterBox:function(){this.setState({highlighted:true});},_onMouseLeaveBox:function(){this.setState({highlighted:false});}});e.exports=l;},null);
__d("AdsSearchHostTokenizerList.react",["AdsSearchHostTokenizerListItem.react","React","cx"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:"AdsSearchHostTokenizerList",propTypes:{entries:h.PropTypes.array.isRequired,onRemoveEntry:h.PropTypes.func.isRequired,uniqueID:h.PropTypes.string.isRequired},render:function(){return (h.createElement("div",{className:"_5w21"},this.props.entries.map(this._toListItem)));},_toListItem:function(k){return (h.createElement(g,{entry:k,onRemoveEntry:function(){return this.props.onRemoveEntry(k);}.bind(this),uniqueID:this.props.uniqueID,key:k.getUniqueID()}));}});e.exports=j;},null);
__d("AdsSBTokenizerPlusIcon.react",["React","Image.react","cx","ix"],function(a,b,c,d,e,f,g,h,i,j){var k=g.PropTypes,l=g.createClass({displayName:"AdsSBTokenizerPlusIcon",propTypes:{hovered:k.bool,hidden:k.bool,onMouseEnter:k.func,onMouseLeave:k.func,onMouseDown:k.func},render:function(){var m;if(this.props.hidden)return g.createElement("div",null);if(this.props.hovered){m=g.createElement(h,{src:j('/images/ads/createflow/targeting/plus-hover.png'),className:"_5m4p",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseDown:this.props.onMouseDown});}else m=g.createElement(h,{src:j('/images/ads/createflow/targeting/plus.png'),className:"_5m4q",onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave});return m;}});e.exports=l;},null);
__d("AdsSB2TypeaheadEntriesView.react",["AdsSBAreaClicked","AdsSBTokenizerConstants","AdsSBTokenizerPlusIcon.react","AdsSBTokenizerWhiteBox.react","ScrollableArea.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=l.PropTypes,o=h.ROW.HEIGHT,p=h.TYPEAHEAD.HEIGHT,q=h.WHITE_BOX.WIDTH,r=l.createClass({displayName:"AdsSB2TypeaheadEntriesView",propTypes:{highlightedEntry:n.object,entries:n.array.isRequired,onSelect:n.func.isRequired,onHighlight:n.func,width:n.number.isRequired,uniqueID:n.string.isRequired,showWhiteBox:n.bool,reportedInterests:n.object,addReportedInterest:n.func,deleteReportedInterest:n.func},getInitialState:function(){return {};},getDefaultProps:function(){return {showWhiteBox:true};},componentDidUpdate:function(){this._setScrollTop();},render:function(){var t=this.props.entries;if(t&&t.length){var u=t.map(this._renderRow,this),v,w=this.props.width;if(this.props.highlightedEntry&&Object.keys(this.props.highlightedEntry).length>0&&this.props.showWhiteBox){v=l.createElement("div",{className:"_hpi"},l.createElement(j,l.__spread({},this.props,{info:this.props.highlightedEntry,type:h.ACTIVE_STATES.SEARCH,uniqueID:this.props.uniqueID})));w=this.props.width+q;}var x=(("_1y42")+(this.props.showWhiteBox?' '+"_2ui8":''));return (l.createElement("div",{className:x,onMouseLeave:this._onMouseLeave,onMouseDown:this._onMouseDown},l.createElement("ul",{className:"_hpl clearfix",style:{width:w}},l.createElement("div",{className:"_hpp _hpj",style:{width:this.props.width}},l.createElement(k,{ref:"scrollArea",width:this.props.width,height:p},l.createElement("div",{className:"_hpt",style:{width:this.props.width-1,minHeight:p}},u)),v))));}return l.createElement("ul",{className:"_hpn"});},_renderRow:function(t,u){return (l.createElement(s,{key:t.getUniqueID(),onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onUnhlight:this.props.onHighlight,index:u,highlighted:t===this.props.highlightedEntry,entry:t}));},_onMouseLeave:function(){this.props.onHighlight&&this.props.onHighlight({});},_onMouseDown:function(){g.setAreaClicked(this.props.uniqueID,true);},_setScrollTop:function(){var t=this.props.highlightedEntry;if(!this.refs||!this.refs.scrollArea||!t||!t.name)return;var u=this.props.entries.indexOf(t)*o,v=this.refs.scrollArea.getArea(),w=v.getScrollTop(),x;if(w+p<u+o){x=o*(parseInt(w/o,10)+2);v.setScrollTop(x);}else if(w>u){x=o*(parseInt(w/o,10)-1);v.setScrollTop(x);}}}),s=l.createClass({displayName:"EntryRowView",propTypes:{entry:n.object.isRequired,onHighlight:n.func},render:function(){var t=(("_hpf")+(this.props.highlighted?' '+"_hpr":'')),u=this.props.entry,v;if(u.numLeafCategories&&u.numLeafCategories>0)v=l.createElement("div",{className:"_hpg"},u.numLeafCategories);return (l.createElement("li",{className:t},l.createElement("div",{className:"_hpw",onMouseDown:this._onMouseDown,onMouseEnter:this._onMouseEnter},l.createElement("div",{className:"_17_t"},l.createElement("div",{className:"_hpq"},l.createElement("div",{className:"_hps"},this._getEntryTitleBolded(u)),v),l.createElement(i,{hovered:this.props.highlighted}))),l.createElement("div",{className:"_hpo"}),l.createElement("div",{className:"_5oe8"})));},_getEntryTitleBolded:function(t){var u=t.getTitle(),v=u.split(' '),w=t.matchArray,x=[];for(var y=0;y<v.length;y++)if(!w||!w[y]){x.push(l.createElement("span",null,v[y]+' '));}else x.push(l.createElement("span",null,v[y].substring(0,w[y].start),l.createElement("span",{className:"_hpm"},v[y].substring(w[y].start,w[y].end)),v[y].substring(w[y].end)+' '));return x;},_onMouseDown:function t(){this.props.onSelect(this.props.entry,t);},_onMouseEnter:function(){this.props.onHighlight&&this.props.onHighlight(this.props.entry);}});e.exports=r;},null);
__d("AdsSearchHostTokenizer.react",["AdsSBTypeahead.react","AdsSearchHostTokenizerList.react","React","SearchableEntry","AdsSB2TypeaheadEntriesView.react","fbt","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=450,o='AdsSearchHostTokenizer',p=i.createClass({displayName:"AdsSearchHostTokenizer",propTypes:{onUpdate:i.PropTypes.func.isRequired,tokens:i.PropTypes.array.isRequired,dataSource:i.PropTypes.object.isRequired},render:function(){return (i.createElement("div",{className:"_4g1r"},this.props.tokens.length?i.createElement(h,{entries:this._getEntries(),onRemoveEntry:this._onRemoveEntry,uniqueID:o}):null,i.createElement(g,{className:"_1qju",showEntriesOnFocus:true,excludedEntries:this._getExcludedEntries(),onSelectAttempt:this._onAddEntry,searchSource:this.props.dataSource,presenter:this._getPresenter(),placeholder:"Choose a website domain",ref:"typeahead"}),this._getBrowseButton()));},_getBrowseButton:function(){return (i.createElement("div",{onMouseDown:this._onBrowse,key:"browse",className:"_49v2 _4-97 _xkk"},"Browse",i.createElement("div",{className:"_ekn _xkl"})));},_onBrowse:function(){setTimeout((function(){this.refs.typeahead.clearTypeahead();this.refs.typeahead.focusTypeahead();}).bind(this),100);},_getEntries:function(){var q=[];this.props.tokens.forEach(function(r){if(r)q.push(new j({uniqueID:r,title:r}));});return q;},_getExcludedEntries:function(){var q={};this.props.tokens.forEach(function(r){return q[r]=true;});return q;},_onRemoveEntry:function(q){var r=this._getEntries().slice(),s=this.props.tokens.indexOf(q.getTitle());if(s!==false){r.splice(s,1);this.props.onUpdate(r);}},_onAddEntry:function(q){this.props.onUpdate(this._getEntries().concat([q]));},_getPresenter:function(){var q={ViewRenderer:k,useLayer:true};q.extraRendererProps={width:n,uniqueID:o,showWhiteBox:false};return q;}});e.exports=p;},null);
__d("WebsiteCustomAudienceRuleBuilderChooseDomain.react",["AdInterfacesUiLogger","AdsPixelHostDataSource","AdsSearchHostTokenizer.react","InfoTable.react","InfoTableRow.react","InfoTableSection.react","AudienceManagerLoggingEvents","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=n.createClass({displayName:"WebsiteCustomAudienceRuleBuilderChooseDomain",propTypes:{dao:n.PropTypes.object.isRequired,pixel:n.PropTypes.object.isRequired,rule:n.PropTypes.object.isRequired,onUpdateClauseFields:n.PropTypes.func.isRequired},getInitialState:function(){return {showComponent:false};},componentWillMount:function(){this._dataSource=new h(this.props.dao,this.props.pixel.id,this._onSourceChange);},render:function(){if(!this.state.showComponent)return n.createElement("script",null);return (n.createElement(j,{className:"_3af5"},n.createElement(l,null,n.createElement(k,null,n.createElement("span",null,n.createElement("div",{className:"_19g1"},"Include people who visit any page on the following domains (optional)."),n.createElement(i,{onUpdate:this._onUpdate,tokens:this.props.rule.clauses[0].tokens,dataSource:this._dataSource}))))));},_onSourceChange:function(){if(this._dataSource.getHostNumber()>1){this.setState({showComponent:true});g.log(m.AM_WCA_EDITOR_DOMAIN_SELECTOR_SHOWN);}},_onUpdate:function(r){var s=r.map(function(t){return t.getTitle();});this.props.onUpdateClauseFields(this.props.rule.clauses[0],{tokens:s});}});e.exports=q;},null);
__d("WebsiteCustomAudienceRuleBuilderChurners.react",["InfoTable.react","InfoTableRow.react","InfoTableSection.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=j.createClass({displayName:"WebsiteCustomAudienceRuleBuilderChurners",render:function(){return (j.createElement(g,{className:"_3af5"},j.createElement(i,null,j.createElement(h,null,j.createElement("div",{className:"_19g1"},"Include people who have visited your website in the last 180 days but haven't been back")))));}});e.exports=m;},null);
__d("AdsPixelEventDataSource",["AdsDaoGraph"],function(a,b,c,d,e,f,g){var h=['PixelInitialized','NoScript','__missing_event'],i=['null'];function j(k){"use strict";this.pixelID=k;}j.prototype.fetchEvents=function(k){"use strict";if(!this.pixelID)this.events={};if(this.events){k(this.events);return;}g.fetch.pixelInsights.one(function(l){return this.$AdsPixelEventDataSource0(l,k);}.bind(this),{pixelId:this.pixelID,start_time:'-7 days',aggregation:'event'});};j.prototype.fetchCustomFields=function(k,l){"use strict";if(this.events[k].fields){l(this.events);return;}g.fetch.pixelInsights.one(function(m){return this.$AdsPixelEventDataSource1(m,k,l);}.bind(this),{pixelId:this.pixelID,start_time:'-7 days',aggregation:'custom_data_field',event:k});};j.prototype.$AdsPixelEventDataSource0=function(k,l){"use strict";if(!k.length)return;k=this.$AdsPixelEventDataSource2(k);this.events=this.$AdsPixelEventDataSource3(k);l(this.events);};j.prototype.$AdsPixelEventDataSource1=function(k,l,m){"use strict";if(!k.length)return;k=this.$AdsPixelEventDataSource2(k);this.events[l].fields=this.$AdsPixelEventDataSource4(k);m(this.events);};j.prototype.$AdsPixelEventDataSource2=function(k){"use strict";var l={};for(var m=0;m<k.length;m++){var n=k[m].data;if(!n)continue;for(var o=0;o<n.length;o++){var p=n[o];if(l.hasOwnProperty(p.value)){l[p.value].count+=p.count;}else l[p.value]={count:p.count};}}return l;};j.prototype.$AdsPixelEventDataSource3=function(k){"use strict";var l=k;h.forEach(function(m){return delete l[m];});return l;};j.prototype.$AdsPixelEventDataSource4=function(k){"use strict";var l=k;i.forEach(function(m){return delete l[m];});return l;};e.exports=j;},null);
__d("AdsPixelCommonSearchSource",["AbstractSearchSource","SearchableEntry"],function(a,b,c,d,e,f,g,h){'use strict';for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(){if(g!==null)g.apply(this,arguments);}k.prototype.searchImpl=function(l,m,n){var o=[],p=l.toLowerCase();Object.keys(this.items).forEach(function(q){if(this.items.hasOwnProperty(q))if(q.toLowerCase().indexOf(p)!==-1){var r=new h({uniqueID:q,title:q});o.push(r);}}.bind(this));m(o,l);};k.prototype.setItems=function(l){this.items=l;};e.exports=k;},null);
__d("AdsPixelCommonTypeahead.react",["AdsPixelCommonSearchSource","React","XUITypeahead.react"],function(a,b,c,d,e,f,g,h,i){var j=h.createClass({displayName:"AdsPixelCommonTypeahead",propTypes:{items:h.PropTypes.object.isRequired,onSelected:h.PropTypes.func.isRequired,placeholder:h.PropTypes.string.isRequired},getInitialState:function(){return {query:''};},render:function(){var k=new g();k.setItems(this.props.items);return (h.createElement(i,{placeholder:this.props.placeholder,tallInput:true,viewStyle:"textonly",queryString:this.state.query,searchSource:k,showEntriesOnFocus:true,onSelectAttempt:function(l){return this.props.onSelected(l.getTitle());}.bind(this),onChange:function(event){return this.setState({query:event.target.value});}.bind(this)}));}});e.exports=j;},null);
__d("AdsPixelEventSelector.react",["AdsPixelCommonTypeahead.react","React","XUICloseButton.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:"AdsPixelEventSelector",propTypes:{rule:h.PropTypes.object.isRequired,onUpdateRuleEvent:h.PropTypes.func.isRequired,events:h.PropTypes.object.isRequired,onEventSelected:h.PropTypes.func.isRequired,showPotentialWarnings:h.PropTypes.bool},render:function(){if(!this.props.rule.event)return (h.createElement("div",{className:(("_5ssa")+(this.props.showPotentialWarnings?' '+"_3gqy":''))},h.createElement(g,{items:this.props.events,onSelected:this._onEventSelected,placeholder:"Choose an event"})));return (h.createElement("div",{className:"_5ssc _5ssa"},this.props.rule.event,h.createElement(i,{size:"small",className:"_3-90 _5ssb",onClick:this._onDelete,key:"close_button"})));},_onEventSelected:function(m){this.props.onUpdateRuleEvent(m);this.props.onEventSelected(m);},_onDelete:function(){this.props.onUpdateRuleEvent(null);}});e.exports=l;},null);
__d("AdsPixelRuleClauseTokenInput.react",["Grid.react","React","Token.react","XUITextInput.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=g.GridItem,n=h.createClass({displayName:"AdsPixelRuleClauseTokenInput",propTypes:{onUpdateTokens:h.PropTypes.func.isRequired,clause:h.PropTypes.object.isRequired,placeholder:h.PropTypes.string.isRequired},getInitialState:function(){return {textInProgress:''};},render:function(){return (h.createElement(m,{onClick:function(){return this.refs.tokeninput.getDOMNode().focus();}.bind(this),key:"token_input",className:"_2ck7"},this._getTokensDisplay(),this._getTokenInput()));},_getTokensDisplay:function(){if(!this.props.clause.tokens.length)return [];var o=[this._renderToken(this.props.clause.tokens[0],0)];for(var p=1;p<this.props.clause.tokens.length;p++){o.push(h.createElement("span",{className:"_2ck8",key:"or_token_"+p},"or"));o.push(this._renderToken(this.props.clause.tokens[p],p));}return o;},_getTokenInput:function(){return (h.createElement(j,{ref:"tokeninput",className:"_2ck9",value:this.state.textInProgress,onChange:this._onTextChange,onBlur:this._tokenizeCurrentText,onBackspace:this._onBackSpace,onEnter:this._tokenizeCurrentText,placeholder:this.props.placeholder,key:"token_input"}));},_renderToken:function(o,p){return (h.createElement(i,{className:"_2cka",label:o,removable:true,onRemove:this._onRemoveToken.bind(this,p),key:"clause_token_"+p+"_"+o}));},_onTextChange:function(event){var o=event.target.value,p=o.slice(-1);if(p===','||p===' '){this._onAddNewToken(o.slice(0,o.length-1));o='';}this.setState({textInProgress:o});},_onAddNewToken:function(o){var p=this.props.clause.tokens;p.push(o);this.props.onUpdateTokens(p);},_onRemoveToken:function(o){var p=this.props.clause.tokens;p.splice(o,1);this.props.onUpdateTokens(p);},_tokenizeCurrentText:function(event){var o=event.target.value;if(o.length>0){this._onAddNewToken(o);o='';}this.setState({textInProgress:o});},_onBackSpace:function(event){var o=event.target.value;if(o.length===0&&this.props.clause.tokens.length>0)this._onRemoveToken(this.props.clause.tokens.length-1);}});e.exports=n;},null);
__d("AdsPixelRuleClause.react",["Grid.react","React","AdsPixelCommonTypeahead.react","AdsPixelRuleClauseTokenInput.react","XUISelector.react","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=k.Option,p=g.GridItem,q=h.createClass({displayName:"AdsPixelRuleClause",propTypes:{clause:h.PropTypes.object.isRequired,customFields:h.PropTypes.object,isSimpleClause:h.PropTypes.bool.isRequired,operators:h.PropTypes.object.isRequired,onUpdateClause:h.PropTypes.func.isRequired,showPotentialWarnings:h.PropTypes.bool,className:h.PropTypes.string},getInitialState:function(){return {textInProgress:''};},render:function(){if(this.props.isSimpleClause)return (h.createElement(g,{className:this._getRootClassName(),cols:2},this._getOperator(),this._getTokenInput()));if(this.props.clause.customfield)return (h.createElement(g,{className:this._getRootClassName(),cols:3},this._getCustomFieldsSelector(),this._getOperator(),this._getTokenInput()));return (h.createElement("div",{className:"_j_3"},h.createElement(i,{items:this._getCustomFields(),onSelected:this._onUpdateCustomField,placeholder:"Add a parameter (Optional)"})));},_getTokenInput:function(){return h.createElement(j,{onUpdateTokens:this._onUpdateTokens,clause:this.props.clause,placeholder:this._getTokenInputPlaceholder()});},_getCustomFields:function(){var r=this.props.customFields;if(this.props.clause.customfield&&!r.hasOwnProperty(this.props.clause.customfield))r[this.props.clause.customfield]=true;return r;},_getRootClassName:function(){return n(this.props.className,(("_j_4")+(this.props.showPotentialWarnings&&!this.props.clause.tokens.length?' '+"_j_5":'')));},_getCustomFieldsSelector:function(){var r=[];for(var s in this._getCustomFields())r.push(h.createElement(o,{value:s,key:"field_option_"+s},s));return (h.createElement(p,{key:"custom_field",className:"_j_6"},h.createElement(k,{className:"_j_7",size:"large",onChange:function(event){return this._onUpdateCustomField(event.value);}.bind(this),value:this.props.clause.customfield},r)));},_getOperator:function(){var r=[];for(var s in this.props.operators)r.push(h.createElement(o,{value:this.props.operators[s].value,key:"operation_option_"+this.props.operators[s].value},this.props.operators[s].label));return (h.createElement(p,{className:"_j_6",key:"operator"},h.createElement(k,{className:"_j_7",size:"large",onChange:this._onUpdateOperator,value:this.props.clause.filter},r)));},_getTokenInputPlaceholder:function(){return this.props.isSimpleClause?"Add URL keywords":"Add a value";},_onUpdateTokens:function(r){this._onUpdateClauseFields({tokens:r});},_onUpdateOperator:function(event){this._onUpdateClauseFields({filter:event.value});},_onUpdateCustomField:function(r){this._onUpdateClauseFields({customfield:r});},_onUpdateClauseFields:function(r){var s=this.props.clause;for(var t in r)s[t]=r[t];this.props.onUpdateClause(s);}});e.exports=q;},null);
__d("AdsPixelRuleDialogMode",[],function(a,b,c,d,e,f){var g={CREATE:'create',EDIT:'edit'};e.exports=g;},null);
__d("AdsPixelRuleClauseGroup.react",["React","AdsPixelEventSelector.react","AdsPixelRuleClause.react","WebsiteCustomAudienceModel","WebsiteCustomAudienceOperators","XUIButton.react","XUICloseButton.react","AdsPixelRuleDialogMode","cx","fbt","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=j.Operations,s=j.RuleClause,t=g.createClass({displayName:"AdsPixelRuleClauseGroup",propTypes:{rule:g.PropTypes.object.isRequired,onUpdateRule:g.PropTypes.func.isRequired,showPotentialWarnings:g.PropTypes.bool,onDeleteRule:g.PropTypes.func,onEventSelected:g.PropTypes.func.isRequired,events:g.PropTypes.object.isRequired,mode:g.PropTypes.string.isRequired},render:function(){var u=[],v=r.isEventBasedRule(this.props.rule);if(v){u.push(g.createElement(h,{rule:this.props.rule,onUpdateRuleEvent:this._onUpdateRuleEvent,events:this.props.events,onEventSelected:this.props.onEventSelected,showPotentialWarnings:this.props.showPotentialWarnings,key:"event_selector"}));if(!this.props.rule.event)return g.createElement("div",null,u);}var w=this.props.rule.clauses.length,x=v?k.GenericOperators:k.SimpleOperators,y=this.props.events[this.props.rule.event]&&this.props.events[this.props.rule.event].fields||{};if(v&&q(y)&&this.props.mode===n.CREATE)return g.createElement("div",null,u);for(var z=0;z<w;z++)u.push(g.createElement("div",{key:"rule_clause_row_"+z,className:(("_54aj")+(v||z>0?' '+"_54al":'')+(v&&z===0?' '+"_54am":''))},g.createElement(i,{clause:this.props.rule.clauses[z],customFields:y,operators:x,isSimpleClause:!v,showPotentialWarnings:this.props.showPotentialWarnings,onUpdateClause:this._onUpdateClause.bind(this,z),key:"rule_clause_"+z}),g.createElement("div",{className:"_54an"},this._getAndToken(z,w),this._getDeleteButton(z,w))));return g.createElement("div",null,u);},_getAndToken:function(u,v){if(u!==v-1)return (g.createElement("span",{className:"_2arl",key:"and_token_"+u},"and"));return (g.createElement(l,{label:"and",size:"large",className:"_2arm",onClick:this._onAddEmptyClause,key:"and_token_"+u}));},_getDeleteButton:function(u,v){if(v===1&&!this.props.onDeleteRule)return null;return (g.createElement(m,{size:"small",className:"_3-90",onClick:this._onDeleteClause.bind(this,u,v),key:"delete_button_"+u}));},_onUpdateRuleEvent:function(event){if(event!==this.props.rule.event)this._onUpdateRuleFields({event:event,clauses:[new s()]});},_onUpdateClause:function(u,v){var w=this.props.rule.clauses;w[u]=v;this._onUpdateRuleFields({clauses:w});},_onAddEmptyClause:function(){var u=this.props.rule.clauses;u.push(new s());this._onUpdateRuleFields({clauses:u});},_onDeleteClause:function(u,v){if(v===1){this.props.onDeleteRule();}else{var w=this.props.rule.clauses;w.splice(u,1);this._onUpdateRuleFields({clauses:w});}},_onUpdateRuleFields:function(u){var v=this.props.rule;for(var w in u)v[w]=u[w];this.props.onUpdateRule(v);}});e.exports=t;},null);
__d("AdsPixelRuleBuilder.react",["AdsPixelRuleClauseGroup.react","React","WebsiteCustomAudienceModel","XUISelector.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=i.Operations,n=i.RuleClause,o=j.Option,p=h.createClass({displayName:"AdsPixelRuleBuilder",propTypes:{rule:h.PropTypes.object.isRequired,onDeleteRule:h.PropTypes.func,onUpdateRule:h.PropTypes.func.isRequired,eventSource:h.PropTypes.object.isRequired,showPotentialWarnings:h.PropTypes.bool,mode:h.PropTypes.string.isRequired},componentWillMount:function(){this.props.eventSource.fetchEvents(this._onEventsFetched);},getInitialState:function(){return {events:{}};},render:function(){return (h.createElement("span",null,this._getRuleScopeSelector(),h.createElement(g,{rule:this.props.rule,onDeleteRule:this.props.onDeleteRule,onUpdateRule:this.props.onUpdateRule,showPotentialWarnings:this.props.showPotentialWarnings,events:this.state.events,onEventSelected:this._updateCustomField,mode:this.props.mode})));},_getRuleScopeSelector:function(){var q=[h.createElement(o,{value:"url",key:"scope_option_url"},"URL")];if(this._showEventOption())q.push(h.createElement(o,{value:"event",key:"scope_option_event"},"Event"));return (h.createElement(j,{value:this.props.rule.scope,onChange:this._onSelectorChange,className:"_4hia"},q));},_onSelectorChange:function(q){this._onUpdateRuleFields({scope:q.value,event:null,clauses:[new n()]});},_onUpdateRuleFields:function(q){var r=this.props.rule;for(var s in q)r[s]=q[s];this.props.onUpdateRule(r);},_showEventOption:function(){return Object.keys(this.state.events).length>0||m.isEventBasedRule(this.props.rule);},_updateCustomField:function(q){this.props.eventSource.fetchCustomFields(q,this._updateEvents);},_updateEvents:function(q){this.setState({events:q});},_onEventsFetched:function(q){this._updateEvents(q);if(this.props.rule.event)this._updateCustomField(this.props.rule.event);}});e.exports=p;},null);
__d("AdsPixelRuleSet.react",["AdsPixelRuleBuilder.react","React","WebsiteCustomAudienceModel","XUIButton.react","AdsPixelRuleDialogMode","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=i.Rule,o=h.createClass({displayName:"AdsPixelRuleSet",propTypes:{rules:h.PropTypes.array.isRequired,onDeleteRuleSet:h.PropTypes.func,onUpdateRuleSet:h.PropTypes.func.isRequired,eventSource:h.PropTypes.object.isRequired,mode:h.PropTypes.string.isRequired,showPotentialWarnings:h.PropTypes.bool},render:function(){var p=[],q=this.props.rules.length;for(var r=0;r<q;r++){p.push(r>0?this._getOrSeparator(r):null);p.push(h.createElement(g,{rule:this.props.rules[r],onUpdateRule:this._onUpdateRule.bind(this,r),eventSource:this.props.eventSource,onDeleteRule:this.props.mode===k.EDIT?null:q>1?this._onDeleteRule.bind(this,r):this.props.onDeleteRuleSet?this._onDeleteRuleSet:null,showPotentialWarnings:this.props.showPotentialWarnings,mode:this.props.mode,key:"rule_builder_"+r}));}if(this.props.mode===k.CREATE)p.push(h.createElement("div",{className:"_npx",key:"add_new_condition_button"},h.createElement(j,{label:"Add New Condition",size:"large",onClick:this._onAddRule})));return h.createElement("span",null,p);},_getOrSeparator:function(p){return (h.createElement("div",{className:"_npy",key:"rule_or_separator"+p},"Or, traffic that meets the following conditions:"));},_onUpdateRule:function(p,q){var r=this.props.rules;r[p]=q;this.props.onUpdateRuleSet(r);},_onDeleteRule:function(p){var q=this.props.rules;q.splice(p,1);this.props.onUpdateRuleSet(q);},_onDeleteRuleSet:function(){this.props.onUpdateRuleSet([new n()]);this.props.onDeleteRuleSet();},_onAddRule:function(){var p=this.props.rules;p.push(new n());this.props.onUpdateRuleSet(p);}});e.exports=o;},null);
__d("WebsiteCustomAudienceRuleBuilderCustom.react",["AdsHelpLink.react","AdsPixelEventDataSource","AdsPixelRuleSet.react","AudienceManagerUIConstants","InfoTable.react","InfoTableRow.react","InfoTableSection.react","Link.react","React","WebsiteCustomAudienceModel","AdsPixelRuleDialogMode","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=p.Operations,u=o.createClass({displayName:"WebsiteCustomAudienceRuleBuilderCustom",propTypes:{audience:o.PropTypes.object.isRequired,onUpdateAudienceFields:o.PropTypes.func.isRequired,pixel:o.PropTypes.object,showPotentialWarnings:o.PropTypes.bool.isRequired},getInitialState:function(){var v=this.props.audience.exclusion_rules.filter(t.validateRule),w=new h(this.props.pixel&&this.props.pixel.id);return {showExclusions:v.length>0,eventDataSource:w};},componentWillReceiveProps:function(v){if(!this.props.pixel||this.props.pixel.id!==v.pixel.id){var w=new h(v.pixel.id);this.setState({eventDataSource:w});}},render:function(){return (o.createElement(k,{className:"_38ck"},o.createElement(m,null,this._getInclusionRow(),this._getExclusionRow())));},_getInclusionRow:function(){return (o.createElement(l,{label:"Include",helpLink:o.createElement(g,{position:"above",width:j.HELP_LINK_WIDTH},"These people would be included in your targeting"),type:"data"},o.createElement("span",null,this._getRuleSetDesc(),o.createElement(i,{rules:this.props.audience.inclusion_rules,onUpdateRuleSet:this._onUpdateInclusionRules,eventSource:this.state.eventDataSource,showPotentialWarnings:this.props.showPotentialWarnings,mode:this._isEdit()?q.EDIT:q.CREATE}),this._getAddExclusionLink())));},_getExclusionRow:function(){if(!this.state.showExclusions)return null;return (o.createElement(l,{label:"Exclude",helpLink:o.createElement(g,{position:"above",width:j.HELP_LINK_WIDTH},"These people would be excluded in your targeting"),type:"data"},o.createElement("span",null,this._getRuleSetDesc(),o.createElement(i,{rules:this.props.audience.exclusion_rules,onUpdateRuleSet:this._onUpdateExclusionRules,onDeleteRuleSet:function(){return this.setState({showExclusions:false});}.bind(this),eventSource:this.state.eventDataSource,showPotentialWarnings:this.props.showPotentialWarnings,mode:this._isEdit()?q.EDIT:q.CREATE}))));},_getAddExclusionLink:function(){if(this.state.showExclusions||this._isEdit())return null;return (o.createElement("div",{className:"_38cl"},o.createElement(n,{onClick:this._onAddExclusion},"Add exclusions")));},_getRuleSetDesc:function(){return (o.createElement("div",{className:"_38cm"},"Traffic that meets the following conditions:"));},_isEdit:function(){return !!this.props.audience.id;},_onAddExclusion:function(){this.setState({showExclusions:true});},_onUpdateInclusionRules:function(v){this.props.onUpdateAudienceFields(this.props.audience,{inclusion_rules:v});},_onUpdateExclusionRules:function(v){this.props.onUpdateAudienceFields(this.props.audience,{exclusion_rules:v});}});e.exports=u;},null);
__d("WebsiteCustomAudienceRuleBuilderIncludeExclude.react",["AdsPixelRuleClause.react","WebsiteCustomAudienceOperators","InfoTable.react","InfoTableRow.react","InfoTableSection.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=l.createClass({displayName:"WebsiteCustomAudienceRuleBuilderIncludeExclude",propTypes:{inclusionClause:l.PropTypes.object.isRequired,exclusionClause:l.PropTypes.object.isRequired,onUpdateInclusionClause:l.PropTypes.func.isRequired,onUpdateExclusionClause:l.PropTypes.func.isRequired,showPotentialWarnings:l.PropTypes.bool.isRequired},render:function(){return (l.createElement(i,{className:"_4xt2"},l.createElement(k,null,l.createElement(j,null,l.createElement("div",null,l.createElement("div",{className:"_4xt3"},"Include people who visit any web page that meets the following rules."),l.createElement(g,{className:"_4xt4",isSimpleClause:true,operators:h.URLOperators,clause:this.props.inclusionClause,onUpdateClause:this.props.onUpdateInclusionClause,showPotentialWarnings:this.props.showPotentialWarnings}),l.createElement("div",{className:"_4xt3"},"Exclude people who visit any web page that meets the following rules."),l.createElement(g,{className:"_4xt4",isSimpleClause:true,operators:h.URLOperators,clause:this.props.exclusionClause,onUpdateClause:this.props.onUpdateExclusionClause,showPotentialWarnings:this.props.showPotentialWarnings}))))));}});e.exports=o;},null);
__d("WebsiteCustomAudienceRuleBuilderSpecificPages.react",["AdsPixelRuleClause.react","WebsiteCustomAudienceOperators","InfoTable.react","InfoTableRow.react","InfoTableSection.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=l.createClass({displayName:"WebsiteCustomAudienceRuleBuilderSpecificPages",propTypes:{clause:l.PropTypes.object.isRequired,onUpdateClause:l.PropTypes.func.isRequired,showPotentialWarnings:l.PropTypes.bool.isRequired},render:function(){return (l.createElement(i,{className:"_23h"},l.createElement(k,null,l.createElement(j,null,l.createElement("div",null,l.createElement("div",{className:"_28x"},"Include people who visit any web page that meets the following rules."),l.createElement(g,{className:"_28y",isSimpleClause:true,operators:h.URLOperators,clause:this.props.clause,onUpdateClause:this.props.onUpdateClause,showPotentialWarnings:this.props.showPotentialWarnings}))))));}});e.exports=o;},null);
__d("WebsiteCustomAudienceUneditableRule.react",["AudienceManagerURLConstants","InfoTable.react","InfoTableRow.react","InfoTableSection.react","React","WebRemarketingDialogGear.react","WebsiteCustomAudienceModel","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUINotice.react","XUISpinner.react","XUIText.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=m.Operations,x=k.createClass({displayName:"WebsiteCustomAudienceUneditableRule",propTypes:{audience:k.PropTypes.object.isRequired,audienceMetaInfo:k.PropTypes.object.isRequired,errorMessage:k.PropTypes.string.isRequired,onAudienceRuleUpdated:k.PropTypes.func.isRequired,onSetNotice:k.PropTypes.func.isRequired,onViewPixelCode:k.PropTypes.func.isRequired,waitingForServerReponse:k.PropTypes.bool.isRequired},getInitialState:function(){return {migratedRule:w.migrateRule(JSON.parse(this.props.audience.rule))};},render:function(){var y=this.state.migratedRule?k.createElement(r,{use:"warn",className:"_2pi4"},k.createElement(t,{size:"small",weight:"bold"},"Can't Edit Audience"),k.createElement("br",null),k.createElement(t,{size:"small"},"This audience was created using settings that have been changed. You can still use this audience for your ads. To make changes to this audience, update to the new settings.")):k.createElement(r,{use:"warn",className:"_2pi4"},k.createElement(t,{size:"small",weight:"bold"},"Can't Edit Audience"),k.createElement("br",null),k.createElement(t,{size:"small"},"This audience can't be edited because it was created using settings that are no longer available. You can still use this audience for your ads. To make changes or updates, create a new audience."));return (k.createElement("div",null,k.createElement(n,null,k.createElement("div",{className:"_qtd"},k.createElement("div",{className:"_5rkp _5rkq"},this.props.audienceMetaInfo,k.createElement("div",null,k.createElement(h,{className:"_3af5"},k.createElement(j,null,k.createElement(i,{label:"Rule"},this.props.audience.rule),k.createElement(i,{label:"Retention"},this.props.audience.retention_days))),y)),!!this.props.errorMessage?k.createElement(r,{className:"_4o1o",use:"warn"},k.createElement("div",{className:"_5wbz"},this.props.errorMessage)):k.createElement("span",null))),k.createElement(q,{leftContent:k.createElement(l,{learnMoreURL:g.WCA_CONFIGURE_RULES_DOC,onViewPixelCode:this.props.onViewPixelCode})},this.props.waitingForServerReponse?k.createElement(s,{className:"_5swe",size:"small",background:"light"}):k.createElement("span",null),k.createElement(p,{disabled:this.props.waitingForServerReponse}),this._renderMigrateButton())));},_renderMigrateButton:function(){var y=k.createElement("span",null);if(!this.state.migratedRule)return y;y="Update Audience";return k.createElement(o,{use:"confirm",onClick:this._migrateRule,label:y});},_migrateRule:function(){var y=k.createElement(r,{className:"_2pi4"},k.createElement(t,{size:"small",weight:"bold"},"Audience Updated"),k.createElement("br",null),k.createElement(t,{size:"small"},"Your audience has been automatically updated to the new settings. You can undo these changes or save them and continue."));this.props.onSetNotice(y);this.props.onAudienceRuleUpdated(this.state.migratedRule);}});e.exports=x;},null);
__d("WebsiteCustomAudienceRuleBuilderDialog.react",["AdsAMViewActions","AdInterfacesUiLogger","AudienceManagerURLConstants","AudienceManagerLoggingEvents","React","WebsiteCustomAudienceModel","WebsiteCustomAudienceRetention.react","WebsiteCustomAudienceTrafficSelector.react","WebRemarketingDialogGear.react","WebsiteCustomAudienceMetaInfo.react","WebsiteCustomAudienceRuleBuilderChooseDomain.react","WebsiteCustomAudienceRuleBuilderChurners.react","WebsiteCustomAudienceRuleBuilderCustom.react","WebsiteCustomAudienceRuleBuilderIncludeExclude.react","WebsiteCustomAudienceRuleBuilderSpecificPages.react","WebsiteCustomAudienceUneditableRule.react","WebsiteCustomAudienceTrafficType","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUINotice.react","XUISpinner.react","areEqual","copyProperties","cx","dotAccess","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){var ja=l.Operations,ka=l.Rule,la=180,ma=k.createClass({displayName:"WebsiteCustomAudienceRuleBuilderDialog",propTypes:{accountID:k.PropTypes.string.isRequired,audience:k.PropTypes.object,dao:k.PropTypes.object.isRequired,onAudienceAdded:k.PropTypes.func,onAudienceUpdated:k.PropTypes.func,embedded:k.PropTypes.bool,onValidationFail:k.PropTypes.func,onViewPixelCode:k.PropTypes.func,pixel:k.PropTypes.object},componentWillReceiveProps:function(na){if(this.props.audience&&this.props.audience!=na.audience){var oa=this._setupAudience(na.audience);this.setState({audience:oa,waitingForServerReponse:false});}},getInitialState:function(){var na=null;if(this.props.audience){na=this._setupAudience(this.props.audience);}else na=new l.Audience();return {prefill:true,audience:na,domainRules:this._setupDomainRules(this.props.audience),errorMessage:'',waitingForServerReponse:false,enableValidation:false,audienceNotice:k.createElement("span",null)};},render:function(){return (k.createElement("div",null,this._renderTitle(),this._renderDialogBody()));},_renderDialogBody:function(){var na=k.createElement(p,{audience:this.state.audience,onUpdateAudienceFields:this._updateAudienceFields,enableValidation:this.state.enableValidation});if(this.state.audience.isRuleEditable){return (k.createElement("div",null,k.createElement(x,null,k.createElement("div",{className:"_qtd"},k.createElement("div",{className:"_5rkp _5rkq"},this._renderRuleSpecificControls(),k.createElement("div",{className:"_1x0g"}),na,this.state.audienceNotice),!!this.state.errorMessage?k.createElement(ca,{className:"_4o1o",use:"warn"},k.createElement("div",{className:"_5wbz"},this.state.errorMessage)):k.createElement("span",null))),this._renderFooter()));}else return k.createElement(v,{audience:this.props.audience,audienceMetaInfo:na,errorMessage:this.state.errorMessage,onAudienceRuleUpdated:this._onAudienceRuleUpdated,onSetNotice:this._onSetNotice,onViewPixelCode:this.props.onViewPixelCode,waitingForServerReponse:this.state.waitingForServerReponse});},_renderRuleSpecificControls:function(){return (k.createElement("div",null,k.createElement(n,{trafficType:this.state.audience.trafficType,onChangeTrafficType:this.props.audience?null:function(na){this._updateAudienceFields(this.state.audience,{trafficType:na.value});}.bind(this)}),this._renderRuleTemplate(),k.createElement(m,{duration:this.state.audience.duration,prefill:this.state.prefill,onChangeDuration:function(na){this._updateAudienceFields(this.state.audience,{duration:na});}.bind(this),onChangePrefill:(this.props.pixel&&this.props.pixel.last_fired_time==(void 0))||this.props.audience?null:function(na){return this.setState({prefill:na});}.bind(this)})));},_renderTitle:function(){if(this.props.embedded)return;var na="Create Audience";if(this.props.audience)na=ia._("Edit {Audience Name}",[ia.param("Audience Name",this.props.audience.name)]);return (k.createElement(ba,null,na));},_renderFooter:function(){if(this.props.embedded)return;return (k.createElement(aa,{leftContent:k.createElement(o,{learnMoreURL:i.WCA_CONFIGURE_RULES_DOC,onViewPixelCode:this.props.onViewPixelCode})},this.state.waitingForServerReponse?k.createElement(da,{className:"_5swe",size:"small",background:"light"}):k.createElement("span",null),k.createElement(z,{disabled:this.state.waitingForServerReponse}),this._renderActionButton()));},_renderRuleTemplate:function(){switch(this.state.audience.trafficType){case w.ALL_WEBSITE_VISITORS:return k.createElement(q,{dao:this.props.dao,pixel:this.props.pixel,rule:this.state.domainRules[0],onUpdateClauseFields:this._updateDomain});case w.SPECIFIC_PAGE_VISITORS:return k.createElement(u,{clause:this.state.audience.inclusion_rules[0].clauses[0],onUpdateClause:this._updateFirstInclusionClause,showPotentialWarnings:this.state.enableValidation});case w.SPECIFIC_PAGE_VISITORS_WITH_EXCLUSION:return k.createElement(t,{inclusionClause:this.state.audience.inclusion_rules[0].clauses[0],exclusionClause:this.state.audience.exclusion_rules[0].clauses[0],onUpdateInclusionClause:this._updateFirstInclusionClause,onUpdateExclusionClause:this._updateFirstExclusionClause,showPotentialWarnings:this.state.enableValidation});case w.CHURNED_VISITORS:return k.createElement(r,null);case w.CUSTOM:return k.createElement(s,{audience:this.state.audience,pixel:this.props.pixel,onUpdateAudienceFields:this._updateAudienceFields,showPotentialWarnings:this.state.enableValidation});}},_renderActionButton:function(){if(this.props.audience){return k.createElement(y,{use:"confirm",onClick:this._updateAudience,label:"Update Audience"});}else return k.createElement(y,{disabled:this.state.waitingForServerReponse||!this.state.audience.name.length,use:"confirm",onClick:this._createAudience,label:"Create Audience"});},_serializeSubAudience:function(na,oa){if(!oa)oa=this.state.audience.duration;var pa=ja.serializeRule(na);if(pa)return {id:na.id,type:'website',retention_days:oa,rule:pa};},_serializeSubAudiences:function(){var na=[],oa=[];switch(this.state.audience.trafficType){case w.ALL_WEBSITE_VISITORS:h.log(j.AM_WCA_EDITOR_AUDIENCE_TYPE_ALL_WEBSITE_VISITORS);if(ja.validateRule(this.state.domainRules[0])){na.push(this._serializeSubAudience(this.state.domainRules[0]));h.log(j.AM_WCA_EDITOR_AUDIENCE_TYPE_ALL_WEBSITE_VISITORS_WITH_DOMAIN);}else na.push(this._serializeSubAudience(l.RuleTemplates.getAllVisitors()));break;case w.SPECIFIC_PAGE_VISITORS:h.log(j.AM_WCA_EDITOR_AUDIENCE_TYPE_SPECIFIC_PAGES);na.push(this._serializeSubAudience(this.state.audience.inclusion_rules[0]));break;case w.SPECIFIC_PAGE_VISITORS_WITH_EXCLUSION:h.log(j.AM_WCA_EDITOR_AUDIENCE_TYPE_INC_EXC);na.push(this._serializeSubAudience(this.state.audience.inclusion_rules[0]));oa.push(this._serializeSubAudience(this.state.audience.exclusion_rules[0]));break;case w.CHURNED_VISITORS:h.log(j.AM_WCA_EDITOR_AUDIENCE_TYPE_CHURNED);na.push(this._serializeSubAudience(l.RuleTemplates.getAllVisitors(),la));oa.push(this._serializeSubAudience(l.RuleTemplates.getAllVisitors()));break;case w.CUSTOM:h.log(j.AM_WCA_EDITOR_AUDIENCE_TYPE_RULES);na=this.state.audience.inclusion_rules.map(function(pa){return this._serializeSubAudience(pa);}.bind(this)).filter(function(pa){return !!pa;});oa=this.state.audience.exclusion_rules.map(function(pa){return this._serializeSubAudience(pa);}.bind(this)).filter(function(pa){return !!pa;});break;}return {inclusion_rules:na,exclusion_rules:oa};},_onSetNotice:function(na){this.setState({audienceNotice:na});},_createAudience:function(){if(!this._validate())return;h.log(j.AM_WCA_EDITOR_CREATE_AUDIENCE);var na=this._serializeSubAudiences(),oa={accountId:this.props.accountID,name:this.state.audience.name,description:this.state.audience.description,inclusions:na.inclusion_rules,prefill:this.state.prefill,creation_params:{combination_type:'website',traffic_type:this.state.audience.trafficType},pixel_id:ha(this.props,'pixel.id'),handleError:function(pa,qa){h.log(j.AM_WCA_EDITOR_CREATE_FAIL);this.setState({waitingForServerReponse:false,errorMessage:qa.error.message});}.bind(this)};if(na.exclusion_rules.length)oa.exclusions=na.exclusion_rules;this.props.dao.add.createWebsiteCombinationAudience.one(function(pa){h.log(j.AM_WCA_EDITOR_CREATE_SUCCESS);this.props.onAudienceAdded(pa.id);}.bind(this),oa);this.setState({waitingForServerReponse:true,errorMessage:''});},_updateAudience:function(){var na={name:this.state.audience.name,description:this.state.audience.description,retention_days:this.state.audience.duration},oa={name:this.props.audience.name,description:this.props.audience.description,retention_days:this.props.audience.retention_days};if(this.props.audience.rule){oa.rule=this.props.audience.rule;if(this.state.audience.trafficType===w.ALL_WEBSITE_VISITORS){if(ja.validateRule(this.state.domainRules[0])){na.rule=ja.serializeRule(this.state.domainRules[0]);}else na.rule=ja.serializeRule(l.RuleTemplates.getAllVisitors());}else na.rule=ja.serializeRule(this.state.audience.inclusion_rules[0]);}else{var pa=this._serializeSubAudiences();oa.inclusions=this.props.audience.included_custom_audiences;oa.exclusions=this.props.audience.excluded_custom_audiences;na.inclusions=pa.inclusion_rules;na.exclusions=pa.exclusion_rules;}if(!this._validate()){this.props.onValidationFail&&this.props.onValidationFail(na);return;}if(!ea(na,oa))this.props.onAudienceUpdated(this.props.audience,na);if(!this.props.embedded)g.closeWCADialog();},_updateAudienceFields:function(na,oa){var pa=this._cloneAudience();for(var qa in oa)if(oa.hasOwnProperty(qa))pa[qa]=oa[qa];this.setState({audience:pa},this._updateAudienceForEmbeddedForm);},_updateAudienceForEmbeddedForm:function(){if(this.props.embedded)this._updateAudience();},_updateRuleFields:function(na,oa){var pa=this._cloneAudience(),qa=ja.findRule(pa,na.key);for(var ra in oa)if(oa.hasOwnProperty(ra))qa[ra]=oa[ra];this.setState({audience:pa},this._updateAudienceForEmbeddedForm);},_updateFirstInclusionClause:function(na){var oa=this._cloneAudience();oa.inclusion_rules.clauses=[na];this.setState({audience:oa},this._updateAudienceForEmbeddedForm);},_updateFirstExclusionClause:function(na){var oa=this._cloneAudience();oa.exclusion_rules.clauses=[na];this.setState({audience:oa},this._updateAudienceForEmbeddedForm);},_updateClauseFields:function(na,oa){var pa=this._cloneAudience(),qa=ja.findRuleClause(pa,na.key);for(var ra in oa)if(oa.hasOwnProperty(ra))qa[ra]=oa[ra];this.setState({audience:pa},this._updateAudienceForEmbeddedForm);},_updateDomain:function(na,oa){var pa=this.state.domainRules,qa=ja._findRuleClauseInArray(pa,na.key);for(var ra in oa)if(oa.hasOwnProperty(ra))qa[ra]=oa[ra];this.setState({domainRules:pa},this._updateAudienceForEmbeddedForm);},_cloneAudience:function(){return fa((new l.Audience()),this.state.audience);},_onAudienceRuleUpdated:function(na){if(!ja.validateRule(na))return;var oa=this._cloneAudience();oa.isRuleEditable=true;oa.inclusion_rules=[na];oa.trafficType=w.CUSTOM;this.setState({audience:oa});},_setupAudience:function(na){var oa=new l.Audience();oa.id=na.id;oa.name=na.name;oa.description=na.description;oa.duration=na.retention_days;var pa=JSON.parse(na.data_source.creation_params);if(na.rule){var qa=ja.deserializeRule(na.rule);if(!qa||!ja.validateRule(qa)){oa.isRuleEditable=false;return oa;}oa.inclusion_rules=[qa];if(qa.event||qa.clauses.length>1){oa.trafficType=w.CUSTOM;}else if(parseInt(pa.traffic_type,10)===1||l.RuleTemplates.isAllVisitors(na.rule)){oa.trafficType=w.ALL_WEBSITE_VISITORS;}else oa.trafficType=w.SPECIFIC_PAGE_VISITORS;}else if(na.included_custom_audiences){oa.trafficType=+pa.traffic_type;var ra=na.included_custom_audiences,sa=na.excluded_custom_audiences||[],ta=[],ua=[];for(var va=0;va<ra.length;va++){var wa=ra[va];oa.duration=wa.retention_days;var xa=ja.deserializeRule(wa.rule);xa.id=wa.id;ta.push(xa);}for(va=0;va<sa.length;va++){var ya=sa[va];xa=ja.deserializeRule(ya.rule);xa.id=ya.id;ua.push(xa);}if(ta.length)oa.inclusion_rules=ta;if(ua.length)oa.exclusion_rules=ua;if(oa.trafficType==w.CHURNED_VISITORS)oa.duration=sa[0].retention_days;}return oa;},_setupDomainRules:function(na){if(na&&na.rule)return [ja.deserializeRule(na.rule)];return [new ka()];},_validate:function(){var na=this._validateAudienceData();if(!na){this.setState({enableValidation:true});h.log(j.AM_WCA_EDITOR_VALIDATION_FAILURE);}return na;},_validateAudienceData:function(){if(!this.state.audience.name.length)return false;var na=[];switch(this.state.audience.trafficType){case w.SPECIFIC_PAGE_VISITORS:na=[this.state.audience.inclusion_rules[0]];break;case w.SPECIFIC_PAGE_VISITORS_WITH_EXCLUSION:na=[this.state.audience.inclusion_rules[0],this.state.audience.exclusion_rules[0]];break;case w.CUSTOM:if(this.state.audience.exclusion_rules.length>1){na=this.state.audience.inclusion_rules.concat(this.state.audience.exclusion_rules);}else na=this.state.audience.inclusion_rules;}if(na.length)return na.every(function(oa){return ja.validateRule(oa);});return true;}});e.exports=ma;},null);
__d("WebsiteCustomAudienceViewPixelDialog.react",["AdInterfacesUiLogger","AdsPixelCode.react","AudienceManagerURLConstants","AudienceManagerLoggingEvents","React","WebRemarketingDialogGear.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUINotice.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=k.createClass({displayName:"WebsiteCustomAudienceViewPixelDialog",propTypes:{pixel:k.PropTypes.object.isRequired,pixelMessage:k.PropTypes.string,onGotoRuleBuilder:k.PropTypes.func.isRequired,onGotoSendCodeByMail:k.PropTypes.func.isRequired},render:function(){return (k.createElement("div",null,k.createElement(q,null,"View Custom Audience Pixel"),k.createElement(m,null,k.createElement("div",{className:"_qtd"},this._renderMessage(),k.createElement(h,{pixel:this.props.pixel,onSendEmailLinkClick:this.props.onGotoSendCodeByMail}))),k.createElement(p,{leftContent:k.createElement(l,{learnMoreURL:i.WCA_INSTALL_PIXEL_DOC})},k.createElement(o,null),k.createElement(n,{use:"confirm",onClick:function(){g.log(j.AM_WCA_VIEW_PIXEL_CREATE_AUDIENCE);this.props.onGotoRuleBuilder();}.bind(this),label:"Create Audience"}))));},_renderMessage:function(){if(!this.props.pixelMessage)return;return (k.createElement(r,{use:"notify",className:"_13e0"},this.props.pixelMessage));}});e.exports=u;},null);
__d("WebRemarketingViewState",["AudienceManagerURLConstants"],function(a,b,c,d,e,f,g){var h={INTRODUCTION_DIALOG:1,VIEW_REMARKETING_PIXEL_DIALOG:2,CREATE_AUDIENCE_DIALOG:3,CREATE_AUDIENCE_REQUEST_SENT:4,CREATE_AUDIENCE_REQUEST_COMPLETE:5,CREATING_PIXEL:6,EDIT_AUDIENCE_DIALOG:7,LOADING_PIXEL:8,SEND_PIXEL_EMAIL_DIALOG:9},i=function(j){switch(j){case h.INTRODUCTION_DIALOG:return g.WCA_GETTING_STARTED;case h.CREATE_AUDIENCE_DIALOG:case h.EDIT_AUDIENCE_DIALOG:return g.WCA_CONFIGURE_RULES_DOC;case h.VIEW_REMARKETING_PIXEL_DIALOG:return g.WCA_INSTALL_PIXEL_DOC;case h.CREATE_AUDIENCE_REQUEST_SENT:case h.CREATE_AUDIENCE_REQUEST_COMPLETE:return;default:return;}};e.exports={Enum:h,getLearnMoreURI:i};},null);
__d("WebsiteCustomAudience.react",["AdInterfacesUiLogger","AdsAMViewActions","LayerHideOnEscape","AudienceManagerLoggingEvents","React","ReactLayeredComponentMixin","WebsiteCustomAudienceConfirmationDialog.react","WebsiteCustomAudienceLoadingDialog.react","WebsiteCustomAudienceNUXDialog.react","WebsiteCustomAudienceRuleBuilderDialog.react","WebsiteCustomAudienceSendPixelByMailDialog.react","WebsiteCustomAudienceViewPixelDialog.react","WebRemarketingViewState","XUIDialog.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=640,v=k.createClass({displayName:"WebsiteCustomAudience",mixins:[l],propTypes:{dao:k.PropTypes.object.isRequired,accountID:k.PropTypes.string.isRequired,audience:k.PropTypes.object,embedded:k.PropTypes.bool,onAudienceUpdated:k.PropTypes.func,onAudienceAdded:k.PropTypes.func,tosAccepted:k.PropTypes.object.isRequired,tosRequirementsForAccount:k.PropTypes.object.isRequired,pixel:k.PropTypes.object},getInitialState:function(){return {pixel:null,pixelMessage:null,viewState:s.Enum.LOADING_PIXEL};},componentWillMount:function(){if(this.props.pixel){this._setPixel(this.props.pixel);}else this._onLoadAccountPixels(this.props.accountID);},componentWillReceiveProps:function(w){if(w.pixel){this._setPixel(w.pixel);return;}if(this.props.accountID!==w.accountID)this._onLoadAccountPixels(w.accountID);},render:function(){if(!this.props.embedded)return null;return this._renderDialogBody();},renderLayers:function(){return this.props.embedded?{}:{dialog:k.createElement(t,{layerHideOnBlur:false,shown:true,behaviors:{LayerHideOnEscape:i},width:u,onToggle:this._onToggle},this._renderDialogBody())};},_renderDialogBody:function(){switch(this.state.viewState){case s.Enum.LOADING_PIXEL:return k.createElement(n,null);case s.Enum.INTRODUCTION_DIALOG:return k.createElement(o,{accountID:this.props.accountID,dao:this.props.dao,onPixelCreated:this._onPixelCreated,onGotoRuleBuilder:this._gotoRuleBuilder,onGotoViewPixelCode:this._gotoViewPixelCode,pixel:this.state.pixel,tosAccepted:this.props.tosAccepted,tosRequirementsForAccount:this.props.tosRequirementsForAccount});case s.Enum.VIEW_REMARKETING_PIXEL_DIALOG:return k.createElement(r,{onGotoRuleBuilder:this._gotoRuleBuilder,onGotoSendCodeByMail:this._gotoSendCodeByMail,pixel:this.state.pixel,pixelMessage:this.state.pixelMessage});case s.Enum.SEND_PIXEL_EMAIL_DIALOG:return k.createElement(q,{pixel:this.state.pixel,onSendComplete:function(w,x){this.setState({pixelMessage:w});this._gotoViewPixelCode();}.bind(this),onCancel:this._gotoViewPixelCode});case s.Enum.CREATE_AUDIENCE_DIALOG:return k.createElement(p,{accountID:this.props.accountID,audience:this.props.audience,dao:this.props.dao,onAudienceAdded:this._onAudienceCreated,onAudienceUpdated:this.props.onAudienceUpdated,onViewPixelCode:this._gotoViewPixelCode,pixel:this.state.pixel,embedded:this.props.embedded});case s.Enum.CREATE_AUDIENCE_REQUEST_COMPLETE:return k.createElement(m,{pixel:this.state.pixel});}},_getIsTosAccepted:function(){var w=this.props.tosRequirementsForAccount.website_custom_audience;return this.props.tosAccepted.hasOwnProperty(w)&&(this.props.tosAccepted[w]==1);},_onLoadAccountPixels:function(w,x){this.props.dao.fetch.adsPixelsForAccount.one(function(y){var z=(y.length>0)?y[0]:null;if(!x)x=this._getViewStateByPixel(z);this.setState({viewState:x,pixel:z});}.bind(this),{accountId:w});},_setPixel:function(w){var x=this._getViewStateByPixel(w);this.setState({viewState:x,pixel:w});},_getViewStateByPixel:function(w){if(this.props.audience)return s.Enum.CREATE_AUDIENCE_DIALOG;if(!w||!w.last_fired_time||!this._getIsTosAccepted())return s.Enum.INTRODUCTION_DIALOG;return s.Enum.CREATE_AUDIENCE_DIALOG;},_onPixelCreated:function(){this.props.dao.fetch.adsPixelsForAccount.clearCache();this._onLoadAccountPixels(this.props.accountID,s.Enum.VIEW_REMARKETING_PIXEL_DIALOG);},_onAudienceCreated:function(w){this.props.onAudienceAdded&&this.props.onAudienceAdded(w);this.setState({viewState:s.Enum.CREATE_AUDIENCE_REQUEST_COMPLETE});},_gotoRuleBuilder:function(){this.setState({viewState:s.Enum.CREATE_AUDIENCE_DIALOG});},_gotoViewPixelCode:function(){g.log(j.AM_WCA_NUX_VIEW_PIXEL);this.setState({viewState:s.Enum.VIEW_REMARKETING_PIXEL_DIALOG});},_gotoSendCodeByMail:function(){g.log(j.WCA_EMAIL_PIXEL);this.setState({viewState:s.Enum.SEND_PIXEL_EMAIL_DIALOG});},_onToggle:function(){h.closeWCADialog();}});e.exports=v;},null);
__d("AudienceManagerWebsiteUsers.react",["React","WebsiteCustomAudience.react"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:"AudienceManagerWebsiteUsers",propTypes:{dao:g.PropTypes.object.isRequired,accountID:g.PropTypes.string.isRequired,audience:g.PropTypes.object,embedded:g.PropTypes.bool,createMode:g.PropTypes.bool,onAudienceChanged:g.PropTypes.func,onAudienceUpdated:g.PropTypes.func,onAudienceAdded:g.PropTypes.func,tosAccepted:g.PropTypes.object.isRequired,tosRequirementsForAccount:g.PropTypes.object.isRequired},render:function(){var j=this.props.onAudienceUpdated?this.props.onAudienceUpdated:this.props.onAudienceChanged;return (g.createElement(h,{dao:this.props.dao,accountID:this.props.accountID,audience:this.props.audience,embedded:this.props.embedded,onAudienceUpdated:j,onAudienceAdded:this.props.onAudienceAdded,tosAccepted:this.props.tosAccepted,tosRequirementsForAccount:this.props.tosRequirementsForAccount}));}});e.exports=i;},null);
__d("CustomAudienceTosUtils",[],function(a,b,c,d,e,f){e.exports={getTosRequirements:function(g){return {custom_audience:g?228298987271350:215449065224656,website_custom_audience:206760949512025,mobile_app_custom_audience:206760949512025};}};},null);
__d("AudienceManagerChrome.react",["AdInterfacesUiLogger","AdsAccountCapabilities","AdsAccountUtils","AdsAMAudienceActions","AdsAMAudienceStore","AdsAMAudienceUtils","AdsAudienceDataSourceUtils","AdsAMPresetFilters.react","AdsAMViewActions","AdsAMViewStore","AdsAMFilterFieldConfig","AdsAMFilterValueConfig","AudienceManagerWorkflowTypes","AdsCreateAudienceActionSelector.react","AudienceManagerBlankState.react","AudienceManagerBulkDeleteDialog.react","AudienceManagerBulkDeleteSTSDialog.react","AudienceManagerColumnSelector.react","AudienceManagerCreateAdButton.react","AudienceManagerCreateAudienceDialog.react","AudienceManagerDeleteDialog.react","AudienceManagerEditAudienceDialog.react","AudienceManagerErrorView.react","AudienceManagerErrorTypes","AudienceManagerInlineCAActionSelector.react","AudienceManagerLoggingEvents","AudienceManagerLookalikeDialog.react","AudienceManagerOptOutDialog.react","AudienceManagerOptOutUserDialog.react","AudienceManagerPETopNavigation.react","AudienceManagerPlacement","AudienceManagerSavedTargetSpecDialog.react","AudienceManagerSearchBar.react","AudienceManagerSelectableTable.react","AudienceManagerSeparator.react","AudienceManagerShareDialog.react","AudienceManagerStages","AudienceManagerTableHeader.react","AudienceManagerTopNavigation.react","AudienceManagerTransactionDialog.react","AudienceManagerUIConstants","AudienceManagerViewPixelDialog.react","AudienceManagerWebsiteUsers.react","BUIFilterTokenizer.react","CustomAudienceTosUtils","Grid.react","Image.react","LeftRight.react","ScrollableArea.react","React","SubscriptionsHandler","XUIButton.react","XUINotice.react","XUISpinner.react","cssVar","cx","fbt","invariant","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb){var nb=da.Errors,ob=da.ErrorTypes,pb=za.GridItem,qb=ua.BULK_ACTION_TYPE,rb=ua.CREATE_AUDIENCE_ACTION_TYPE,sb=47,tb=42,ub=8,vb=10,wb=220,xb=ua.TABLE_TOP_PADDING,yb=36,zb=80,ac=30,bc=parseInt("40px",10),cc=db.createClass({displayName:"AudienceManagerChrome",propTypes:{accountID:db.PropTypes.string.isRequired,showTableHeader:db.PropTypes.bool.isRequired,primedDao:db.PropTypes.object,top:db.PropTypes.number.isRequired,width:db.PropTypes.number.isRequired,height:db.PropTypes.number.isRequired,controller:db.PropTypes.object.isRequired,canWrite:db.PropTypes.bool.isRequired,autoLaunch:db.PropTypes.object,onAdCreate:db.PropTypes.func,placement:db.PropTypes.string.isRequired},getDefaultProps:function(){return {showTableHeader:true,placement:ka.STAND_ALONE};},getInitialState:function(){return {audienceClicked:null,dialogStates:p.getViewState(),sortState:k.getSortState(),initializationErrors:[],selectedAudienceIDs:[],showOptOutUserDialog:false,useAutoLaunch:true};},componentWillMount:function(){this._subscriptions=new eb();this._subscriptions.addSubscriptions(k.subscribe('change',function(){this.setState({sortState:k.getSortState()});}.bind(this)),p.subscribe('change',function(){var dc=p.getAudienceIdClicked(),ec=dc?k.getState(dc):null;this.setState({audienceClicked:ec,dialogStates:p.getViewState()});}.bind(this)));},componentDidMount:function(){if(this.state.useAutoLaunch&&this.props.autoLaunch)switch(this.props.autoLaunch.workflow_id){case s.WCA:setTimeout(function(){return o.showWCADialog();});break;case s.PIXEL_DETAILS:setTimeout(function(){return o.showPixelDialog();});break;case s.LOOKALIKE:setTimeout(function(){return o.showLookalikeDialog();});break;case s.DATA_FILE:case s.MAIL_CHIMP:case s.COPY_PASTE:case s.MACA:case s.CUSTOM_LIST:setTimeout(function(){return o.showCreateCustomAudienceDialog();});break;}},componentWillUnmount:function(){this._subscriptions.release();this._subscriptions=null;},render:function(){var dc={top:this.props.top};return (db.createElement("div",{className:"_2aag",style:dc},this._renderContent()));},_renderContent:function(){var dc,ec=k.getErrorsByType(ob.INIT_ERRORS);if(k.hasAllContent()){dc=this._renderMain();}else if(ec.length>0){dc=(db.createElement("div",{className:"_htg"},db.createElement(ca,{shown:true,message:ec[0].message})));}else dc=(db.createElement("div",{className:"_2aah"},db.createElement(hb,{size:"large"})));return (db.createElement("div",{className:"_2aai"},dc));},_renderMain:function(){var dc=this._hasContent();return (db.createElement("div",null,k.hasError(nb.STS_GET)?this._renderSTSErrorHeader():null,this._renderHeader(dc),dc?this._renderNonBlankState():this._renderBlankState(),this._renderTransactionDialog(),this._renderCreateAudienceDialog(),this._renderLookalikeDialog(),this._renderWCADialog(),this.state.dialogStates.showSavedTargetSpecDialog?this._renderSavedTargetSpecDialog():null));},_renderSTSErrorHeader:function(){return (db.createElement(gb,{use:"warn"},"Saved target group is currently unavailable. We are actively working on this."));},_renderHeader:function(dc){var ec=k.getAccount();if(this.props.placement===ka.POWER_EDITOR){return (db.createElement("div",null,db.createElement("div",{className:"_3-ft"}),db.createElement(ja,{accountID:this.props.accountID,onAction:this._onCreateAudienceClicked,canWrite:this.props.canWrite,isBlankState:!dc}),db.createElement(oa,{marginTop:0})));}else if(this.props.placement===ka.STAND_ALONE){return (db.createElement("div",null,db.createElement(sa,{accountID:this.props.accountID,onAction:this._onCreateAudienceClicked,canWrite:this.props.canWrite,isBlankState:!dc}),db.createElement(oa,{marginTop:0,marginBottom:0}),db.createElement(ra,{account:ec}),db.createElement(oa,{marginTop:0})));}else if(this.props.placement===ka.NEW_ADS_MANAGER)return (db.createElement("div",null,db.createElement(ra,{account:ec}),db.createElement(oa,{marginTop:0})));},_hasContent:function(){var dc=k.getAllAudiences().length||p.hasFilterContent();return !!dc;},_renderBlankState:function(){var dc=k.getAccount();return (db.createElement("div",{className:"_2ayw"},db.createElement(u,{accountId:this.props.accountID,dao:this.props.primedDao,onAudienceAdded:function(ec){this.props.controller.addAudience(ec);}.bind(this),onSavedTargetSpecCreated:function(ec,fc){this.props.controller.createSavedTargetSpec(ec,fc,this.props.accountID);}.bind(this),onSavedTargetSpecChanged:this.props.controller.changeSavedTargetSpec,tosAccepted:dc.tos_accepted||{},tosRequirementsForAccount:this._getTosRequirements(),autoLaunch:this.state.useAutoLaunch?this.props.autoLaunch:null,canWrite:this.props.canWrite})));},_renderNonBlankState:function(){return (db.createElement("div",null,this._renderToolsBar(),this._renderBulkDeleteDialog(),this._renderViewPixelDialog(),this._renderRegularEditDialog(),this._renderDeleteAudienceDialog(),this._renderShareAudienceDialog(),this._renderOptOutDialog(),this._renderOptOutUserDialog(),this._renderFilterPaneAndTable()));},_renderInlineCreateButton:function(){return (db.createElement(t,{disabled:!this.props.canWrite,onAction:this._onCreateAudienceClicked,supportSavedTargetSpec:true,use:"confirm"}));},_renderTransactionDialog:function(){var dc=k.getErrorsByType(ob.NON_INIT_ERRORS);if(dc.length>0)return (db.createElement(ta,{stage:qa.ERROR,error:dc[0],onCancelError:j.clearErrors}));return null;},_renderToolsBar:function(){var dc=[db.createElement(pb,null,this._renderFilterButton()),db.createElement(pb,null,this._renderColumnSelector()),db.createElement(pb,null,this._renderCreateAdButton()),db.createElement(pb,null,this._renderActionSelector())],ec=i.hasCapability(k.getAccount(),h.CUSTOM_AUDIENCES_OPT_OUT_LINK);if(ec)dc.push(db.createElement(pb,null,this._renderOptOutUserButton()));if(this.props.placement===ka.NEW_ADS_MANAGER&&this._hasContent())dc.unshift(db.createElement(pb,null,this._renderInlineCreateButton()));return (db.createElement("div",{className:"_5dgz"},db.createElement(bb,null,db.createElement("div",null,db.createElement(za,{cols:dc.length,spacing:"_2e7c"},dc)),db.createElement("div",null,db.createElement(ma,{onKeywordsChanged:this._handleKeywordsChanged,onKeywordsComplete:this._handleKeywordsComplete})))));},_renderOptOutUserButton:function(){var dc="Opt Out Users";return (db.createElement(fb,{label:dc,onClick:this._handleOptOutUserButtonClicked}));},_handleOptOutUserButtonClicked:function(){this.setState({showOptOutUserDialog:true});},_renderFilterButton:function(){var dc="Filters",ec=p.getViewState().showFilterPane,fc=this._isAnyFilterSelected()?mb('/images/ads/campaign_manager/filter/filter-blue.png'):mb('/images/ads/campaign_manager/filter/filter-gray.png');return (db.createElement(fb,{label:dc,onClick:this._handleFilterButtonClicked,image:db.createElement(ab,{src:fc})}));},_isAnyFilterSelected:function(){return !!p.getFilterSet();},_handleFilterButtonClicked:function(){if(p.getViewState().showFilterPane){o.hideFilterPane();}else o.showFilterPane();g.log(fa.AM_FILTER_BUTTON_CLICKED);},_handleKeywordsChanged:function(event){var dc=event.target.value;if(dc)dc=dc.trim();p.setNameFilter(dc);},_handleKeywordsComplete:function(event){this.props.controller.filterCAAndSTS(this._constructFilter());g.log(fa.AM_FILTER_NAME_SEARCH);},_constructFilter:function(){return {name:p.getNameFilter(),filterSet:p.getFilterSet()};},_renderSavedTargetSpecDialog:function(){var dc=this.state.audienceClicked?"Edit Saved Target Group":"Create Saved Target Group",ec=this.state.audienceClicked?"Edit Audience":"Create Audience";return (db.createElement(la,{accountID:this.props.accountID,dao:this.props.primedDao,title:dc,saveButtonLabel:ec,savedTargetSpec:this.state.audienceClicked,onTargetSpecChanged:function(fc,gc){this.props.controller.changeSavedTargetSpec(fc,gc);}.bind(this),onTargetSpecCreated:function(fc,gc){this.props.controller.createSavedTargetSpec(fc,gc,this.props.accountID);}.bind(this),onClose:o.closeSavedTargetSpecDialog}));},_renderCreateAudienceDialog:function(){var dc=k.getAccount();if(this.state.dialogStates.showCreateCustomAudienceDialog){var ec=this.props.placement!==ka.POWER_EDITOR;return (db.createElement(z,{dao:this.props.primedDao,onAudienceAdded:function(fc){this.props.controller.addAudience(fc);}.bind(this),accountID:this.props.accountID,tosAccepted:dc.tos_accepted||{},tosRequirementsForAccount:this._getTosRequirements(),onCancel:o.closeCreateCustomAudienceDialog,allowNextStep:ec,autoLaunch:this.state.useAutoLaunch?this.props.autoLaunch:null}));}return null;},_renderBulkDeleteDialog:function(){if(this.state.dialogStates.showBulkDeleteDialog){lb(this.state.selectedAudienceIDs&&this.state.selectedAudienceIDs.length>0);var dc=this.state.selectedAudienceIDs.map(function(fc){return k.getState(fc);}),ec=l.isSavedTargetSpec(dc[0]);if(ec){return (db.createElement(w,{selectedAudiences:dc,onBulkDelete:function(fc){this.props.controller.bulkDeleteSavedTargetSpecs(fc);}.bind(this),onClose:o.closeBulkDeleteDialog}));}else return (db.createElement(v,{selectedAudiences:dc,onBulkDelete:function(fc){this.props.controller.bulkDeleteAudiences(fc);}.bind(this),controller:this.props.controller,onClose:o.closeBulkDeleteDialog}));}return null;},_renderOptOutDialog:function(){if(this.state.dialogStates.showOptOutDialog)return (db.createElement(ha,{audience:this.state.audienceClicked,onClose:o.closeOptOutDialog,onConfirmClick:function(dc,ec){this.props.controller.changeAudienceWithCallback(dc,ec,o.closeOptOutDialog);}.bind(this)}));},_renderActionSelector:function(){var dc=this.state.selectedAudienceIDs.map(function(fc){return k.getState(fc);}),ec=i.hasCapability(k.getAccount(),h.CUSTOM_AUDIENCES_OPT_OUT_LINK);return (db.createElement(ea,{accountID:this.props.accountID,selectedAudiences:dc,canOptOut:ec,onBulkAction:this._onBulkAction,onCAAction:this._onCAAction,onSTGAction:this._onSTGAction}));},_renderCreateAdButton:function(){var dc=this.state.selectedAudienceIDs.map(function(ec){return k.getState(ec);});return (db.createElement(y,{accountID:this.props.accountID,audiences:dc,label:this._renderCreateAdButtonLabel(),controller:this.props.controller,onAdCreate:this.props.onAdCreate}));},_renderCreateAdButtonLabel:function(){if(this.props.placement===ka.POWER_EDITOR&&i.hasCapability(k.getAccount(),h.HAS_AD_SET_TARGETING))return ("Create Ad Set");return ("Create Ad");},_renderColumnSelector:function(){return (db.createElement(x,{columnsShown:p.getColumnsShown(),onSelectorChange:this._handleColumnSelectorChange}));},_handleColumnSelectorChange:function(dc){this.props.controller.updateColumnShown(dc.target.value,dc.target.checked);var ec=p.getColumnsShown();this.props.controller.saveColumnsShownSettings(ec);g.log(fa.AM_TABLE_COLUMN_CUSTOMIZE,{column_settings:ec});},_onBulkAction:function(dc){switch(dc){case qb.DELETE:o.showBulkDeleteDialog();g.log(fa.AM_TABLE_ACTION_BULK_DELETE_CLICKED,{num_audiences:this.state.selectedAudienceIDs.length});break;case qb.CREATE_AD:var ec=this.state.selectedAudienceIDs.map(function(fc){return k.getState(fc);});this.props.controller.bulkCreateAd(ec);break;default:lb(false);}},_onCAAction:function(dc){var ec=k.getState(this.state.selectedAudienceIDs[0]);switch(dc){case 'edit':if(ec.data_source.sub_type===m.SUBTYPES.WEB_PIXEL_HITS||ec.data_source.sub_type===m.SUBTYPES.WEB_PIXEL_COMBINATION_EVENTS){o.showWCADialog(ec.id);}else o.showRegularEditDialog(ec.id);g.log(fa.AM_TABLE_ACTION_EDIT_CLICKED,{audience_type:ua.AUDIENCE_TYPE.CUSTOM_AUDIENCE,audience_id:ec.id});break;case 'delete':o.showDeleteAudienceDialog(ec.id);g.log(fa.AM_TABLE_ACTION_DELETE_CLICKED,{audience_type:ua.AUDIENCE_TYPE.CUSTOM_AUDIENCE,audience_id:ec.id});break;case 'pixel':o.showPixelDialog(ec.id);g.log(fa.AM_TABLE_ACTION_VIEW_PIXEL_CLICKED,{audience_id:ec.id});break;case 'share':o.showShareAudienceDialog(ec.id);g.log(fa.AM_TABLE_ACTION_SHARE_CLICKED,{audience_id:ec.id});break;case 'lookalike':o.showLookalikeDialog(ec.id);g.log(fa.AM_TABLE_ACTION_CREATE_LAL_CLICKED,{audience_id:ec.id});break;case 'optout':o.showOptOutDialog(ec.id);break;default:lb(false);}},_onSTGAction:function(dc){var ec=k.getState(this.state.selectedAudienceIDs[0]);switch(dc){case 'edit':o.showSavedTargetSpecDialog(ec.id);g.log(fa.AM_TABLE_ACTION_EDIT_CLICKED,{audience_type:ua.AUDIENCE_TYPE.SAVED_TARGET_SPEC,audience_id:ec.id});break;case 'delete':o.showBulkDeleteDialog();g.log(fa.AM_TABLE_ACTION_DELETE_CLICKED,{audience_type:ua.AUDIENCE_TYPE.SAVED_TARGET_SPEC,audience_id:ec.id});break;default:lb(false);}},_renderViewPixelDialog:function(){if(this.state.dialogStates.showPixelDialog)return (db.createElement(va,{accountID:this.props.accountID,dao:this.props.primedDao}));return null;},_renderShareAudienceDialog:function(){if(this.state.dialogStates.showShareDialog&&this.state.audienceClicked){var dc=this.props.controller;return (db.createElement(pa,{audience:this.state.audienceClicked,onUpdateAudienceCapabilities:function(ec,fc,gc){return dc.updateAudienceCapabilities(ec,fc,gc);},dao:this.props.primedDao}));}},_renderRegularEditDialog:function(){if(this.state.dialogStates.showRegularEditDialog&&this.state.audienceClicked){var dc=this.props.controller;return (db.createElement(ba,{accountID:this.props.accountID,audience:this.state.audienceClicked,onAudienceChanged:function(ec,fc){return dc.changeAudience(ec,fc);},onClose:o.closeRegularEditDialog}));}return null;},_renderWCADialog:function(){var dc=this.state.audienceClicked?false:true;if(this.state.dialogStates.showWCADialog){var ec=k.getAccount(),fc=this.props.controller;return (db.createElement(wa,{accountID:this.props.accountID,audience:this.state.audienceClicked,dao:this.props.primedDao,createMode:dc,onAudienceAdded:function(gc){this.props.controller.addAudience(gc);}.bind(this),onAudienceChanged:fc.changeAudience.bind(fc),tosAccepted:ec.tos_accepted||{},tosRequirementsForAccount:this._getTosRequirements()}));}},_renderDeleteAudienceDialog:function(){if(this.state.dialogStates.showDeleteDialog&&this.state.audienceClicked)return (db.createElement(aa,{audience:this.state.audienceClicked,dao:this.props.primedDao,onAudienceDeleted:this.props.controller.deleteAudience.bind(this.props.controller)}));},_renderLookalikeDialog:function(){if(this.state.dialogStates.showLookalikeDialog)return (db.createElement(ga,{accountID:this.props.accountID,audience:this.state.audienceClicked,dao:this.props.primedDao,onAudienceAdded:function(dc){this.props.controller.addAudience(dc);}.bind(this),onClose:o.closeLookalikeDialog}));},_renderOptOutUserDialog:function(){if(this.state.showOptOutUserDialog)return (db.createElement(ia,{accountID:this.props.accountID,onClose:this._onOptOutUserDialogClose}));},_onOptOutUserDialogClose:function(){this.setState({showOptOutUserDialog:false});},_renderFilterPaneAndTable:function(){return (db.createElement("div",{style:{width:this.props.width}},this._renderPresetFilterPane(),this._renderAudienceTable()));},_renderPresetFilterPane:function(){if(p.getViewState().showFilterPane){var dc=this._getTableHeight(),ec={width:wb,paddingLeft:vb,paddingRight:vb,height:dc};return (db.createElement("div",{style:ec,className:"_130j"},db.createElement(cb,null,db.createElement(n,{onChange:this._handlePresetFilterChanged,filterSet:p.getFilterSet()}))));}},_handlePresetFilterChanged:function(dc){this._handleFilterSetChanged(dc);g.log(fa.AM_FILTER_LEFT_PRESET_CHANGED,{filter:this._getFilterParamsForLogging(dc)});},_getTableHeight:function(){var dc=this.props.height-tb-xb;if(this.props.placement===ka.NEW_ADS_MANAGER)dc-=zb;if(this.props.placement===ka.STAND_ALONE)dc=dc-zb-bc;if(this.props.placement===ka.POWER_EDITOR)dc=dc-ub-ac;if(k.hasError(nb.STS_GET))dc-=yb;return dc;},_renderAudienceTable:function(){var dc=this._getTableHeight(),ec=this.props.width,fc={};if(p.getViewState().showFilterPane){var gc=wb+(2*vb);ec-=gc;fc={width:ec,marginLeft:gc};dc-=sb;}var hc={account_id:this.props.accountID};return (db.createElement("div",{style:fc,className:"_5dg_"},this._renderFilterTokenSection(),db.createElement(na,{account:hc,audiences:k.getAllAudiences(),height:dc,width:ec,dao:this.props.primedDao,tableController:this.props.controller,onAudienceSelected:this._onAudienceSelected,onCreateAudienceClicked:this._onCreateAudienceClicked,columnsShown:p.getColumnsShown(),sortState:this.state.sortState,onLastRowReached:this._fetchMoreAudiences,displayLoading:p.isFiltering(),displayScrollLoading:p.isLoadingMoreAudiences()})));},_renderFilterTokenSection:function(){if(!p.getViewState().showFilterPane)return null;var dc={height:sb};return (db.createElement("div",{style:dc,className:"_2vde"},this._renderFilterTokenizer()));},_renderFilterTokenizer:function(){var dc=[];Object.keys(q).forEach(function(ec){dc.push(q[ec]);});return (db.createElement(xa,{filterSet:p.getFilterSet(),onChange:this._handleFilterTokenizerChanged,validFieldConfigs:dc,fieldsConfig:q,valuesConfig:r}));},_handleFilterTokenizerChanged:function(dc){this._handleFilterSetChanged(dc);g.log(fa.AM_FILTER_TOKENIZER_CHANGED,{filter:this._getFilterParamsForLogging(dc)});},_getFilterParamsForLogging:function(dc){if(!dc)return [];return dc.toAPI();},_handleFilterSetChanged:function(dc){o.updateFilterSet(dc);this.props.controller.filterCAAndSTS(this._constructFilter());},_onAudienceSelected:function(dc){this.setState({selectedAudienceIDs:dc.toArray()});},_onCreateAudienceClicked:function(dc){switch(dc){case rb.CUSTOM_AUDIENCE:this.setState({useAutoLaunch:false});o.showCreateCustomAudienceDialog();g.log(fa.AM_CA_CREATE_AUDIENCE_CLICK);break;case rb.LOOKALIKE:o.showLookalikeDialog(null);g.log(fa.AM_LAL_CREATE_AUDIENCE_CLICK);break;case rb.SAVED_TARGET_SPEC:o.showSavedTargetSpecDialog(null);g.log(fa.AM_CREATE_SAVED_AUDIENCE_CLICKED);break;default:lb(false);}},_fetchMoreAudiences:function(){if(p.getCustomAudienceAfterCursor()||p.getSavedTargetSpecAfterCursor()||this.props.controller.shouldFetchMore())this.props.controller.fetchMoreCAAndSTS(this._constructFilter(),p.getCustomAudienceAfterCursor(),p.getSavedTargetSpecAfterCursor());},_getTosRequirements:function(){var dc=k.getAccount(),ec=i.getIsCorporateFromCapabilities(dc.capabilities);return ya.getTosRequirements(ec);}});e.exports=cc;},null);
__d("SavedTargetSpecAPIFields",[],function(a,b,c,d,e,f){var g={ID:'id',AUDIENCE_ID:'audience_id',ACCOUNT_ID:'account_id',AUDIENCE_NAME:'audience_name',TARGET_SPEC:'target_spec',TIME_UPDATED:'time_updated',TIME_UPDATED_TIMESTAMP:'time_updated_timestamp',APPROXIMATE_COUNT:'approximate_count',TARGETING_SENTENCE_LINES:'targeting_sentence_lines',IS_SAVED_TARGET_SPEC:'isSavedTargetSpec'};e.exports={FIELDS:g,DEFAULT_FIELDS_FOR_AUDIENCE_MANAGER:[g.ID,g.ACCOUNT_ID,g.AUDIENCE_NAME,g.APPROXIMATE_COUNT,g.TARGET_SPEC,g.TIME_UPDATED_TIMESTAMP,g.TARGETING_SENTENCE_LINES]};},null);
__d("AudienceManagerAdgroupsForAudienceRequest",["AudienceManagerAPIRequest"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k){"use strict";g.call(this,'GET',{adgroup_status:['ACTIVE'],fields:'id,name'});this.$AudienceManagerAdgroupsForAudienceRequest0=k;}j.prototype.getEndpoint=function(){"use strict";return '/'+this.$AudienceManagerAdgroupsForAudienceRequest0+'/adgroups';};j.prototype.isParamsValid=function(){"use strict";return this.$AudienceManagerAdgroupsForAudienceRequest0;};e.exports=j;},null);
__d("AudienceManagerCreateSavedTargetGroupRequest",["AudienceManagerAPIRequest"],function(a,b,c,d,e,f,g){'use strict';for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k){g.call(this,'POST',k);this.$AudienceManagerCreateSavedTargetGroupRequest0=k.accountId;this.$AudienceManagerCreateSavedTargetGroupRequest1=k.name;this.$AudienceManagerCreateSavedTargetGroupRequest2=k.targeting_spec;}j.prototype.getEndpoint=function(){return '/act_'+this.$AudienceManagerCreateSavedTargetGroupRequest0+'/audiences';};j.prototype.isParamsValid=function(){return this.$AudienceManagerCreateSavedTargetGroupRequest0&&this.$AudienceManagerCreateSavedTargetGroupRequest1&&this.$AudienceManagerCreateSavedTargetGroupRequest2;};e.exports=j;},null);
__d("AudienceManagerGetSavedTargetGroupRequest",["AudienceManagerAPIRequest","SavedTargetSpecAPIFields"],function(a,b,c,d,e,f,g,h){'use strict';for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(l){g.call(this,'GET',{fields:h.DEFAULT_FIELDS_FOR_AUDIENCE_MANAGER});this.$AudienceManagerGetSavedTargetGroupRequest0=l;}k.prototype.getEndpoint=function(){return '/'+this.$AudienceManagerGetSavedTargetGroupRequest0;};k.prototype.isParamsValid=function(){return this.$AudienceManagerGetSavedTargetGroupRequest0;};e.exports=k;},null);
__d("AudienceManagerDeleteRequest",["AudienceManagerAPIRequest"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k){"use strict";g.call(this,'DELETE',{});this.$AudienceManagerDeleteRequest0=k;}j.prototype.getEndpoint=function(){"use strict";return '/'+this.$AudienceManagerDeleteRequest0;};j.prototype.isParamsValid=function(){"use strict";return this.$AudienceManagerDeleteRequest0;};e.exports=j;},null);
__d("AudienceManagerFilteringUtils",["AdsAMFilterAPIParamConsts","AdsAMFilterValueConfig","AdsAPICustomAudienceFilteringFields","AdsGenericFilterOperator"],function(a,b,c,d,e,f,g,h,i,j){function k(l){"use strict";this.$AudienceManagerFilteringUtils0=l;this.$AudienceManagerFilteringUtils1=l?l.toAPI():null;}k.prototype.shouldFetchCustomAudiences=function(){"use strict";if(!this.$AudienceManagerFilteringUtils1)return true;var l=this.$AudienceManagerFilteringUtils1.some(function(m){return m.field===g.UI_FIELD_NAME.TYPE&&m.value.length===1&&m.value[0]===h.TYPE_SAVED_AUDIENCE.value;});return !l;};k.prototype.shouldFetchSavedTargetSpecs=function(){"use strict";if(!this.$AudienceManagerFilteringUtils1)return true;var l=this.$AudienceManagerFilteringUtils1.some(function(m){switch(m.field){case g.UI_FIELD_NAME.TYPE:return m.value.indexOf(h.TYPE_SAVED_AUDIENCE.value)===-1;case g.UI_FIELD_NAME.SOURCE:return true;case g.UI_FIELD_NAME.AVAILABILITY:return m.value.indexOf(h.AVAILABILITY_READY.value)===-1;case g.UI_FIELD_NAME.QUICK_LOOK:return true;default:break;}return false;});return !l;};k.prototype.filterSavedTargetSpecsName=function(l,m){"use strict";return m.filter(function(n){return n.audience_name.indexOf(l)!==-1;});};k.prototype.getCAFilteringParams=function(){"use strict";if(!this.$AudienceManagerFilteringUtils1)return [];var l=[];this.$AudienceManagerFilteringUtils1.forEach(function(m){var n=this.$AudienceManagerFilteringUtils2(m);if(n)l.push(n);}.bind(this));return l;};k.prototype.$AudienceManagerFilteringUtils2=function(l){"use strict";switch(l.field){case g.UI_FIELD_NAME.TYPE:return this.$AudienceManagerFilteringUtils3(l,i.SUBTYPE);case g.UI_FIELD_NAME.SOURCE:return this.$AudienceManagerFilteringUtils4(l,i.DATA_SOURCE_SUBTYPE);case g.UI_FIELD_NAME.AVAILABILITY:return this.$AudienceManagerFilteringUtils4(l,i.DELIVERY_STATUS_CODE);case g.UI_FIELD_NAME.QUICK_LOOK:return this.$AudienceManagerFilteringUtils4(l,i.QUICK_LOOK);default:return null;}};k.prototype.$AudienceManagerFilteringUtils4=function(l,m){"use strict";var n=[];l.value.forEach(function(o){n=this.$AudienceManagerFilteringUtils5(n,h[o].filteringParamValues);}.bind(this));return {field:m,operator:l.operator,value:n};};k.prototype.$AudienceManagerFilteringUtils5=function(l,m){"use strict";m.forEach(function(n){if(l.indexOf(n)===-1)l.push(n);});return l;};k.prototype.$AudienceManagerFilteringUtils3=function(l,m){"use strict";if(l.value.length===1&&l.value[0]===h.TYPE_SAVED_AUDIENCE.value)return null;var n=this.$AudienceManagerFilteringUtils6(l,h.TYPE_CUSTOM_AUDIENCE.value),o=this.$AudienceManagerFilteringUtils6(l,h.TYPE_LOOKALIKE.value);if(n&&o)return null;var p=o?j.EQUAL:j.NOT_EQUAL;return {field:m,operator:p,value:h.TYPE_LOOKALIKE.filteringParamValues[0]};};k.prototype.$AudienceManagerFilteringUtils6=function(l,m){"use strict";return l.value.some(function(n){return n===m;});};e.exports=k;},null);
__d("AudienceManagerUIControllerMixin",["AdsAMAudienceActions","AudienceDaoManager","AudiencePropertyConstants","SavedTargetSpecAPIFields","emptyFunction","AudienceManagerErrorTypes"],function(a,b,c,d,e,f,g,h,i,j,k){var l=b('AudienceManagerErrorTypes').Errors,m=i.AUDIENCE_MANAGER_FIELDS,n={changeAudience:function(o,p){this.changeAudienceWithCallback(o,p,k);},changeAudienceWithCallback:function(o,p,q){var r=h.getPrimedDao(this.getAccountID());this.clearDaoCache(r);var s={id:o.id,handleError:function(t,u){g.error(t,u,l.AUDIENCE_UPDATE);},name:p.name,description:p.description,rule:p.rule,retention_days:p.retention_days,opt_out_link:p.opt_out_link};if(p.inclusions)s.inclusions=p.inclusions;if(p.exclusions)s.exclusions=p.exclusions;r.mutate.customAudience.one(function(t){if(t)r.fetch.audience.one(function(u){q();g.updateAudience(o.id,u);},{audienceID:o.id,fields:m,handleError:function(u,v){g.error(u,v,l.AUDIENCE_GET);}});},s);},changeSavedTargetSpec:function(o,p){var q=h.getDao();this.clearDaoCache(q);q.mutate.savedTargetSpec.one(function(r){if(r)q.fetch.savedTargetSpec.one(function(s){g.updateAudience(o,s);},{audienceID:o.id,fields:j.DEFAULT_FIELDS_FOR_AUDIENCE_MANAGER,handleError:function(s,t){g.error(s,t,l.AUDIENCE_GET);}});},{audienceId:o.id,name:p.name,targeting_spec:p.targetSpec});},changeDetailsPageSavedTargetSpec:function(o,p){var q=h.getDao();this.clearDaoCache(q);q.mutate.savedTargetSpec.one(function(r){if(r)q.fetch.savedTargetSpec.one(function(s){g.initializeAudienceDetailsContent(s);},{audienceID:o.id,fields:j.DEFAULT_FIELDS_FOR_DETAILS_PAGE});},{audienceId:o.id,name:p.name,targeting_spec:p.targetSpec});},clearDaoCache:function(o){o.fetch.customAudiencesForAccount.clearCache();o.fetch.audiencesForAccountWithPagination.clearCache();o.fetch.savedTargetSpec.clearCache();o.fetch.audience.clearCache();}};e.exports=n;},null);
__d("AudienceManagerUIController",["AdInterfacesUiLogger","AdsAMAudienceActions","AdsAMAudienceStore","AdsAMAudienceUtils","AdsAMViewActions","AdsGenericFilterOperator","AsyncRequest","AudienceDaoManager","AudienceManagerAdgroupsForAudienceRequest","AudienceManagerCreateSavedTargetGroupRequest","AudienceManagerGetSavedTargetGroupRequest","AudienceManagerDeleteRequest","AudienceManagerErrorTypes","AudienceManagerFilteringUtils","AudienceManagerLoggingEvents","AudienceManagerRequestBatch","AudienceManagerUIConstants","AudienceManagerUIControllerMixin","AudiencePropertyConstants","SavedTargetSpecAPIFields","BusinessURI.brands","XAdsCreatorController","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){var da=s.Errors,ea=y.AUDIENCE_MANAGER_FIELDS,fa=ca(x);for(var ga in fa)if(fa.hasOwnProperty(ga))ia[ga]=fa[ga];var ha=fa===null?null:fa.prototype;ia.prototype=Object.create(ha);ia.prototype.constructor=ia;ia.__superConstructor__=fa;function ia(ja){"use strict";this.$AudienceManagerUIController0=ja;}ia.prototype.bulkDeleteAudiences=function(ja){"use strict";var ka=ja.map(function(ma){return new r(ma.id);}),la=function(){k.closeBulkDeleteDialog();this.$AudienceManagerUIController1&&this.$AudienceManagerUIController1();h.deleteAudiences(ja);}.bind(this);v.execute(ka,la,la);};ia.prototype.bulkCreateAd=function(ja){"use strict";var ka=ja.map(function(na){return {id:na.id,name:na.name};}),la={custom_audiences:ka},ma=aa((ba.getURIBuilder()).setInt('act',this.$AudienceManagerUIController0).setString('targeting_spec',JSON.stringify(la)).getURI());window.open(ma,'_blank');this.$AudienceManagerUIController1();};ia.prototype.addClearSelectionCallback=function(ja){"use strict";this.$AudienceManagerUIController1=ja;};ia.prototype.loadAudienceAdgroups=function(ja,ka,la){"use strict";var ma=ja.map(function(na){return new o(na.id);});v.execute(ma,ka,la);};ia.prototype.deleteAudience=function(ja){"use strict";var ka=n.getPrimedDao(this.$AudienceManagerUIController0);this.clearDaoCache(ka);ka.remove.audience.one(function(la){if(la)h.deleteAudience(ja);},{audienceId:ja.id,handleError:function(la,ma){h.error(la,ma,da.AUDIENCE_DELETE);}});this.$AudienceManagerUIController1();};ia.prototype.addAudience=function(ja){"use strict";var ka=n.getPrimedDao(this.$AudienceManagerUIController0);this.clearDaoCache(ka);ka.fetch.audience.one(function(la){h.addAudience(la);},{audienceID:ja,fields:ea,handleError:function(la,ma){h.error(la,ma,da.AUDIENCE_ADD);}});};ia.prototype.updateAudienceCapabilities=function(ja,ka,la){"use strict";var ma=n.getPrimedDao(this.$AudienceManagerUIController0);ma.remove.removeAudienceCapabilities.one(function(na){if(na)ma.mutate.updateCapabilitiesForAudience.one(function(oa){if(oa)ma.fetch.audience.one(function(pa){h.updateAudience(ja,pa);},{audienceID:ja,fields:ea,handleError:function(pa,qa){h.error(pa,qa,da.AUDIENCE_GET);}});},{audienceID:ja,accounts_capabilities:ka,handleError:function(oa,pa){h.error(oa,pa,da.CAPABILITY_UPDATE);}});},{audienceID:ja,adaccounts:la,handleError:function(na,oa){h.error(na,oa,da.CAPABILITY_REMOVE);}});};ia.prototype.initAudiences=function(ja){"use strict";this.filterCAAndSTS({name:null,filterSet:null},ja);var ka=n.getDao();ka.fetch.accountInfo.one(function(la){h.initializeAccount(la);},{accountId:this.$AudienceManagerUIController0,migrations_override:'{"adaccount_capabilities":true}',handleError:function(la,ma){h.error(la,ma,da.ACCOUNT_INIT);}});g.log(u.AM_AUDIENCE_MANAGER_VIEW);};ia.prototype.filterCAAndSTS=function(ja,ka){"use strict";k.updateFilteringState(true);this.$AudienceManagerUIController2(ja,function(){this.$AudienceManagerUIController3(ja,function(){ka&&ka();this.$AudienceManagerUIController4();k.updateFilteringState(false);}.bind(this));}.bind(this));};ia.prototype.fetchMoreCAAndSTS=function(ja,ka,la){"use strict";if(this.$AudienceManagerUIController5)return;this.$AudienceManagerUIController5=true;k.updateLoadingMoreAudiencesState(true);this.$AudienceManagerUIController6(ja,ka,function(){this.$AudienceManagerUIController7(ja,la,function(){this.$AudienceManagerUIController8();this.$AudienceManagerUIController5=false;k.updateLoadingMoreAudiencesState(false);}.bind(this));}.bind(this));g.log(u.AM_TABLE_SCROLLING_FETCH);};ia.prototype.shouldFetchMore=function(){"use strict";var ja=i.getCustomAudiencesFromBuffer(),ka=i.getSavedTargetSpecFromBuffer();return ja.length>0||ka.length>0;};ia.prototype.$AudienceManagerUIController4=function(){"use strict";this.$AudienceManagerUIController9(function(ja){h.initializeAudiences(ja);});};ia.prototype.$AudienceManagerUIController8=function(){"use strict";this.$AudienceManagerUIController9(function(ja){h.appendAudiences(ja);});};ia.prototype.$AudienceManagerUIController9=function(ja){"use strict";var ka=w.MAX_AUDIENCES_LOAD,la=i.getCustomAudiencesFromBuffer(),ma=i.getSavedTargetSpecFromBuffer(),na=la.concat(ma);na.sort(function(pa,qa){var ra=pa.time_created||pa.time_updated_timestamp,sa=qa.time_created||qa.time_updated_timestamp;return sa-ra;});var oa=na.splice(0,ka);la=na.filter(function(pa){return !j.isSavedTargetSpec(pa);});ma=na.filter(function(pa){return j.isSavedTargetSpec(pa);});h.saveCustomAudiencesToBuffer(la);h.saveSavedTargetSpecsToBuffer(ma);ja(oa);};ia.prototype.$AudienceManagerUIController2=function(ja,ka){"use strict";var la=function(qa){this.$AudienceManagerUIController1&&this.$AudienceManagerUIController1();k.updateCustomAudienceAfterCursor(qa.paging);h.saveCustomAudiencesToBuffer(qa.data.concat([]));ka();}.bind(this),ma=new t(ja.filterSet);if(!ma.shouldFetchCustomAudiences()){la({data:[]});return;}var na=this.$AudienceManagerUIControllera(ja),oa={accountId:this.$AudienceManagerUIController0,filtering:na,fields:ea,limit:w.MAX_AUDIENCES_LOAD,migrations_override:'{"ads_api_graphnode_q4_2014": true}',handleError:function(qa,ra){h.error(qa,ra,da.AUDIENCE_INIT);}},pa=n.getDao();pa.fetch.customAudiencesForAccount.one(la,oa);};ia.prototype.$AudienceManagerUIController3=function(ja,ka){"use strict";var la=new t(ja.filterSet),ma=function(pa){this.$AudienceManagerUIController1&&this.$AudienceManagerUIController1();k.updateSavedTargetSpecAfterCursor(pa.paging);var qa=ja.name?la.filterSavedTargetSpecsName(ja.name,pa.data.concat([]).reverse()):pa.data.concat([]).reverse();h.saveSavedTargetSpecsToBuffer(qa);ka();}.bind(this);if(!la.shouldFetchSavedTargetSpecs()){ma({data:[]});return;}var na={accountId:this.$AudienceManagerUIController0,fields:z.DEFAULT_FIELDS_FOR_AUDIENCE_MANAGER,limit:w.MAX_AUDIENCES_LOAD,handleError:function(pa,qa){h.error(pa,qa,da.STS_GET);ma({data:[]});}},oa=n.getDao();oa.fetch.audiencesForAccountWithPagination.one(ma,na);};ia.prototype.$AudienceManagerUIController6=function(ja,ka,la){"use strict";var ma=function(qa){k.updateCustomAudienceAfterCursor(qa.paging);h.saveCustomAudiencesToBuffer(i.getCustomAudiencesFromBuffer().concat(qa.data));la();};if(!ka){ma({data:[]});return;}var na=n.getDao(),oa=this.$AudienceManagerUIControllera(ja),pa={accountId:this.$AudienceManagerUIController0,filtering:oa,fields:ea,limit:w.MAX_AUDIENCES_LOAD,after:ka,handleError:function(qa,ra){h.error(qa,ra,da.AUDIENCE_GET);}};na.fetch.customAudiencesForAccount.one(ma,pa);};ia.prototype.$AudienceManagerUIController7=function(ja,ka,la){"use strict";var ma=new t(ja.filterSet),na=function(qa){k.updateSavedTargetSpecAfterCursor(qa.paging);var ra=ja.name?ma.filterSavedTargetSpecsName(ja.name,qa.data.concat([]).reverse()):qa.data.concat([]).reverse();h.saveSavedTargetSpecsToBuffer(i.getSavedTargetSpecFromBuffer().concat(ra));la();};if(!ka){na({data:[]});return;}var oa={accountId:this.$AudienceManagerUIController0,fields:z.DEFAULT_FIELDS_FOR_AUDIENCE_MANAGER,limit:w.MAX_AUDIENCES_LOAD,after:ka,handleError:function(qa,ra){h.error(qa,ra,da.STS_GET);na({data:[]});}},pa=n.getDao();pa.fetch.audiencesForAccountWithPagination.one(na,oa);};ia.prototype.$AudienceManagerUIControllera=function(ja){"use strict";var ka=null;if(ja.filterSet){var la=new t(ja.filterSet),ma=la.getCAFilteringParams();if(ma)ka=ma;}if(ja.name){ka=ka||[];ka.push({field:'name',operator:l.CONTAIN,value:ja.name});}return ka;};ia.prototype.updateColumnShown=function(ja,ka){"use strict";k.updateColumnShown(ja,ka);};ia.prototype.saveColumnsShownSettings=function(ja){"use strict";new m().setURI('/ajax/ads/ui/audience_manager/save_column_shown').setData({column_shown:ja}).send();};ia.prototype.getAccountID=function(){"use strict";return this.$AudienceManagerUIController0;};ia.prototype.createAdFromSavedTargetSpec=function(ja){"use strict";var ka=aa((ba.getURIBuilder()).setInt('act',this.$AudienceManagerUIController0).setString('targeting_spec',JSON.stringify(ja.target_spec)).getURI());window.open(ka,'_blank');this.$AudienceManagerUIController1&&this.$AudienceManagerUIController1();};ia.prototype.createSavedTargetSpec=function(ja,ka,la){"use strict";var ma=n.getDao();ma.add.createNewSavedTargetSpec.one(function(na){if(na&&na.id){ma.fetch.savedTargetSpec.one(function(oa){h.addAudience(oa);},{audienceID:na.id,fields:z.DEFAULT_FIELDS_FOR_AUDIENCE_MANAGER,handleError:function(oa,pa){h.error(oa,pa,da.AUDIENCE_ADD);}});g.log(u.AM_CREATE_SAVED_AUDIENCE_COMPLETED);}},{accountId:la,targeting_spec:ka,name:ja});};ia.prototype.$AudienceManagerUIControllerb=function(ja){"use strict";var ka=function(na){na.map(function(oa){h.error(oa.error.code,oa,da.AUDIENCE_GET);});},la=function(na){na.forEach(function(oa){oa.isSavedTargetSpec=true;});h.addAudiences(na);},ma=ja.map(function(na){return new q(na);});v.execute(ma,la,ka);};ia.prototype.bulkCreateSavedTargetSpecs=function(ja,ka){"use strict";var la=function(oa){oa.map(function(pa){h.error(pa.error.code,pa,da.AUDIENCE_ADD);});},ma=function(oa){var pa=[];if(oa)oa.forEach(function(qa){if(qa.id)pa.push(qa.id);});this.$AudienceManagerUIControllerb(pa);}.bind(this),na=ja.map(function(oa){var pa={accountId:ka,targeting_spec:oa.target_spec,name:oa.name};return new p(pa);});v.execute(na,ma,la);};ia.prototype.bulkDeleteSavedTargetSpecs=function(ja){"use strict";var ka=[],la=function(){k.closeBulkDeleteDialog();this.$AudienceManagerUIController1&&this.$AudienceManagerUIController1();h.deleteAudiences(ka);}.bind(this),ma=ja.map(function(oa){return {parameters:{audienceId:oa.id},callback:function(pa){if(pa)ka.push(oa);}};}),na=n.getDao();na.remove.audience.multi(function(){la();},{requests:ma});};e.exports=ia;},null);
__d("AudienceManagerSetupUtils",["AdInterfacesUiLogger","AdsAMViewActions","AudienceDaoManager","AudienceManagerUIController","AdsCreationConfig"],function(a,b,c,d,e,f,g,h,i,j){'use strict';var k=b('AdsCreationConfig').admgr_settings,l={setupLogging:function(m,n){g.setAccountID(m);g.setAppName(n);},getPrimedDao:function(m){return i.getPrimedDao(m);},getController:function(m){return new j(m);},initializeUI:function(m){m.initAudiences(this._initializeColumnSelector.bind(this));},_initializeColumnSelector:function(){var m=k.audience_manager_column_shown;if(m&&!(m instanceof Array))h.initializeColumnsShown(m);}};e.exports=l;},null);
__d("AudienceManagerMainController",["AdInterfacesAppNames","AudienceDaoManager","AudienceManagerChrome.react","AudienceManagerPlacement","AudienceManagerSetupUtils","Event","GraphAPI","React","debounce","emptyFunction","ge","getViewportDimensions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s,t=null,u,v,w,x,y,z,aa;function ba(){var fa=r();y=fa.width;u=fa.height;var ga=q('pagelet_bluebar');if(!w&&ga&&ga.offsetHeight)w=ga.offsetHeight;var ha=q('bizBlackBar');if(!w&&ha&&ha.offsetHeight)w=ha.offsetHeight;}function ca(){ba();da();}function da(){n.render(n.createElement(i,{accountID:s,primedDao:t,top:w,width:y,height:u-w,controller:x,canWrite:z,autoLaunch:aa,placement:j.STAND_ALONE}),v);}var ea={setup:function(fa,ga,ha,ia){k.setupLogging(ga,g.AUDIENCE_MANAGER_V3);h.initializeAPI();t=k.getPrimedDao(ga);x=k.getController(ga);k.initializeUI(x);v=fa;s=ga;z=ha;aa=ia;ba();l.listen(window,'resize',o(ca,160));da();}};e.exports=ea;},null);